var tt=Object.defineProperty;var ot=(f,t,e)=>t in f?tt(f,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):f[t]=e;var H=(f,t,e)=>(ot(f,typeof t!="symbol"?t+"":t,e),e);import{d as nt,g as B,h as st,a as N,b as n,k as ye,w as ce,q as it,B as p,D as Qe,C as m,F as ne,z as Xe,j as Ve,o as R,e as _e,R as at,f as Ye,E as Oe,p as rt,s as lt,v as ct,y as Je}from"./index-CtJIRocr.js";import{u as M}from"./constants-BDoWXNhu.js";import{R as dt,V as v,O as Ae,Q as q,c as Ke,e as Ee,L as ht,g as U,B as z,h as Le,F as He,M as c,i as xe,j as K,k as pt,T as he,a as ut,l as mt,E as ft,S as bt,C as Ze,m as gt,A as vt,D as wt,n as yt,d as _t,W as xt,o as J,p as Ct}from"./methods-iGD_OgWD.js";import{D as Re,R as Pt,a as Mt,C as St,M as Et,P as jt,O as zt}from"./picker-BlBKLxBG.js";import{_ as kt,a as Ue}from"./pgModal.vue_vue_type_style_index_0_lang-DE7N1xN7.js";import{_ as It}from"./_plugin-vue_export-helper-DlAUqK2U.js";const se=new dt,k=new v,ee=new v,C=new q,$e={X:new v(1,0,0),Y:new v(0,1,0),Z:new v(0,0,1)},De={type:"change"},qe={type:"mouseDown"},Fe={type:"mouseUp",mode:null},We={type:"objectChange"};class Vt extends Ae{constructor(t,e){super(),e===void 0&&(console.warn('THREE.TransformControls: The second parameter "domElement" is now mandatory.'),e=document),this.isTransformControls=!0,this.visible=!1,this.domElement=e,this.domElement.style.touchAction="none";const i=new Qt;this._gizmo=i,this.add(i);const a=new Xt;this._plane=a,this.add(a);const h=this;function o(y,Q){let Z=Q;Object.defineProperty(h,y,{get:function(){return Z!==void 0?Z:Q},set:function(F){Z!==F&&(Z=F,a[y]=F,i[y]=F,h.dispatchEvent({type:y+"-changed",value:F}),h.dispatchEvent(De))}}),h[y]=Q,a[y]=Q,i[y]=Q}o("camera",t),o("object",void 0),o("enabled",!0),o("axis",null),o("mode","translate"),o("translationSnap",null),o("rotationSnap",null),o("scaleSnap",null),o("space","world"),o("size",1),o("dragging",!1),o("showX",!0),o("showY",!0),o("showZ",!0);const x=new v,V=new v,A=new q,j=new q,P=new v,te=new q,de=new v,D=new v,b=new v,Y=0,T=new v;o("worldPosition",x),o("worldPositionStart",V),o("worldQuaternion",A),o("worldQuaternionStart",j),o("cameraPosition",P),o("cameraQuaternion",te),o("pointStart",de),o("pointEnd",D),o("rotationAxis",b),o("rotationAngle",Y),o("eye",T),this._offset=new v,this._startNorm=new v,this._endNorm=new v,this._cameraScale=new v,this._parentPosition=new v,this._parentQuaternion=new q,this._parentQuaternionInv=new q,this._parentScale=new v,this._worldScaleStart=new v,this._worldQuaternionInv=new q,this._worldScale=new v,this._positionStart=new v,this._quaternionStart=new q,this._scaleStart=new v,this._getPointer=Ot.bind(this),this._onPointerDown=Dt.bind(this),this._onPointerHover=Ut.bind(this),this._onPointerMove=Tt.bind(this),this._onPointerUp=At.bind(this),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointermove",this._onPointerHover),this.domElement.addEventListener("pointerup",this._onPointerUp)}updateMatrixWorld(){this.object!==void 0&&(this.object.updateMatrixWorld(),this.object.parent===null?console.error("TransformControls: The attached 3D object must be a part of the scene graph."):this.object.parent.matrixWorld.decompose(this._parentPosition,this._parentQuaternion,this._parentScale),this.object.matrixWorld.decompose(this.worldPosition,this.worldQuaternion,this._worldScale),this._parentQuaternionInv.copy(this._parentQuaternion).invert(),this._worldQuaternionInv.copy(this.worldQuaternion).invert()),this.camera.updateMatrixWorld(),this.camera.matrixWorld.decompose(this.cameraPosition,this.cameraQuaternion,this._cameraScale),this.camera.isOrthographicCamera?this.camera.getWorldDirection(this.eye).negate():this.eye.copy(this.cameraPosition).sub(this.worldPosition).normalize(),super.updateMatrixWorld(this)}pointerHover(t){if(this.object===void 0||this.dragging===!0)return;se.setFromCamera(t,this.camera);const e=Te(this._gizmo.picker[this.mode],se);e?this.axis=e.object.name:this.axis=null}pointerDown(t){if(!(this.object===void 0||this.dragging===!0||t.button!==0)&&this.axis!==null){se.setFromCamera(t,this.camera);const e=Te(this._plane,se,!0);e&&(this.object.updateMatrixWorld(),this.object.parent.updateMatrixWorld(),this._positionStart.copy(this.object.position),this._quaternionStart.copy(this.object.quaternion),this._scaleStart.copy(this.object.scale),this.object.matrixWorld.decompose(this.worldPositionStart,this.worldQuaternionStart,this._worldScaleStart),this.pointStart.copy(e.point).sub(this.worldPositionStart)),this.dragging=!0,qe.mode=this.mode,this.dispatchEvent(qe)}}pointerMove(t){const e=this.axis,i=this.mode,a=this.object;let h=this.space;if(i==="scale"?h="local":(e==="E"||e==="XYZE"||e==="XYZ")&&(h="world"),a===void 0||e===null||this.dragging===!1||t.button!==-1)return;se.setFromCamera(t,this.camera);const o=Te(this._plane,se,!0);if(o){if(this.pointEnd.copy(o.point).sub(this.worldPositionStart),i==="translate")this._offset.copy(this.pointEnd).sub(this.pointStart),h==="local"&&e!=="XYZ"&&this._offset.applyQuaternion(this._worldQuaternionInv),e.indexOf("X")===-1&&(this._offset.x=0),e.indexOf("Y")===-1&&(this._offset.y=0),e.indexOf("Z")===-1&&(this._offset.z=0),h==="local"&&e!=="XYZ"?this._offset.applyQuaternion(this._quaternionStart).divide(this._parentScale):this._offset.applyQuaternion(this._parentQuaternionInv).divide(this._parentScale),a.position.copy(this._offset).add(this._positionStart),this.translationSnap&&(h==="local"&&(a.position.applyQuaternion(C.copy(this._quaternionStart).invert()),e.search("X")!==-1&&(a.position.x=Math.round(a.position.x/this.translationSnap)*this.translationSnap),e.search("Y")!==-1&&(a.position.y=Math.round(a.position.y/this.translationSnap)*this.translationSnap),e.search("Z")!==-1&&(a.position.z=Math.round(a.position.z/this.translationSnap)*this.translationSnap),a.position.applyQuaternion(this._quaternionStart)),h==="world"&&(a.parent&&a.position.add(k.setFromMatrixPosition(a.parent.matrixWorld)),e.search("X")!==-1&&(a.position.x=Math.round(a.position.x/this.translationSnap)*this.translationSnap),e.search("Y")!==-1&&(a.position.y=Math.round(a.position.y/this.translationSnap)*this.translationSnap),e.search("Z")!==-1&&(a.position.z=Math.round(a.position.z/this.translationSnap)*this.translationSnap),a.parent&&a.position.sub(k.setFromMatrixPosition(a.parent.matrixWorld))));else if(i==="scale"){if(e.search("XYZ")!==-1){let x=this.pointEnd.length()/this.pointStart.length();this.pointEnd.dot(this.pointStart)<0&&(x*=-1),ee.set(x,x,x)}else k.copy(this.pointStart),ee.copy(this.pointEnd),k.applyQuaternion(this._worldQuaternionInv),ee.applyQuaternion(this._worldQuaternionInv),ee.divide(k),e.search("X")===-1&&(ee.x=1),e.search("Y")===-1&&(ee.y=1),e.search("Z")===-1&&(ee.z=1);a.scale.copy(this._scaleStart).multiply(ee),this.scaleSnap&&(e.search("X")!==-1&&(a.scale.x=Math.round(a.scale.x/this.scaleSnap)*this.scaleSnap||this.scaleSnap),e.search("Y")!==-1&&(a.scale.y=Math.round(a.scale.y/this.scaleSnap)*this.scaleSnap||this.scaleSnap),e.search("Z")!==-1&&(a.scale.z=Math.round(a.scale.z/this.scaleSnap)*this.scaleSnap||this.scaleSnap))}else if(i==="rotate"){this._offset.copy(this.pointEnd).sub(this.pointStart);const x=20/this.worldPosition.distanceTo(k.setFromMatrixPosition(this.camera.matrixWorld));let V=!1;e==="XYZE"?(this.rotationAxis.copy(this._offset).cross(this.eye).normalize(),this.rotationAngle=this._offset.dot(k.copy(this.rotationAxis).cross(this.eye))*x):(e==="X"||e==="Y"||e==="Z")&&(this.rotationAxis.copy($e[e]),k.copy($e[e]),h==="local"&&k.applyQuaternion(this.worldQuaternion),k.cross(this.eye),k.length()===0?V=!0:this.rotationAngle=this._offset.dot(k.normalize())*x),(e==="E"||V)&&(this.rotationAxis.copy(this.eye),this.rotationAngle=this.pointEnd.angleTo(this.pointStart),this._startNorm.copy(this.pointStart).normalize(),this._endNorm.copy(this.pointEnd).normalize(),this.rotationAngle*=this._endNorm.cross(this._startNorm).dot(this.eye)<0?1:-1),this.rotationSnap&&(this.rotationAngle=Math.round(this.rotationAngle/this.rotationSnap)*this.rotationSnap),h==="local"&&e!=="E"&&e!=="XYZE"?(a.quaternion.copy(this._quaternionStart),a.quaternion.multiply(C.setFromAxisAngle(this.rotationAxis,this.rotationAngle)).normalize()):(this.rotationAxis.applyQuaternion(this._parentQuaternionInv),a.quaternion.copy(C.setFromAxisAngle(this.rotationAxis,this.rotationAngle)),a.quaternion.multiply(this._quaternionStart).normalize())}this.dispatchEvent(De),this.dispatchEvent(We)}}pointerUp(t){t.button===0&&(this.dragging&&this.axis!==null&&(Fe.mode=this.mode,this.dispatchEvent(Fe)),this.dragging=!1,this.axis=null)}dispose(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerHover),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.traverse(function(t){t.geometry&&t.geometry.dispose(),t.material&&t.material.dispose()})}attach(t){return this.object=t,this.visible=!0,this}detach(){return this.object=void 0,this.visible=!1,this.axis=null,this}reset(){this.enabled&&this.dragging&&(this.object.position.copy(this._positionStart),this.object.quaternion.copy(this._quaternionStart),this.object.scale.copy(this._scaleStart),this.dispatchEvent(De),this.dispatchEvent(We),this.pointStart.copy(this.pointEnd))}getRaycaster(){return se}getMode(){return this.mode}setMode(t){this.mode=t}setTranslationSnap(t){this.translationSnap=t}setRotationSnap(t){this.rotationSnap=t}setScaleSnap(t){this.scaleSnap=t}setSize(t){this.size=t}setSpace(t){this.space=t}}function Ot(f){if(this.domElement.ownerDocument.pointerLockElement)return{x:0,y:0,button:f.button};{const t=this.domElement.getBoundingClientRect();return{x:(f.clientX-t.left)/t.width*2-1,y:-(f.clientY-t.top)/t.height*2+1,button:f.button}}}function Ut(f){if(this.enabled)switch(f.pointerType){case"mouse":case"pen":this.pointerHover(this._getPointer(f));break}}function Dt(f){this.enabled&&(document.pointerLockElement||this.domElement.setPointerCapture(f.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.pointerHover(this._getPointer(f)),this.pointerDown(this._getPointer(f)))}function Tt(f){this.enabled&&this.pointerMove(this._getPointer(f))}function At(f){this.enabled&&(this.domElement.releasePointerCapture(f.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.pointerUp(this._getPointer(f)))}function Te(f,t,e){const i=t.intersectObject(f,!0);for(let a=0;a<i.length;a++)if(i[a].object.visible||e)return i[a];return!1}const Ce=new ft,_=new v(0,1,0),Ge=new v(0,0,0),Be=new Ke,Pe=new q,Se=new q,$=new v,Ne=new Ke,me=new v(1,0,0),ie=new v(0,1,0),fe=new v(0,0,1),Me=new v,pe=new v,ue=new v;class Qt extends Ae{constructor(){super(),this.isTransformControlsGizmo=!0,this.type="TransformControlsGizmo";const t=new Ee({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),e=new ht({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),i=t.clone();i.opacity=.15;const a=e.clone();a.opacity=.5;const h=t.clone();h.color.setHex(16711680);const o=t.clone();o.color.setHex(65280);const x=t.clone();x.color.setHex(255);const V=t.clone();V.color.setHex(16711680),V.opacity=.5;const A=t.clone();A.color.setHex(65280),A.opacity=.5;const j=t.clone();j.color.setHex(255),j.opacity=.5;const P=t.clone();P.opacity=.25;const te=t.clone();te.color.setHex(16776960),te.opacity=.25,t.clone().color.setHex(16776960);const D=t.clone();D.color.setHex(7895160);const b=new U(0,.04,.1,12);b.translate(0,.05,0);const Y=new z(.08,.08,.08);Y.translate(0,.04,0);const T=new Le;T.setAttribute("position",new He([0,0,0,1,0,0],3));const y=new U(.0075,.0075,.5,3);y.translate(0,.25,0);function Q(I,X){const O=new he(I,.0075,3,64,X*Math.PI*2);return O.rotateY(Math.PI/2),O.rotateX(Math.PI/2),O}function Z(){const I=new Le;return I.setAttribute("position",new He([0,0,0,1,1,1],3)),I}const F={X:[[new c(b,h),[.5,0,0],[0,0,-Math.PI/2]],[new c(b,h),[-.5,0,0],[0,0,Math.PI/2]],[new c(y,h),[0,0,0],[0,0,-Math.PI/2]]],Y:[[new c(b,o),[0,.5,0]],[new c(b,o),[0,-.5,0],[Math.PI,0,0]],[new c(y,o)]],Z:[[new c(b,x),[0,0,.5],[Math.PI/2,0,0]],[new c(b,x),[0,0,-.5],[-Math.PI/2,0,0]],[new c(y,x),null,[Math.PI/2,0,0]]],XYZ:[[new c(new xe(.1,0),P.clone()),[0,0,0]]],XY:[[new c(new z(.15,.15,.01),j.clone()),[.15,.15,0]]],YZ:[[new c(new z(.15,.15,.01),V.clone()),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new c(new z(.15,.15,.01),A.clone()),[.15,0,.15],[-Math.PI/2,0,0]]]},je={X:[[new c(new U(.2,0,.6,4),i),[.3,0,0],[0,0,-Math.PI/2]],[new c(new U(.2,0,.6,4),i),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new c(new U(.2,0,.6,4),i),[0,.3,0]],[new c(new U(.2,0,.6,4),i),[0,-.3,0],[0,0,Math.PI]]],Z:[[new c(new U(.2,0,.6,4),i),[0,0,.3],[Math.PI/2,0,0]],[new c(new U(.2,0,.6,4),i),[0,0,-.3],[-Math.PI/2,0,0]]],XYZ:[[new c(new xe(.2,0),i)]],XY:[[new c(new z(.2,.2,.01),i),[.15,.15,0]]],YZ:[[new c(new z(.2,.2,.01),i),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new c(new z(.2,.2,.01),i),[.15,0,.15],[-Math.PI/2,0,0]]]},ae={START:[[new c(new xe(.01,2),a),null,null,null,"helper"]],END:[[new c(new xe(.01,2),a),null,null,null,"helper"]],DELTA:[[new K(Z(),a),null,null,null,"helper"]],X:[[new K(T,a.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new K(T,a.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new K(T,a.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},be={XYZE:[[new c(Q(.5,1),D),null,[0,Math.PI/2,0]]],X:[[new c(Q(.5,.5),h)]],Y:[[new c(Q(.5,.5),o),null,[0,0,-Math.PI/2]]],Z:[[new c(Q(.5,.5),x),null,[0,Math.PI/2,0]]],E:[[new c(Q(.75,1),te),null,[0,Math.PI/2,0]]]},ge={AXIS:[[new K(T,a.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},re={XYZE:[[new c(new pt(.25,10,8),i)]],X:[[new c(new he(.5,.1,4,24),i),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new c(new he(.5,.1,4,24),i),[0,0,0],[Math.PI/2,0,0]]],Z:[[new c(new he(.5,.1,4,24),i),[0,0,0],[0,0,-Math.PI/2]]],E:[[new c(new he(.75,.1,2,24),i)]]},ze={X:[[new c(Y,h),[.5,0,0],[0,0,-Math.PI/2]],[new c(y,h),[0,0,0],[0,0,-Math.PI/2]],[new c(Y,h),[-.5,0,0],[0,0,Math.PI/2]]],Y:[[new c(Y,o),[0,.5,0]],[new c(y,o)],[new c(Y,o),[0,-.5,0],[0,0,Math.PI]]],Z:[[new c(Y,x),[0,0,.5],[Math.PI/2,0,0]],[new c(y,x),[0,0,0],[Math.PI/2,0,0]],[new c(Y,x),[0,0,-.5],[-Math.PI/2,0,0]]],XY:[[new c(new z(.15,.15,.01),j),[.15,.15,0]]],YZ:[[new c(new z(.15,.15,.01),V),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new c(new z(.15,.15,.01),A),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new c(new z(.1,.1,.1),P.clone())]]},oe={X:[[new c(new U(.2,0,.6,4),i),[.3,0,0],[0,0,-Math.PI/2]],[new c(new U(.2,0,.6,4),i),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new c(new U(.2,0,.6,4),i),[0,.3,0]],[new c(new U(.2,0,.6,4),i),[0,-.3,0],[0,0,Math.PI]]],Z:[[new c(new U(.2,0,.6,4),i),[0,0,.3],[Math.PI/2,0,0]],[new c(new U(.2,0,.6,4),i),[0,0,-.3],[-Math.PI/2,0,0]]],XY:[[new c(new z(.2,.2,.01),i),[.15,.15,0]]],YZ:[[new c(new z(.2,.2,.01),i),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new c(new z(.2,.2,.01),i),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new c(new z(.2,.2,.2),i),[0,0,0]]]},le={X:[[new K(T,a.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new K(T,a.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new K(T,a.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]};function g(I){const X=new Ae;for(const O in I)for(let S=I[O].length;S--;){const E=I[O][S][0].clone(),W=I[O][S][1],G=I[O][S][2],L=I[O][S][3],ke=I[O][S][4];E.name=O,E.tag=ke,W&&E.position.set(W[0],W[1],W[2]),G&&E.rotation.set(G[0],G[1],G[2]),L&&E.scale.set(L[0],L[1],L[2]),E.updateMatrix();const ve=E.geometry.clone();ve.applyMatrix4(E.matrix),E.geometry=ve,E.renderOrder=1/0,E.position.set(0,0,0),E.rotation.set(0,0,0),E.scale.set(1,1,1),X.add(E)}return X}this.gizmo={},this.picker={},this.helper={},this.add(this.gizmo.translate=g(F)),this.add(this.gizmo.rotate=g(be)),this.add(this.gizmo.scale=g(ze)),this.add(this.picker.translate=g(je)),this.add(this.picker.rotate=g(re)),this.add(this.picker.scale=g(oe)),this.add(this.helper.translate=g(ae)),this.add(this.helper.rotate=g(ge)),this.add(this.helper.scale=g(le)),this.picker.translate.visible=!1,this.picker.rotate.visible=!1,this.picker.scale.visible=!1}updateMatrixWorld(t){const i=(this.mode==="scale"?"local":this.space)==="local"?this.worldQuaternion:Se;this.gizmo.translate.visible=this.mode==="translate",this.gizmo.rotate.visible=this.mode==="rotate",this.gizmo.scale.visible=this.mode==="scale",this.helper.translate.visible=this.mode==="translate",this.helper.rotate.visible=this.mode==="rotate",this.helper.scale.visible=this.mode==="scale";let a=[];a=a.concat(this.picker[this.mode].children),a=a.concat(this.gizmo[this.mode].children),a=a.concat(this.helper[this.mode].children);for(let h=0;h<a.length;h++){const o=a[h];o.visible=!0,o.rotation.set(0,0,0),o.position.copy(this.worldPosition);let x;if(this.camera.isOrthographicCamera?x=(this.camera.top-this.camera.bottom)/this.camera.zoom:x=this.worldPosition.distanceTo(this.cameraPosition)*Math.min(1.9*Math.tan(Math.PI*this.camera.fov/360)/this.camera.zoom,7),o.scale.set(1,1,1).multiplyScalar(x*this.size/4),o.tag==="helper"){o.visible=!1,o.name==="AXIS"?(o.visible=!!this.axis,this.axis==="X"&&(C.setFromEuler(Ce.set(0,0,0)),o.quaternion.copy(i).multiply(C),Math.abs(_.copy(me).applyQuaternion(i).dot(this.eye))>.9&&(o.visible=!1)),this.axis==="Y"&&(C.setFromEuler(Ce.set(0,0,Math.PI/2)),o.quaternion.copy(i).multiply(C),Math.abs(_.copy(ie).applyQuaternion(i).dot(this.eye))>.9&&(o.visible=!1)),this.axis==="Z"&&(C.setFromEuler(Ce.set(0,Math.PI/2,0)),o.quaternion.copy(i).multiply(C),Math.abs(_.copy(fe).applyQuaternion(i).dot(this.eye))>.9&&(o.visible=!1)),this.axis==="XYZE"&&(C.setFromEuler(Ce.set(0,Math.PI/2,0)),_.copy(this.rotationAxis),o.quaternion.setFromRotationMatrix(Be.lookAt(Ge,_,ie)),o.quaternion.multiply(C),o.visible=this.dragging),this.axis==="E"&&(o.visible=!1)):o.name==="START"?(o.position.copy(this.worldPositionStart),o.visible=this.dragging):o.name==="END"?(o.position.copy(this.worldPosition),o.visible=this.dragging):o.name==="DELTA"?(o.position.copy(this.worldPositionStart),o.quaternion.copy(this.worldQuaternionStart),k.set(1e-10,1e-10,1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1),k.applyQuaternion(this.worldQuaternionStart.clone().invert()),o.scale.copy(k),o.visible=this.dragging):(o.quaternion.copy(i),this.dragging?o.position.copy(this.worldPositionStart):o.position.copy(this.worldPosition),this.axis&&(o.visible=this.axis.search(o.name)!==-1));continue}o.quaternion.copy(i),this.mode==="translate"||this.mode==="scale"?(o.name==="X"&&Math.abs(_.copy(me).applyQuaternion(i).dot(this.eye))>.99&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),o.name==="Y"&&Math.abs(_.copy(ie).applyQuaternion(i).dot(this.eye))>.99&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),o.name==="Z"&&Math.abs(_.copy(fe).applyQuaternion(i).dot(this.eye))>.99&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),o.name==="XY"&&Math.abs(_.copy(fe).applyQuaternion(i).dot(this.eye))<.2&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),o.name==="YZ"&&Math.abs(_.copy(me).applyQuaternion(i).dot(this.eye))<.2&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),o.name==="XZ"&&Math.abs(_.copy(ie).applyQuaternion(i).dot(this.eye))<.2&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1)):this.mode==="rotate"&&(Pe.copy(i),_.copy(this.eye).applyQuaternion(C.copy(i).invert()),o.name.search("E")!==-1&&o.quaternion.setFromRotationMatrix(Be.lookAt(this.eye,Ge,ie)),o.name==="X"&&(C.setFromAxisAngle(me,Math.atan2(-_.y,_.z)),C.multiplyQuaternions(Pe,C),o.quaternion.copy(C)),o.name==="Y"&&(C.setFromAxisAngle(ie,Math.atan2(_.x,_.z)),C.multiplyQuaternions(Pe,C),o.quaternion.copy(C)),o.name==="Z"&&(C.setFromAxisAngle(fe,Math.atan2(_.y,_.x)),C.multiplyQuaternions(Pe,C),o.quaternion.copy(C))),o.visible=o.visible&&(o.name.indexOf("X")===-1||this.showX),o.visible=o.visible&&(o.name.indexOf("Y")===-1||this.showY),o.visible=o.visible&&(o.name.indexOf("Z")===-1||this.showZ),o.visible=o.visible&&(o.name.indexOf("E")===-1||this.showX&&this.showY&&this.showZ),o.material._color=o.material._color||o.material.color.clone(),o.material._opacity=o.material._opacity||o.material.opacity,o.material.color.copy(o.material._color),o.material.opacity=o.material._opacity,this.enabled&&this.axis&&(o.name===this.axis||this.axis.split("").some(function(V){return o.name===V}))&&(o.material.color.setHex(16776960),o.material.opacity=1)}super.updateMatrixWorld(t)}}class Xt extends c{constructor(){super(new ut(1e5,1e5,2,2),new Ee({visible:!1,wireframe:!0,side:mt,transparent:!0,opacity:.1,toneMapped:!1})),this.isTransformControlsPlane=!0,this.type="TransformControlsPlane"}updateMatrixWorld(t){let e=this.space;switch(this.position.copy(this.worldPosition),this.mode==="scale"&&(e="local"),Me.copy(me).applyQuaternion(e==="local"?this.worldQuaternion:Se),pe.copy(ie).applyQuaternion(e==="local"?this.worldQuaternion:Se),ue.copy(fe).applyQuaternion(e==="local"?this.worldQuaternion:Se),_.copy(pe),this.mode){case"translate":case"scale":switch(this.axis){case"X":_.copy(this.eye).cross(Me),$.copy(Me).cross(_);break;case"Y":_.copy(this.eye).cross(pe),$.copy(pe).cross(_);break;case"Z":_.copy(this.eye).cross(ue),$.copy(ue).cross(_);break;case"XY":$.copy(ue);break;case"YZ":$.copy(Me);break;case"XZ":_.copy(ue),$.copy(pe);break;case"XYZ":case"E":$.set(0,0,0);break}break;case"rotate":default:$.set(0,0,0)}$.length()===0?this.quaternion.copy(this.cameraQuaternion):(Ne.lookAt(k.set(0,0,0),$,_),this.quaternion.setFromRotationMatrix(Ne)),super.updateMatrixWorld(t)}}class Yt{constructor(t,e,i,a){H(this,"scene");H(this,"camera");H(this,"renderer");H(this,"startPos");H(this,"tingyun",[]);H(this,"objects",[]);H(this,"ponder");H(this,"drawObjs",[]);H(this,"mirror");H(this,"dragControl");this.scene=t,this.camera=e,this.renderer=i,this.startPos=new v().fromArray(a),this.setupPonder(this.startPos),this.dragControl=new Re([],this.camera,this.renderer.domElement)}setupPonder(t){const e=new z(6,12,6),i=new Ee({color:4697936});this.ponder=new c(e,i),this.ponder.position.set(t.x*M+M/2,(t.y+1)*M+6,t.z*M+M/2),this.scene.add(this.ponder)}changePonderPos(t){this.ponder!==void 0&&this.ponder.position.set(t[0]*M+M/2,(t[1]+1)*M+6,t[2]*M+M/2)}addNewTingyun(t){const e=new z(6,12,6),i=new Ee({color:14362664}),a=new c(e,i);a.position.set(t[0]*M+M/2,(t[1]+1)*M+6,t[2]*M+M/2),this.tingyun.push(a),this.scene.add(a)}deleteTingyun(t){this.tingyun[t]!==void 0&&(this.tingyun[t].geometry.dispose(),this.scene.remove(this.tingyun[t]),this.tingyun.splice(t,1))}changeTingyunPos(t,e){this.tingyun[t]!==void 0&&this.tingyun[t].position.set(e[0]*M+M/2,(e[1]+1)*M+6,e[2]*M+M/2)}setupDragControl(){this.dragControl=new Re(this.drawObjs,this.camera,this.renderer.domElement),this.dragControl.addEventListener("dragstart",t=>{const e=t.object.parent;e.onControlDragStart&&e.onControlDragStart(t)}),this.dragControl.addEventListener("drag",t=>{const e=t.object.parent;e.onControlDrag&&e.onControlDrag(t)}),this.dragControl.addEventListener("dragend",t=>{const e=t.object.parent;e.onControlDragEnd&&e.onControlDragEnd(t)})}addNewObject(t,e){if(e&&this.objects[e]===void 0)return;let i;switch(t.pos=t.pos||[0,0,0],t.type){case"Cube":i=new St(t.pos,t.color),e?this.objects[e]=i:this.objects.push(i);break;case"Drawbox":i=new Mt(t.pos,t.size,t.range,t.color),e?this.objects[e]=i:this.objects.push(i),this.drawObjs.push(i);break;case"Rotator":i=new Pt(t.pos,t.size,t.color,t.angle,t.direction,t.face),e?this.objects[e]=i:this.objects.push(i);break}this.scene.add(i),this.dragControl.dispose(),this.setupDragControl(),this.mirror&&(e?this.mirror.realObjs[e]=i:this.mirror.realObjs.push(i),this.mirror.updateMirrorCubePos())}deleteObject(t){if(this.objects[t]===void 0)return;this.mirror&&(this.mirror.realObjs.splice(t,1),this.mirror.updateMirrorCubePos());const e=this.objects[t];this.mirror&&e.mirrorComponent&&(this.mirror.inMirrorObjs.splice(this.mirror.inMirrorObjs.indexOf(e.mirrorComponent),1),e.mirrorComponent.children.forEach(i=>{var a;(a=i.geometry)==null||a.dispose()}),this.scene.remove(e.mirrorComponent)),this.drawObjs.splice(this.drawObjs.indexOf(e),1),e.children.forEach(i=>{var a;(a=i.geometry)==null||a.dispose()}),this.scene.remove(e),this.objects.splice(t,1),this.dragControl.dispose(),this.setupDragControl()}changeObjectInfo(t,e){if(this.objects[t]===void 0)return;const i=this.objects[t];i.objectType!==e.type?(this.drawObjs.splice(this.drawObjs.indexOf(i),1),i.children.forEach(a=>{var h;(h=a.geometry)==null||h.dispose()}),this.scene.remove(i),this.objects[t]=void 0,this.addNewObject(e,t)):(e.pos&&i.setPos&&i.setPos(e.pos),(e.angle||e.angle===0)&&i.setAngle&&i.setAngle(e.angle),e.size&&i.setSize&&i.setSize(e.size),e.color&&i.setColor&&i.setColor(e.color),(e.direction||e.direction===0)&&i.setDirection&&i.setDirection(e.direction),(e.face||e.face===0)&&i.setFace&&i.setFace(e.face)),this.mirror&&this.mirror.updateMirrorCubePos()}setupMirror(t){this.mirror&&this.mirror.dispose(),this.mirror=new Et(t.pos,t.size,t.range),this.mirror.setupMirrorCubes(Array.from(this.objects),this.scene),this.scene.add(this.mirror),this.drawObjs.push(this.mirror),this.dragControl.dispose(),this.setupDragControl()}changeMirrorInfo(t){this.mirror&&(t.pos&&this.mirror.setPos(t.pos),t.size&&this.mirror.setSize(t.size),t.range&&this.mirror.setRange(t.range),this.mirror.updateMirrorCubePos())}disposeMirror(){this.mirror&&(this.drawObjs.splice(this.drawObjs.indexOf(this.mirror),1),this.mirror.dispose(),this.scene.remove(this.mirror)),this.mirror=void 0,this.dragControl.dispose(),this.setupDragControl()}}const u=f=>(lt("data-v-3fa814fb"),f=f(),ct(),f),Lt={class:"ponder-design"},Ht={class:"control-group list-group list-group-flush"},Zt={class:"list-group-item sticky-top"},Rt=u(()=>n("h4",null,"关卡设计器",-1)),$t={class:"btn-group"},qt={class:"list-group-item"},Ft=u(()=>n("label",{for:"background",class:"form-label"},"基础设定",-1)),Wt=u(()=>n("br",null,null,-1)),Gt={class:"form-check mb-4"},Bt=u(()=>n("label",{class:"form-check-label",for:"freeControlEnabled"}," 自由控制 ",-1)),Nt={class:"form-group"},Jt=u(()=>n("label",{for:"background",class:"form-label"},"背景色",-1)),Kt={class:"list-group-item"},eo=u(()=>n("label",{for:"background",class:"form-label"},"起点坐标",-1)),to={class:"input-group mb-3"},oo={class:"list-group-item"},no=u(()=>n("label",{class:"form-label"},"终点坐标",-1)),so=u(()=>n("br",null,null,-1)),io=["onUpdate:modelValue","onChange"],ao=["onUpdate:modelValue","onChange"],ro=["onUpdate:modelValue","onChange"],lo=["onClick"],co={class:"list-group-item"},ho=u(()=>n("label",{for:"background",class:"form-label"},"物体列表",-1)),po=u(()=>n("br",null,null,-1)),uo={class:"accordion mb-3",id:"objectList"},mo={class:"accordion-header"},fo=["id","data-bs-target","aria-controls"],bo=["id"],go={class:"accordion-body"},vo={class:"form-group mb-3"},wo=u(()=>n("label",{class:"form-label"},"物体位置",-1)),yo={class:"input-group"},_o=["onUpdate:modelValue","onChange"],xo=["onUpdate:modelValue","onChange"],Co=["onUpdate:modelValue","onChange"],Po={class:"form-group mb-3"},Mo=u(()=>n("label",{class:"form-label"},"物体大小",-1)),So={class:"input-group"},Eo=["onUpdate:modelValue","onChange"],jo=["onUpdate:modelValue","onChange"],zo=["onUpdate:modelValue","onChange"],ko={class:"form-group mb-3"},Io=u(()=>n("label",{class:"form-label"},"移动范围",-1)),Vo={class:"input-group"},Oo=u(()=>n("span",{class:"input-group-text"},"x",-1)),Uo=["onUpdate:modelValue","onChange"],Do=["onUpdate:modelValue","onChange"],To={class:"input-group"},Ao=u(()=>n("span",{class:"input-group-text"},"y",-1)),Qo=["onUpdate:modelValue","onChange"],Xo=["onUpdate:modelValue","onChange"],Yo={class:"input-group"},Lo=u(()=>n("span",{class:"input-group-text"},"z",-1)),Ho=["onUpdate:modelValue","onChange"],Zo=["onUpdate:modelValue","onChange"],Ro={class:"form-group mb-3"},$o=u(()=>n("label",{class:"form-label"},"物体大小",-1)),qo={class:"input-group"},Fo=["onUpdate:modelValue","onChange"],Wo=["onUpdate:modelValue","onChange"],Go={class:"form-group mb-3"},Bo=u(()=>n("label",{class:"form-label"},"摆放方向",-1)),No={class:"input-group"},Jo=["onUpdate:modelValue","onChange"],Ko=Je('<option value="+x" data-v-3fa814fb>+x</option><option value="+y" data-v-3fa814fb>+y</option><option value="+z" data-v-3fa814fb>+z</option><option value="-x" data-v-3fa814fb>-x</option><option value="-y" data-v-3fa814fb>-y</option><option value="-z" data-v-3fa814fb>-z</option>',6),en=[Ko],tn=["onUpdate:modelValue","onChange"],on=Je('<option value="+x" data-v-3fa814fb>+x</option><option value="+y" data-v-3fa814fb>+y</option><option value="+z" data-v-3fa814fb>+z</option><option value="-x" data-v-3fa814fb>-x</option><option value="-y" data-v-3fa814fb>-y</option><option value="-z" data-v-3fa814fb>-z</option>',6),nn=[on],sn={class:"form-group mb-3"},an=u(()=>n("label",{class:"form-label"},"旋转面",-1)),rn=["onUpdate:modelValue","onChange"],ln=u(()=>n("option",{value:0},"yOz平面",-1)),cn=u(()=>n("option",{value:1},"xOz平面",-1)),dn=u(()=>n("option",{value:2},"xOy平面",-1)),hn=[ln,cn,dn],pn={class:"form-group mb-3"},un=u(()=>n("label",{class:"form-label"},"初始方向",-1)),mn=["onUpdate:modelValue","onChange"],fn={class:"form-group mb-3"},bn=u(()=>n("label",{class:"form-label"},"物体颜色",-1)),gn={class:"input-group"},vn=["onUpdate:modelValue","onChange"],wn={class:"form-group mb-3"},yn=["onClick"],_n=u(()=>n("label",{for:"background",class:"form-label"},"新建物体",-1)),xn=u(()=>n("br",null,null,-1)),Cn={class:"btn-group",role:"group","aria-label":"Basic example"},Pn={class:"list-group-item"},Mn=u(()=>n("label",{for:"background",class:"form-label"},"镜子设定",-1)),Sn=u(()=>n("br",null,null,-1)),En={class:"form-check"},jn=u(()=>n("label",{class:"form-check-label",for:"mirrorEnabled"}," 开启镜子 ",-1)),zn={class:"form-group mb-3"},kn=u(()=>n("label",{class:"form-label"},"镜子位置",-1)),In={class:"input-group"},Vn={class:"form-group mb-3"},On=u(()=>n("label",{class:"form-label"},"镜子大小",-1)),Un={class:"input-group"},Dn={class:"form-group mb-3"},Tn=u(()=>n("label",{class:"form-label"},"移动范围",-1)),An={class:"input-group"},Qn=u(()=>n("span",{class:"input-group-text"},"x",-1)),Xn={class:"input-group"},Yn=u(()=>n("span",{class:"input-group-text"},"y",-1)),Ln={class:"input-group"},Hn=u(()=>n("span",{class:"input-group-text"},"z",-1)),Zn=u(()=>n("div",{class:"right-scene"},[n("canvas",{id:"pg-canvas"})],-1)),Rn={class:"update-log"},$n=u(()=>n("label",null,"关卡代码",-1)),qn=u(()=>n("br",null,null,-1)),Fn={style:{color:"#db2828"}},Wn=nt({__name:"DesignView",setup(f){document.title="关卡设计器 | Ponder Guy";const t=B(),e=B({background:"#feffbd",start:[0,0,0],dests:[[0,0,5]],objects:[]}),i={x:0,y:0},a=new jt,h={width:Math.floor(window.innerWidth*.7),height:window.innerHeight};let o;const x=w=>{const l=o.getBoundingClientRect();return{x:(w.clientX-l.left)*o.width/l.width,y:(w.clientY-l.top)*o.height/l.height}},V=w=>{const l=x(w);i.x=l.x/o.width*2-1,i.y=l.y/o.height*-2+1},A=()=>{i.x=-1e5,i.y=-1e5};A(),window.addEventListener("mousemove",V),window.addEventListener("mouseout",A),window.addEventListener("mouseleave",A),window.addEventListener("touchend",A);const j=new bt;j.background=new Ze(e.value.background);const P=new gt(h.width/-16,h.width/16,h.height/16,h.height/-16,-200,500);P.position.set(200,200,200),P.lookAt(j.position),P.zoom=2;const te=new vt(16777215);j.add(te);const de=new wt(16777215,.8);de.position.set(0,100,0),j.add(de);let D,b;const Y=new yt(100);j.add(Y);const T=()=>{const w=o.getBoundingClientRect();h.height=w.height,h.width=w.width,P.left=h.width/-2,P.right=h.width/2,P.top=h.height/2,P.bottom=h.height/-2,P.left*=.5,P.right*=.5,P.top*=.5,P.bottom*=.5,P.updateProjectionMatrix(),D.setSize(h.width,h.height),D.setPixelRatio(window.devicePixelRatio)};let y;st(()=>{o=document.getElementById("pg-canvas"),D=new xt({canvas:o,antialias:!0,alpha:!0}),D.localClippingEnabled=!0,b=new Yt(j,P,D,e.value.start),b.addNewTingyun([0,0,5]),b.dragControl.enabled=!1;const w=new zt(P,D.domElement);w.enableRotate=!1,y=new Vt(P,D.domElement),y.setSize(.3),window.addEventListener("mousedown",s=>{s.button===2&&y.detach()}),y.addEventListener("objectChange",s=>{var we;let d=s.target.object;if(!d)return;for(;!d.parent.isScene;)d=d.parent;const r=b.objects.indexOf(d);if(r!==-1){switch(d.objectType){case"Cube":e.value.objects[r].pos=[J(d.children[0].position.x,1),J(d.children[0].position.y,1),J(d.children[0].position.z,1)],g(r);break;case"Drawbox":e.value.objects[r].pos=[J(d.children[0].position.x,d.len[0]),J(d.children[0].position.y,d.len[1]),J(d.children[0].position.z,d.len[2])],g(r);break;case"Mirror":e.value.mirror&&(e.value.mirror.pos=[J(d.children[0].position.x,d.len[0]),J(d.children[0].position.y,d.len[1]),J(d.children[0].position.z,d.len[2])],b.changeMirrorInfo(e.value.mirror));break;case"Rotator":e.value.objects[r].pos=[Math.round(d.position.x/M-1/2),Math.round(d.position.y/M),Math.round(d.position.z/M-1/2)],g(r);break}(we=b.mirror)==null||we.updateMirrorCubePos()}}),j.add(y),o.addEventListener("mousedown",()=>{if(a.pickedObject){let s=a.pickedObject;for(;!s.parent.isScene;)s=s.parent;const d=b.objects.indexOf(s);if(d!==-1){const r=document.querySelector(`#flush-button-${d}`);r&&(r.classList.contains("collapsed")&&r.click(),setTimeout(()=>{const we=setInterval(()=>{const Ie=r.getBoundingClientRect().top;Math.abs(Ie-80)<=30||t.value.scrollTop+t.value.offsetHeight+10>t.value.scrollHeight?(t.value.scrollTop+=Ie-80,clearInterval(we)):Ie>80?t.value.scrollTop+=10:t.value.scrollTop-=10},10)},300))}["Cube","Drawbox","Rotator"].includes(s.objectType)?(s.objectType==="Rotator"?y.attach(s):y.attach(s.children[0]),y.setMode("translate")):y.detach()}}),T();const l=()=>{requestAnimationFrame(l),a.pick(new Ct(i.x,i.y),j,P),D.render(j,P)};l()}),window.addEventListener("resize",_t(T,100));const Z=B(!0);function F(){Z.value?(y.enabled=!0,b.dragControl.enabled=!1,j.add(y)):(y.enabled=!1,b.dragControl.enabled=!0,j.remove(y))}function je(){j.background=new Ze(e.value.background)}function ae(){b.changePonderPos(e.value.start)}function be(){e.value.dests.push([0,0,1]),b.addNewTingyun([0,0,1])}function ge(w){e.value.dests.splice(w,1),b.deleteTingyun(w)}function re(w){b.changeTingyunPos(w,e.value.dests[w])}const ze=B({Cube:"立方体",Drawbox:"移动条",Rotator:"旋转体",Plane:"平面"});let oe=[0,0,0];function le(w){let l;switch(oe[1]++,w){case"Cube":l={type:w,pos:Array.from(oe),color:"#54c8ff"};break;case"Drawbox":l={type:w,pos:Array.from(oe),size:[1,1,4],range:[[0,0],[0,0],[0,0]],color:"#ffe21f"};break;case"Rotator":l={type:w,pos:Array.from(oe),size:[4,4],face:["+x","+z"],direction:1,angle:0,color:"#fb8888"}}e.value.objects.push(l),b.addNewObject(l),a.updateObjs(b.objects)}function g(w){b.changeObjectInfo(w,e.value.objects[w]),oe=[...e.value.objects[w].pos]}function I(w){e.value.objects.splice(w,1),b.deleteObject(w)}const X=B(!1);function O(){b.disposeMirror(),X.value?(e.value.mirror={pos:[0,0,0],size:[5,10,0],range:[[-20,20],[0,0],[0,0]]},b.setupMirror(e.value.mirror),a.updateObjs([...b.objects,b.mirror])):(e.value.mirror=void 0,a.updateObjs(b.objects))}function S(){X.value&&e.value.mirror&&b.changeMirrorInfo(e.value.mirror)}const E=B(""),W=B("导出"),G=B(""),L=B(!1);function ke(){W.value="导入",E.value="",G.value="",L.value=!0}function ve(){W.value="导出",E.value=btoa(JSON.stringify(e.value)),G.value="",L.value=!0}function et(){var w;try{const l=JSON.parse(atob(E.value));for(;e.value.dests.length>0;)ge(0);for(;e.value.objects.length>0;)I(0);X.value=!1,a.updateObjs([]),e.value.start=l.start,ae();for(let s=0;s<l.dests.length;++s)be(),e.value.dests[s]=l.dests[s],re(s);for(let s=0;s<l.objects.length;++s)le(l.objects[s].type),e.value.objects[s]=l.objects[s],g(s);l.mirror&&(X.value=!0,O(),e.value.mirror=l.mirror,S()),(w=document.getElementById("closeModelButton"))==null||w.click()}catch(l){G.value=`导入失败!
${l}`}}return(w,l)=>(R(),N(ne,null,[n("div",Lt,[n("div",{class:"left-control",ref_key:"leftControl",ref:t},[n("ul",Ht,[n("li",Zt,[Rt,n("div",$t,[ye(it(at),{class:"btn btn-sm btn-outline-secondary",to:"/game/list",style:{"--bs-btn-padding-y":".25rem","--bs-btn-padding-x":".5rem","--bs-btn-font-size":".75rem"}},{default:ce(()=>[_e("返回")]),_:1}),n("button",{class:"btn btn-sm btn-outline-secondary",onClick:ke,style:{"--bs-btn-padding-y":".25rem","--bs-btn-padding-x":".5rem","--bs-btn-font-size":".75rem"}},"导入"),n("button",{class:"btn btn-sm btn-outline-secondary",onClick:ve,style:{"--bs-btn-padding-y":".25rem","--bs-btn-padding-x":".5rem","--bs-btn-font-size":".75rem"}},"导出")])]),n("li",qt,[Ft,Wt,n("div",Gt,[p(n("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":l[0]||(l[0]=s=>Z.value=s),onChange:F,id:"freeControlEnabled"},null,544),[[Qe,Z.value]]),Bt]),n("div",Nt,[Jt,p(n("input",{class:"form-control",name:"background","onUpdate:modelValue":l[1]||(l[1]=s=>e.value.background=s),onChange:je},null,544),[[m,e.value.background]])])]),n("li",Kt,[eo,n("div",to,[p(n("input",{type:"number",class:"form-control",placeholder:"x坐标","onUpdate:modelValue":l[2]||(l[2]=s=>e.value.start[0]=s),onChange:ae},null,544),[[m,e.value.start[0]]]),p(n("input",{type:"number",class:"form-control",placeholder:"y坐标","onUpdate:modelValue":l[3]||(l[3]=s=>e.value.start[1]=s),onChange:ae},null,544),[[m,e.value.start[1]]]),p(n("input",{type:"number",class:"form-control",placeholder:"z坐标","onUpdate:modelValue":l[4]||(l[4]=s=>e.value.start[2]=s),onChange:ae},null,544),[[m,e.value.start[2]]])])]),n("li",oo,[no,so,(R(!0),N(ne,null,Xe(e.value.dests,(s,d)=>(R(),N("div",{class:"input-group mb-3",key:d},[p(n("input",{type:"number",class:"form-control",placeholder:"x坐标","onUpdate:modelValue":r=>s[0]=r,onChange:r=>re(d)},null,40,io),[[m,s[0]]]),p(n("input",{type:"number",class:"form-control",placeholder:"y坐标","onUpdate:modelValue":r=>s[1]=r,onChange:r=>re(d)},null,40,ao),[[m,s[1]]]),p(n("input",{type:"number",class:"form-control",placeholder:"z坐标","onUpdate:modelValue":r=>s[2]=r,onChange:r=>re(d)},null,40,ro),[[m,s[2]]]),n("button",{class:"btn btn-outline-danger",type:"button",onClick:r=>ge(d)},"-",8,lo)]))),128)),n("button",{class:"btn btn-sm btn-outline-primary",onClick:be},"+")]),n("li",co,[ho,po,n("div",uo,[(R(!0),N(ne,null,Xe(e.value.objects,(s,d)=>(R(),N("div",{class:"accordion-item",key:d},[n("span",mo,[n("button",{class:"accordion-button collapsed",id:`flush-button-${d}`,type:"button","data-bs-toggle":"collapse","data-bs-target":`#flush-${d}`,"aria-expanded":"false","aria-controls":`flush-${d}`},Ye(ze.value[s.type]),9,fo)]),n("div",{id:`flush-${d}`,class:"accordion-collapse collapse","data-bs-parent":"#objectList"},[n("div",go,[n("div",vo,[wo,n("div",yo,[p(n("input",{type:"number",class:"form-control",placeholder:"x坐标","onUpdate:modelValue":r=>s.pos[0]=r,onChange:r=>g(d)},null,40,_o),[[m,s.pos[0]]]),p(n("input",{type:"number",class:"form-control",placeholder:"y坐标","onUpdate:modelValue":r=>s.pos[1]=r,onChange:r=>g(d)},null,40,xo),[[m,s.pos[1]]]),p(n("input",{type:"number",class:"form-control",placeholder:"z坐标","onUpdate:modelValue":r=>s.pos[2]=r,onChange:r=>g(d)},null,40,Co),[[m,s.pos[2]]])])]),s.type==="Drawbox"?(R(),N(ne,{key:0},[n("div",Po,[Mo,n("div",So,[p(n("input",{type:"number",min:"1",class:"form-control",placeholder:"x长度","onUpdate:modelValue":r=>s.size[0]=r,onChange:r=>g(d)},null,40,Eo),[[m,s.size[0]]]),p(n("input",{type:"number",min:"1",class:"form-control",placeholder:"y长度","onUpdate:modelValue":r=>s.size[1]=r,onChange:r=>g(d)},null,40,jo),[[m,s.size[1]]]),p(n("input",{type:"number",min:"1",class:"form-control",placeholder:"z长度","onUpdate:modelValue":r=>s.size[2]=r,onChange:r=>g(d)},null,40,zo),[[m,s.size[2]]])])]),n("div",ko,[Io,n("div",Vo,[Oo,p(n("input",{type:"number",class:"form-control",placeholder:"最小值","onUpdate:modelValue":r=>s.range[0][0]=r,onChange:r=>g(d)},null,40,Uo),[[m,s.range[0][0]]]),p(n("input",{type:"number",class:"form-control",placeholder:"最大值","onUpdate:modelValue":r=>s.range[0][1]=r,onChange:r=>g(d)},null,40,Do),[[m,s.range[0][1]]])]),n("div",To,[Ao,p(n("input",{type:"number",class:"form-control",placeholder:"最小值","onUpdate:modelValue":r=>s.range[1][0]=r,onChange:r=>g(d)},null,40,Qo),[[m,s.range[1][0]]]),p(n("input",{type:"number",class:"form-control",placeholder:"最大值","onUpdate:modelValue":r=>s.range[1][1]=r,onChange:r=>g(d)},null,40,Xo),[[m,s.range[1][1]]])]),n("div",Yo,[Lo,p(n("input",{type:"number",class:"form-control",placeholder:"最小值","onUpdate:modelValue":r=>s.range[2][0]=r,onChange:r=>g(d)},null,40,Ho),[[m,s.range[2][0]]]),p(n("input",{type:"number",class:"form-control",placeholder:"最大值","onUpdate:modelValue":r=>s.range[2][1]=r,onChange:r=>g(d)},null,40,Zo),[[m,s.range[2][1]]])])])],64)):Ve("",!0),s.type==="Rotator"?(R(),N(ne,{key:1},[n("div",Ro,[$o,n("div",qo,[p(n("input",{type:"number",min:"1",class:"form-control",placeholder:"长度1","onUpdate:modelValue":r=>s.size[0]=r,onChange:r=>g(d)},null,40,Fo),[[m,s.size[0]]]),p(n("input",{type:"number",min:"1",class:"form-control",placeholder:"长度2","onUpdate:modelValue":r=>s.size[1]=r,onChange:r=>g(d)},null,40,Wo),[[m,s.size[1]]])])]),n("div",Go,[Bo,n("div",No,[p(n("select",{class:"form-control","onUpdate:modelValue":r=>s.face[0]=r,onChange:r=>g(d)},en,40,Jo),[[Oe,s.face[0]]]),p(n("select",{class:"form-control","onUpdate:modelValue":r=>s.face[1]=r,onChange:r=>g(d)},nn,40,tn),[[Oe,s.face[1]]])])]),n("div",sn,[an,p(n("select",{class:"form-control","onUpdate:modelValue":r=>s.direction=r,onChange:r=>g(d)},hn,40,rn),[[Oe,s.direction]])]),n("div",pn,[un,p(n("input",{type:"number",min:"0",max:"3",class:"form-control",placeholder:"最小值","onUpdate:modelValue":r=>s.angle=r,onChange:r=>g(d)},null,40,mn),[[m,s.angle]])])],64)):Ve("",!0),n("div",fn,[bn,n("div",gn,[p(n("input",{type:"text",class:"form-control",placeholder:"#hex颜色值","onUpdate:modelValue":r=>s.color=r,onChange:r=>g(d)},null,40,vn),[[m,s.color]])])]),n("div",wn,[n("button",{class:"btn btn-sm btn-outline-danger",onClick:r=>I(d)},"删除物体",8,yn)])])],8,bo)]))),128))]),_n,xn,n("div",Cn,[n("button",{class:"btn btn-sm btn-outline-primary",onClick:l[5]||(l[5]=s=>le("Cube"))},"立方体"),n("button",{class:"btn btn-sm btn-outline-warning",onClick:l[6]||(l[6]=s=>le("Drawbox"))},"移动条"),n("button",{class:"btn btn-sm btn-outline-danger",onClick:l[7]||(l[7]=s=>le("Rotator"))},"旋转体")])]),n("li",Pn,[Mn,Sn,n("div",En,[p(n("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":l[8]||(l[8]=s=>X.value=s),onChange:O,id:"mirrorEnabled"},null,544),[[Qe,X.value]]),jn]),X.value&&e.value.mirror?(R(),N(ne,{key:0},[n("div",zn,[kn,n("div",In,[p(n("input",{type:"number",class:"form-control",placeholder:"x坐标","onUpdate:modelValue":l[9]||(l[9]=s=>e.value.mirror.pos[0]=s),onChange:S},null,544),[[m,e.value.mirror.pos[0]]]),p(n("input",{type:"number",class:"form-control",placeholder:"y坐标","onUpdate:modelValue":l[10]||(l[10]=s=>e.value.mirror.pos[1]=s),onChange:S},null,544),[[m,e.value.mirror.pos[1]]]),p(n("input",{type:"number",class:"form-control",placeholder:"z坐标","onUpdate:modelValue":l[11]||(l[11]=s=>e.value.mirror.pos[2]=s),onChange:S},null,544),[[m,e.value.mirror.pos[2]]])])]),n("div",Vn,[On,n("div",Un,[p(n("input",{type:"number",min:"0",class:"form-control",placeholder:"x长度","onUpdate:modelValue":l[12]||(l[12]=s=>e.value.mirror.size[0]=s),onChange:S},null,544),[[m,e.value.mirror.size[0]]]),p(n("input",{type:"number",min:"1",class:"form-control",placeholder:"y长度","onUpdate:modelValue":l[13]||(l[13]=s=>e.value.mirror.size[1]=s),onChange:S},null,544),[[m,e.value.mirror.size[1]]]),p(n("input",{type:"number",min:"0",class:"form-control",placeholder:"z长度","onUpdate:modelValue":l[14]||(l[14]=s=>e.value.mirror.size[2]=s),onChange:S},null,544),[[m,e.value.mirror.size[2]]])])]),n("div",Dn,[Tn,n("div",An,[Qn,p(n("input",{type:"number",class:"form-control",placeholder:"最小值","onUpdate:modelValue":l[15]||(l[15]=s=>e.value.mirror.range[0][0]=s),onChange:S},null,544),[[m,e.value.mirror.range[0][0]]]),p(n("input",{type:"number",class:"form-control",placeholder:"最大值","onUpdate:modelValue":l[16]||(l[16]=s=>e.value.mirror.range[0][1]=s),onChange:S},null,544),[[m,e.value.mirror.range[0][1]]])]),n("div",Xn,[Yn,p(n("input",{type:"number",class:"form-control",placeholder:"最小值","onUpdate:modelValue":l[17]||(l[17]=s=>e.value.mirror.range[1][0]=s),onChange:S},null,544),[[m,e.value.mirror.range[1][0]]]),p(n("input",{type:"number",class:"form-control",placeholder:"最大值","onUpdate:modelValue":l[18]||(l[18]=s=>e.value.mirror.range[1][1]=s),onChange:S},null,544),[[m,e.value.mirror.range[1][1]]])]),n("div",Ln,[Hn,p(n("input",{type:"number",class:"form-control",placeholder:"最小值","onUpdate:modelValue":l[19]||(l[19]=s=>e.value.mirror.range[2][0]=s),onChange:S},null,544),[[m,e.value.mirror.range[2][0]]]),p(n("input",{type:"number",class:"form-control",placeholder:"最大值","onUpdate:modelValue":l[20]||(l[20]=s=>e.value.mirror.range[2][1]=s),onChange:S},null,544),[[m,e.value.mirror.range[2][1]]])])])],64)):Ve("",!0)])])],512),Zn]),ye(kt,{title:`${W.value}代码`,backClick:!1,backgroundColor:"#f0f1f3",mode:"round",show:L.value,"onUpdate:show":l[24]||(l[24]=s=>L.value=s)},{content:ce(()=>[n("div",Rn,[$n,p(n("textarea",{class:"pg-textarea",style:{width:"100%",height:"100%","min-height":"200px"},"onUpdate:modelValue":l[21]||(l[21]=s=>E.value=s)},null,512),[[m,E.value]]),qn,n("span",Fn,Ye(G.value),1)])]),append:ce(()=>[W.value==="导入"?(R(),N(ne,{key:0},[ye(Ue,{color:"#db2828",style:{width:"100px"},mode:"round",size:"tiny",onClick:l[22]||(l[22]=s=>L.value=!1)},{default:ce(()=>[_e("取消")]),_:1}),ye(Ue,{style:{width:"100px"},mode:"round",size:"tiny",onClick:et},{default:ce(()=>[_e("导入")]),_:1})],64)):(R(),rt(Ue,{key:1,style:{width:"100px"},mode:"round",size:"tiny",onClick:l[23]||(l[23]=s=>L.value=!1)},{default:ce(()=>[_e("关闭")]),_:1}))]),_:1},8,["title","show"])],64))}}),os=It(Wn,[["__scopeId","data-v-3fa814fb"]]);export{os as default};
