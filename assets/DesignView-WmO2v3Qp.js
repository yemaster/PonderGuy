var Ne=Object.defineProperty;var Je=(b,o,e)=>o in b?Ne(b,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):b[o]=e;var L=(b,o,e)=>(Je(b,typeof o!="symbol"?o+"":o,e),e);import{d as Ke,r as N,o as et,c as W,b as t,l as tt,m as ot,i as nt,w as p,q as De,v as m,F as le,h as Te,s as ve,t as Ie,j as Ae,e as G,R as st,x as ke,p as it,f as at,g as Ge}from"./index-TZOZeuRi.js";import{D as Qe,u as M,R as rt,a as lt,C as ct,M as dt,P as ht,O as pt,f as B}from"./picker-MAO-0axd.js";import"./bootstrap.min-BTQ0lj5t.js";import{R as ut,V as _,O as Ue,Q as R,g as Be,h as Me,L as mt,i as U,B as z,j as Xe,F as Ye,M as c,k as ye,l as J,m as bt,T as de,a as ft,n as gt,E as _t,S as vt,C as Le,o as yt,A as wt,D as xt,p as Ct,d as Pt,W as Mt,q as St}from"./index-BSPv5FcJ.js";import{_ as Et}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./_commonjsHelpers-C4iS2aBk.js";const oe=new ut,I=new _,K=new _,C=new R,He={X:new _(1,0,0),Y:new _(0,1,0),Z:new _(0,0,1)},Ve={type:"change"},Ze={type:"mouseDown"},Re={type:"mouseUp",mode:null},qe={type:"objectChange"};class jt extends Ue{constructor(o,e){super(),e===void 0&&(console.warn('THREE.TransformControls: The second parameter "domElement" is now mandatory.'),e=document),this.isTransformControls=!0,this.visible=!1,this.domElement=e,this.domElement.style.touchAction="none";const i=new Ut;this._gizmo=i,this.add(i);const a=new Dt;this._plane=a,this.add(a);const h=this;function n(y,Q){let H=Q;Object.defineProperty(h,y,{get:function(){return H!==void 0?H:Q},set:function(q){H!==q&&(H=q,a[y]=q,i[y]=q,h.dispatchEvent({type:y+"-changed",value:q}),h.dispatchEvent(Ve))}}),h[y]=Q,a[y]=Q,i[y]=Q}n("camera",o),n("object",void 0),n("enabled",!0),n("axis",null),n("mode","translate"),n("translationSnap",null),n("rotationSnap",null),n("scaleSnap",null),n("space","world"),n("size",1),n("dragging",!1),n("showX",!0),n("showY",!0),n("showZ",!0);const x=new _,V=new _,A=new R,j=new R,P=new _,ee=new R,ce=new _,D=new _,f=new _,Y=0,T=new _;n("worldPosition",x),n("worldPositionStart",V),n("worldQuaternion",A),n("worldQuaternionStart",j),n("cameraPosition",P),n("cameraQuaternion",ee),n("pointStart",ce),n("pointEnd",D),n("rotationAxis",f),n("rotationAngle",Y),n("eye",T),this._offset=new _,this._startNorm=new _,this._endNorm=new _,this._cameraScale=new _,this._parentPosition=new _,this._parentQuaternion=new R,this._parentQuaternionInv=new R,this._parentScale=new _,this._worldScaleStart=new _,this._worldQuaternionInv=new R,this._worldScale=new _,this._positionStart=new _,this._quaternionStart=new R,this._scaleStart=new _,this._getPointer=zt.bind(this),this._onPointerDown=kt.bind(this),this._onPointerHover=It.bind(this),this._onPointerMove=Vt.bind(this),this._onPointerUp=Ot.bind(this),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointermove",this._onPointerHover),this.domElement.addEventListener("pointerup",this._onPointerUp)}updateMatrixWorld(){this.object!==void 0&&(this.object.updateMatrixWorld(),this.object.parent===null?console.error("TransformControls: The attached 3D object must be a part of the scene graph."):this.object.parent.matrixWorld.decompose(this._parentPosition,this._parentQuaternion,this._parentScale),this.object.matrixWorld.decompose(this.worldPosition,this.worldQuaternion,this._worldScale),this._parentQuaternionInv.copy(this._parentQuaternion).invert(),this._worldQuaternionInv.copy(this.worldQuaternion).invert()),this.camera.updateMatrixWorld(),this.camera.matrixWorld.decompose(this.cameraPosition,this.cameraQuaternion,this._cameraScale),this.camera.isOrthographicCamera?this.camera.getWorldDirection(this.eye).negate():this.eye.copy(this.cameraPosition).sub(this.worldPosition).normalize(),super.updateMatrixWorld(this)}pointerHover(o){if(this.object===void 0||this.dragging===!0)return;oe.setFromCamera(o,this.camera);const e=Oe(this._gizmo.picker[this.mode],oe);e?this.axis=e.object.name:this.axis=null}pointerDown(o){if(!(this.object===void 0||this.dragging===!0||o.button!==0)&&this.axis!==null){oe.setFromCamera(o,this.camera);const e=Oe(this._plane,oe,!0);e&&(this.object.updateMatrixWorld(),this.object.parent.updateMatrixWorld(),this._positionStart.copy(this.object.position),this._quaternionStart.copy(this.object.quaternion),this._scaleStart.copy(this.object.scale),this.object.matrixWorld.decompose(this.worldPositionStart,this.worldQuaternionStart,this._worldScaleStart),this.pointStart.copy(e.point).sub(this.worldPositionStart)),this.dragging=!0,Ze.mode=this.mode,this.dispatchEvent(Ze)}}pointerMove(o){const e=this.axis,i=this.mode,a=this.object;let h=this.space;if(i==="scale"?h="local":(e==="E"||e==="XYZE"||e==="XYZ")&&(h="world"),a===void 0||e===null||this.dragging===!1||o.button!==-1)return;oe.setFromCamera(o,this.camera);const n=Oe(this._plane,oe,!0);if(n){if(this.pointEnd.copy(n.point).sub(this.worldPositionStart),i==="translate")this._offset.copy(this.pointEnd).sub(this.pointStart),h==="local"&&e!=="XYZ"&&this._offset.applyQuaternion(this._worldQuaternionInv),e.indexOf("X")===-1&&(this._offset.x=0),e.indexOf("Y")===-1&&(this._offset.y=0),e.indexOf("Z")===-1&&(this._offset.z=0),h==="local"&&e!=="XYZ"?this._offset.applyQuaternion(this._quaternionStart).divide(this._parentScale):this._offset.applyQuaternion(this._parentQuaternionInv).divide(this._parentScale),a.position.copy(this._offset).add(this._positionStart),this.translationSnap&&(h==="local"&&(a.position.applyQuaternion(C.copy(this._quaternionStart).invert()),e.search("X")!==-1&&(a.position.x=Math.round(a.position.x/this.translationSnap)*this.translationSnap),e.search("Y")!==-1&&(a.position.y=Math.round(a.position.y/this.translationSnap)*this.translationSnap),e.search("Z")!==-1&&(a.position.z=Math.round(a.position.z/this.translationSnap)*this.translationSnap),a.position.applyQuaternion(this._quaternionStart)),h==="world"&&(a.parent&&a.position.add(I.setFromMatrixPosition(a.parent.matrixWorld)),e.search("X")!==-1&&(a.position.x=Math.round(a.position.x/this.translationSnap)*this.translationSnap),e.search("Y")!==-1&&(a.position.y=Math.round(a.position.y/this.translationSnap)*this.translationSnap),e.search("Z")!==-1&&(a.position.z=Math.round(a.position.z/this.translationSnap)*this.translationSnap),a.parent&&a.position.sub(I.setFromMatrixPosition(a.parent.matrixWorld))));else if(i==="scale"){if(e.search("XYZ")!==-1){let x=this.pointEnd.length()/this.pointStart.length();this.pointEnd.dot(this.pointStart)<0&&(x*=-1),K.set(x,x,x)}else I.copy(this.pointStart),K.copy(this.pointEnd),I.applyQuaternion(this._worldQuaternionInv),K.applyQuaternion(this._worldQuaternionInv),K.divide(I),e.search("X")===-1&&(K.x=1),e.search("Y")===-1&&(K.y=1),e.search("Z")===-1&&(K.z=1);a.scale.copy(this._scaleStart).multiply(K),this.scaleSnap&&(e.search("X")!==-1&&(a.scale.x=Math.round(a.scale.x/this.scaleSnap)*this.scaleSnap||this.scaleSnap),e.search("Y")!==-1&&(a.scale.y=Math.round(a.scale.y/this.scaleSnap)*this.scaleSnap||this.scaleSnap),e.search("Z")!==-1&&(a.scale.z=Math.round(a.scale.z/this.scaleSnap)*this.scaleSnap||this.scaleSnap))}else if(i==="rotate"){this._offset.copy(this.pointEnd).sub(this.pointStart);const x=20/this.worldPosition.distanceTo(I.setFromMatrixPosition(this.camera.matrixWorld));let V=!1;e==="XYZE"?(this.rotationAxis.copy(this._offset).cross(this.eye).normalize(),this.rotationAngle=this._offset.dot(I.copy(this.rotationAxis).cross(this.eye))*x):(e==="X"||e==="Y"||e==="Z")&&(this.rotationAxis.copy(He[e]),I.copy(He[e]),h==="local"&&I.applyQuaternion(this.worldQuaternion),I.cross(this.eye),I.length()===0?V=!0:this.rotationAngle=this._offset.dot(I.normalize())*x),(e==="E"||V)&&(this.rotationAxis.copy(this.eye),this.rotationAngle=this.pointEnd.angleTo(this.pointStart),this._startNorm.copy(this.pointStart).normalize(),this._endNorm.copy(this.pointEnd).normalize(),this.rotationAngle*=this._endNorm.cross(this._startNorm).dot(this.eye)<0?1:-1),this.rotationSnap&&(this.rotationAngle=Math.round(this.rotationAngle/this.rotationSnap)*this.rotationSnap),h==="local"&&e!=="E"&&e!=="XYZE"?(a.quaternion.copy(this._quaternionStart),a.quaternion.multiply(C.setFromAxisAngle(this.rotationAxis,this.rotationAngle)).normalize()):(this.rotationAxis.applyQuaternion(this._parentQuaternionInv),a.quaternion.copy(C.setFromAxisAngle(this.rotationAxis,this.rotationAngle)),a.quaternion.multiply(this._quaternionStart).normalize())}this.dispatchEvent(Ve),this.dispatchEvent(qe)}}pointerUp(o){o.button===0&&(this.dragging&&this.axis!==null&&(Re.mode=this.mode,this.dispatchEvent(Re)),this.dragging=!1,this.axis=null)}dispose(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerHover),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.traverse(function(o){o.geometry&&o.geometry.dispose(),o.material&&o.material.dispose()})}attach(o){return this.object=o,this.visible=!0,this}detach(){return this.object=void 0,this.visible=!1,this.axis=null,this}reset(){this.enabled&&this.dragging&&(this.object.position.copy(this._positionStart),this.object.quaternion.copy(this._quaternionStart),this.object.scale.copy(this._scaleStart),this.dispatchEvent(Ve),this.dispatchEvent(qe),this.pointStart.copy(this.pointEnd))}getRaycaster(){return oe}getMode(){return this.mode}setMode(o){this.mode=o}setTranslationSnap(o){this.translationSnap=o}setRotationSnap(o){this.rotationSnap=o}setScaleSnap(o){this.scaleSnap=o}setSize(o){this.size=o}setSpace(o){this.space=o}}function zt(b){if(this.domElement.ownerDocument.pointerLockElement)return{x:0,y:0,button:b.button};{const o=this.domElement.getBoundingClientRect();return{x:(b.clientX-o.left)/o.width*2-1,y:-(b.clientY-o.top)/o.height*2+1,button:b.button}}}function It(b){if(this.enabled)switch(b.pointerType){case"mouse":case"pen":this.pointerHover(this._getPointer(b));break}}function kt(b){this.enabled&&(document.pointerLockElement||this.domElement.setPointerCapture(b.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.pointerHover(this._getPointer(b)),this.pointerDown(this._getPointer(b)))}function Vt(b){this.enabled&&this.pointerMove(this._getPointer(b))}function Ot(b){this.enabled&&(this.domElement.releasePointerCapture(b.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.pointerUp(this._getPointer(b)))}function Oe(b,o,e){const i=o.intersectObject(b,!0);for(let a=0;a<i.length;a++)if(i[a].object.visible||e)return i[a];return!1}const we=new _t,w=new _(0,1,0),$e=new _(0,0,0),Fe=new Be,xe=new R,Pe=new R,Z=new _,We=new Be,ue=new _(1,0,0),ne=new _(0,1,0),me=new _(0,0,1),Ce=new _,he=new _,pe=new _;class Ut extends Ue{constructor(){super(),this.isTransformControlsGizmo=!0,this.type="TransformControlsGizmo";const o=new Me({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),e=new mt({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),i=o.clone();i.opacity=.15;const a=e.clone();a.opacity=.5;const h=o.clone();h.color.setHex(16711680);const n=o.clone();n.color.setHex(65280);const x=o.clone();x.color.setHex(255);const V=o.clone();V.color.setHex(16711680),V.opacity=.5;const A=o.clone();A.color.setHex(65280),A.opacity=.5;const j=o.clone();j.color.setHex(255),j.opacity=.5;const P=o.clone();P.opacity=.25;const ee=o.clone();ee.color.setHex(16776960),ee.opacity=.25,o.clone().color.setHex(16776960);const D=o.clone();D.color.setHex(7895160);const f=new U(0,.04,.1,12);f.translate(0,.05,0);const Y=new z(.08,.08,.08);Y.translate(0,.04,0);const T=new Xe;T.setAttribute("position",new Ye([0,0,0,1,0,0],3));const y=new U(.0075,.0075,.5,3);y.translate(0,.25,0);function Q(k,X){const O=new de(k,.0075,3,64,X*Math.PI*2);return O.rotateY(Math.PI/2),O.rotateX(Math.PI/2),O}function H(){const k=new Xe;return k.setAttribute("position",new Ye([0,0,0,1,1,1],3)),k}const q={X:[[new c(f,h),[.5,0,0],[0,0,-Math.PI/2]],[new c(f,h),[-.5,0,0],[0,0,Math.PI/2]],[new c(y,h),[0,0,0],[0,0,-Math.PI/2]]],Y:[[new c(f,n),[0,.5,0]],[new c(f,n),[0,-.5,0],[Math.PI,0,0]],[new c(y,n)]],Z:[[new c(f,x),[0,0,.5],[Math.PI/2,0,0]],[new c(f,x),[0,0,-.5],[-Math.PI/2,0,0]],[new c(y,x),null,[Math.PI/2,0,0]]],XYZ:[[new c(new ye(.1,0),P.clone()),[0,0,0]]],XY:[[new c(new z(.15,.15,.01),j.clone()),[.15,.15,0]]],YZ:[[new c(new z(.15,.15,.01),V.clone()),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new c(new z(.15,.15,.01),A.clone()),[.15,0,.15],[-Math.PI/2,0,0]]]},Se={X:[[new c(new U(.2,0,.6,4),i),[.3,0,0],[0,0,-Math.PI/2]],[new c(new U(.2,0,.6,4),i),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new c(new U(.2,0,.6,4),i),[0,.3,0]],[new c(new U(.2,0,.6,4),i),[0,-.3,0],[0,0,Math.PI]]],Z:[[new c(new U(.2,0,.6,4),i),[0,0,.3],[Math.PI/2,0,0]],[new c(new U(.2,0,.6,4),i),[0,0,-.3],[-Math.PI/2,0,0]]],XYZ:[[new c(new ye(.2,0),i)]],XY:[[new c(new z(.2,.2,.01),i),[.15,.15,0]]],YZ:[[new c(new z(.2,.2,.01),i),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new c(new z(.2,.2,.01),i),[.15,0,.15],[-Math.PI/2,0,0]]]},se={START:[[new c(new ye(.01,2),a),null,null,null,"helper"]],END:[[new c(new ye(.01,2),a),null,null,null,"helper"]],DELTA:[[new J(H(),a),null,null,null,"helper"]],X:[[new J(T,a.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new J(T,a.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new J(T,a.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},be={XYZE:[[new c(Q(.5,1),D),null,[0,Math.PI/2,0]]],X:[[new c(Q(.5,.5),h)]],Y:[[new c(Q(.5,.5),n),null,[0,0,-Math.PI/2]]],Z:[[new c(Q(.5,.5),x),null,[0,Math.PI/2,0]]],E:[[new c(Q(.75,1),ee),null,[0,Math.PI/2,0]]]},fe={AXIS:[[new J(T,a.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},ie={XYZE:[[new c(new bt(.25,10,8),i)]],X:[[new c(new de(.5,.1,4,24),i),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new c(new de(.5,.1,4,24),i),[0,0,0],[Math.PI/2,0,0]]],Z:[[new c(new de(.5,.1,4,24),i),[0,0,0],[0,0,-Math.PI/2]]],E:[[new c(new de(.75,.1,2,24),i)]]},Ee={X:[[new c(Y,h),[.5,0,0],[0,0,-Math.PI/2]],[new c(y,h),[0,0,0],[0,0,-Math.PI/2]],[new c(Y,h),[-.5,0,0],[0,0,Math.PI/2]]],Y:[[new c(Y,n),[0,.5,0]],[new c(y,n)],[new c(Y,n),[0,-.5,0],[0,0,Math.PI]]],Z:[[new c(Y,x),[0,0,.5],[Math.PI/2,0,0]],[new c(y,x),[0,0,0],[Math.PI/2,0,0]],[new c(Y,x),[0,0,-.5],[-Math.PI/2,0,0]]],XY:[[new c(new z(.15,.15,.01),j),[.15,.15,0]]],YZ:[[new c(new z(.15,.15,.01),V),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new c(new z(.15,.15,.01),A),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new c(new z(.1,.1,.1),P.clone())]]},te={X:[[new c(new U(.2,0,.6,4),i),[.3,0,0],[0,0,-Math.PI/2]],[new c(new U(.2,0,.6,4),i),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new c(new U(.2,0,.6,4),i),[0,.3,0]],[new c(new U(.2,0,.6,4),i),[0,-.3,0],[0,0,Math.PI]]],Z:[[new c(new U(.2,0,.6,4),i),[0,0,.3],[Math.PI/2,0,0]],[new c(new U(.2,0,.6,4),i),[0,0,-.3],[-Math.PI/2,0,0]]],XY:[[new c(new z(.2,.2,.01),i),[.15,.15,0]]],YZ:[[new c(new z(.2,.2,.01),i),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new c(new z(.2,.2,.01),i),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new c(new z(.2,.2,.2),i),[0,0,0]]]},ae={X:[[new J(T,a.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new J(T,a.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new J(T,a.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]};function g(k){const X=new Ue;for(const O in k)for(let S=k[O].length;S--;){const E=k[O][S][0].clone(),$=k[O][S][1],F=k[O][S][2],re=k[O][S][3],je=k[O][S][4];E.name=O,E.tag=je,$&&E.position.set($[0],$[1],$[2]),F&&E.rotation.set(F[0],F[1],F[2]),re&&E.scale.set(re[0],re[1],re[2]),E.updateMatrix();const ge=E.geometry.clone();ge.applyMatrix4(E.matrix),E.geometry=ge,E.renderOrder=1/0,E.position.set(0,0,0),E.rotation.set(0,0,0),E.scale.set(1,1,1),X.add(E)}return X}this.gizmo={},this.picker={},this.helper={},this.add(this.gizmo.translate=g(q)),this.add(this.gizmo.rotate=g(be)),this.add(this.gizmo.scale=g(Ee)),this.add(this.picker.translate=g(Se)),this.add(this.picker.rotate=g(ie)),this.add(this.picker.scale=g(te)),this.add(this.helper.translate=g(se)),this.add(this.helper.rotate=g(fe)),this.add(this.helper.scale=g(ae)),this.picker.translate.visible=!1,this.picker.rotate.visible=!1,this.picker.scale.visible=!1}updateMatrixWorld(o){const i=(this.mode==="scale"?"local":this.space)==="local"?this.worldQuaternion:Pe;this.gizmo.translate.visible=this.mode==="translate",this.gizmo.rotate.visible=this.mode==="rotate",this.gizmo.scale.visible=this.mode==="scale",this.helper.translate.visible=this.mode==="translate",this.helper.rotate.visible=this.mode==="rotate",this.helper.scale.visible=this.mode==="scale";let a=[];a=a.concat(this.picker[this.mode].children),a=a.concat(this.gizmo[this.mode].children),a=a.concat(this.helper[this.mode].children);for(let h=0;h<a.length;h++){const n=a[h];n.visible=!0,n.rotation.set(0,0,0),n.position.copy(this.worldPosition);let x;if(this.camera.isOrthographicCamera?x=(this.camera.top-this.camera.bottom)/this.camera.zoom:x=this.worldPosition.distanceTo(this.cameraPosition)*Math.min(1.9*Math.tan(Math.PI*this.camera.fov/360)/this.camera.zoom,7),n.scale.set(1,1,1).multiplyScalar(x*this.size/4),n.tag==="helper"){n.visible=!1,n.name==="AXIS"?(n.visible=!!this.axis,this.axis==="X"&&(C.setFromEuler(we.set(0,0,0)),n.quaternion.copy(i).multiply(C),Math.abs(w.copy(ue).applyQuaternion(i).dot(this.eye))>.9&&(n.visible=!1)),this.axis==="Y"&&(C.setFromEuler(we.set(0,0,Math.PI/2)),n.quaternion.copy(i).multiply(C),Math.abs(w.copy(ne).applyQuaternion(i).dot(this.eye))>.9&&(n.visible=!1)),this.axis==="Z"&&(C.setFromEuler(we.set(0,Math.PI/2,0)),n.quaternion.copy(i).multiply(C),Math.abs(w.copy(me).applyQuaternion(i).dot(this.eye))>.9&&(n.visible=!1)),this.axis==="XYZE"&&(C.setFromEuler(we.set(0,Math.PI/2,0)),w.copy(this.rotationAxis),n.quaternion.setFromRotationMatrix(Fe.lookAt($e,w,ne)),n.quaternion.multiply(C),n.visible=this.dragging),this.axis==="E"&&(n.visible=!1)):n.name==="START"?(n.position.copy(this.worldPositionStart),n.visible=this.dragging):n.name==="END"?(n.position.copy(this.worldPosition),n.visible=this.dragging):n.name==="DELTA"?(n.position.copy(this.worldPositionStart),n.quaternion.copy(this.worldQuaternionStart),I.set(1e-10,1e-10,1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1),I.applyQuaternion(this.worldQuaternionStart.clone().invert()),n.scale.copy(I),n.visible=this.dragging):(n.quaternion.copy(i),this.dragging?n.position.copy(this.worldPositionStart):n.position.copy(this.worldPosition),this.axis&&(n.visible=this.axis.search(n.name)!==-1));continue}n.quaternion.copy(i),this.mode==="translate"||this.mode==="scale"?(n.name==="X"&&Math.abs(w.copy(ue).applyQuaternion(i).dot(this.eye))>.99&&(n.scale.set(1e-10,1e-10,1e-10),n.visible=!1),n.name==="Y"&&Math.abs(w.copy(ne).applyQuaternion(i).dot(this.eye))>.99&&(n.scale.set(1e-10,1e-10,1e-10),n.visible=!1),n.name==="Z"&&Math.abs(w.copy(me).applyQuaternion(i).dot(this.eye))>.99&&(n.scale.set(1e-10,1e-10,1e-10),n.visible=!1),n.name==="XY"&&Math.abs(w.copy(me).applyQuaternion(i).dot(this.eye))<.2&&(n.scale.set(1e-10,1e-10,1e-10),n.visible=!1),n.name==="YZ"&&Math.abs(w.copy(ue).applyQuaternion(i).dot(this.eye))<.2&&(n.scale.set(1e-10,1e-10,1e-10),n.visible=!1),n.name==="XZ"&&Math.abs(w.copy(ne).applyQuaternion(i).dot(this.eye))<.2&&(n.scale.set(1e-10,1e-10,1e-10),n.visible=!1)):this.mode==="rotate"&&(xe.copy(i),w.copy(this.eye).applyQuaternion(C.copy(i).invert()),n.name.search("E")!==-1&&n.quaternion.setFromRotationMatrix(Fe.lookAt(this.eye,$e,ne)),n.name==="X"&&(C.setFromAxisAngle(ue,Math.atan2(-w.y,w.z)),C.multiplyQuaternions(xe,C),n.quaternion.copy(C)),n.name==="Y"&&(C.setFromAxisAngle(ne,Math.atan2(w.x,w.z)),C.multiplyQuaternions(xe,C),n.quaternion.copy(C)),n.name==="Z"&&(C.setFromAxisAngle(me,Math.atan2(w.y,w.x)),C.multiplyQuaternions(xe,C),n.quaternion.copy(C))),n.visible=n.visible&&(n.name.indexOf("X")===-1||this.showX),n.visible=n.visible&&(n.name.indexOf("Y")===-1||this.showY),n.visible=n.visible&&(n.name.indexOf("Z")===-1||this.showZ),n.visible=n.visible&&(n.name.indexOf("E")===-1||this.showX&&this.showY&&this.showZ),n.material._color=n.material._color||n.material.color.clone(),n.material._opacity=n.material._opacity||n.material.opacity,n.material.color.copy(n.material._color),n.material.opacity=n.material._opacity,this.enabled&&this.axis&&(n.name===this.axis||this.axis.split("").some(function(V){return n.name===V}))&&(n.material.color.setHex(16776960),n.material.opacity=1)}super.updateMatrixWorld(o)}}class Dt extends c{constructor(){super(new ft(1e5,1e5,2,2),new Me({visible:!1,wireframe:!0,side:gt,transparent:!0,opacity:.1,toneMapped:!1})),this.isTransformControlsPlane=!0,this.type="TransformControlsPlane"}updateMatrixWorld(o){let e=this.space;switch(this.position.copy(this.worldPosition),this.mode==="scale"&&(e="local"),Ce.copy(ue).applyQuaternion(e==="local"?this.worldQuaternion:Pe),he.copy(ne).applyQuaternion(e==="local"?this.worldQuaternion:Pe),pe.copy(me).applyQuaternion(e==="local"?this.worldQuaternion:Pe),w.copy(he),this.mode){case"translate":case"scale":switch(this.axis){case"X":w.copy(this.eye).cross(Ce),Z.copy(Ce).cross(w);break;case"Y":w.copy(this.eye).cross(he),Z.copy(he).cross(w);break;case"Z":w.copy(this.eye).cross(pe),Z.copy(pe).cross(w);break;case"XY":Z.copy(pe);break;case"YZ":Z.copy(Ce);break;case"XZ":w.copy(pe),Z.copy(he);break;case"XYZ":case"E":Z.set(0,0,0);break}break;case"rotate":default:Z.set(0,0,0)}Z.length()===0?this.quaternion.copy(this.cameraQuaternion):(We.lookAt(I.set(0,0,0),Z,w),this.quaternion.setFromRotationMatrix(We)),super.updateMatrixWorld(o)}}class Tt{constructor(o,e,i,a){L(this,"scene");L(this,"camera");L(this,"renderer");L(this,"startPos");L(this,"tingyun",[]);L(this,"objects",[]);L(this,"ponder");L(this,"drawObjs",[]);L(this,"mirror");L(this,"dragControl");this.scene=o,this.camera=e,this.renderer=i,this.startPos=new _().fromArray(a),this.setupPonder(this.startPos),this.dragControl=new Qe([],this.camera,this.renderer.domElement)}setupPonder(o){const e=new z(6,12,6),i=new Me({color:4697936});this.ponder=new c(e,i),this.ponder.position.set(o.x*M+M/2,(o.y+1)*M+6,o.z*M+M/2),this.scene.add(this.ponder)}changePonderPos(o){this.ponder!==void 0&&this.ponder.position.set(o[0]*M+M/2,(o[1]+1)*M+6,o[2]*M+M/2)}addNewTingyun(o){const e=new z(6,12,6),i=new Me({color:14362664}),a=new c(e,i);a.position.set(o[0]*M+M/2,(o[1]+1)*M+6,o[2]*M+M/2),this.tingyun.push(a),this.scene.add(a)}deleteTingyun(o){this.tingyun[o]!==void 0&&(this.tingyun[o].geometry.dispose(),this.scene.remove(this.tingyun[o]),this.tingyun.splice(o,1))}changeTingyunPos(o,e){this.tingyun[o]!==void 0&&this.tingyun[o].position.set(e[0]*M+M/2,(e[1]+1)*M+6,e[2]*M+M/2)}setupDragControl(){this.dragControl=new Qe(this.drawObjs,this.camera,this.renderer.domElement),this.dragControl.addEventListener("dragstart",o=>{const e=o.object.parent;e.onControlDragStart&&e.onControlDragStart(o)}),this.dragControl.addEventListener("drag",o=>{const e=o.object.parent;e.onControlDrag&&e.onControlDrag(o)}),this.dragControl.addEventListener("dragend",o=>{const e=o.object.parent;e.onControlDragEnd&&e.onControlDragEnd(o)})}addNewObject(o,e){if(e&&this.objects[e]===void 0)return;let i;switch(o.pos=o.pos||[0,0,0],o.type){case"Cube":i=new ct(o.pos,o.color),e?this.objects[e]=i:this.objects.push(i);break;case"Drawbox":i=new lt(o.pos,o.size,o.range,o.color),e?this.objects[e]=i:this.objects.push(i),this.drawObjs.push(i);break;case"Rotator":i=new rt(o.pos,o.size,o.color,o.angle,o.direction,o.face),e?this.objects[e]=i:this.objects.push(i);break}this.scene.add(i),this.dragControl.dispose(),this.setupDragControl(),this.mirror&&(e?this.mirror.realObjs[e]=i:this.mirror.realObjs.push(i),this.mirror.updateMirrorCubePos())}deleteObject(o){if(this.objects[o]===void 0)return;this.mirror&&(this.mirror.realObjs.splice(o,1),this.mirror.updateMirrorCubePos());const e=this.objects[o];this.mirror&&e.mirrorComponent&&(this.mirror.inMirrorObjs.splice(this.mirror.inMirrorObjs.indexOf(e.mirrorComponent),1),e.mirrorComponent.children.forEach(i=>{var a;(a=i.geometry)==null||a.dispose()}),this.scene.remove(e.mirrorComponent)),this.drawObjs.splice(this.drawObjs.indexOf(e),1),e.children.forEach(i=>{var a;(a=i.geometry)==null||a.dispose()}),this.scene.remove(e),this.objects.splice(o,1),this.dragControl.dispose(),this.setupDragControl()}changeObjectInfo(o,e){if(this.objects[o]===void 0)return;const i=this.objects[o];i.objectType!==e.type?(this.drawObjs.splice(this.drawObjs.indexOf(i),1),i.children.forEach(a=>{var h;(h=a.geometry)==null||h.dispose()}),this.scene.remove(i),this.objects[o]=void 0,this.addNewObject(e,o)):(e.pos&&i.setPos&&i.setPos(e.pos),(e.angle||e.angle===0)&&i.setAngle&&i.setAngle(e.angle),e.size&&i.setSize&&i.setSize(e.size),e.color&&i.setColor&&i.setColor(e.color),(e.direction||e.direction===0)&&i.setDirection&&i.setDirection(e.direction),(e.face||e.face===0)&&i.setFace&&i.setFace(e.face)),this.mirror&&this.mirror.updateMirrorCubePos()}setupMirror(o){this.mirror&&this.mirror.dispose(),this.mirror=new dt(o.pos,o.size,o.range),this.mirror.setupMirrorCubes(Array.from(this.objects),this.scene),this.scene.add(this.mirror),this.drawObjs.push(this.mirror),this.dragControl.dispose(),this.setupDragControl()}changeMirrorInfo(o){this.mirror&&(o.pos&&this.mirror.setPos(o.pos),o.size&&this.mirror.setSize(o.size),o.range&&this.mirror.setRange(o.range),this.mirror.updateMirrorCubePos())}disposeMirror(){this.mirror&&(this.drawObjs.splice(this.drawObjs.indexOf(this.mirror),1),this.mirror.dispose(),this.scene.remove(this.mirror)),this.mirror=void 0,this.dragControl.dispose(),this.setupDragControl()}}const u=b=>(it("data-v-29cdd2d6"),b=b(),at(),b),At={class:"ponder-design"},Qt={class:"control-group list-group list-group-flush"},Xt={class:"list-group-item sticky-top"},Yt=u(()=>t("h4",null,"关卡设计器",-1)),Lt={class:"btn-group"},Ht={class:"list-group-item"},Zt=u(()=>t("label",{for:"background",class:"form-label"},"基础设定",-1)),Rt=u(()=>t("br",null,null,-1)),qt={class:"form-check mb-4"},$t=u(()=>t("label",{class:"form-check-label",for:"freeControlEnabled"}," 自由控制 ",-1)),Ft={class:"form-group"},Wt=u(()=>t("label",{for:"background",class:"form-label"},"背景色",-1)),Gt={class:"list-group-item"},Bt=u(()=>t("label",{for:"background",class:"form-label"},"起点坐标",-1)),Nt={class:"input-group mb-3"},Jt={class:"list-group-item"},Kt=u(()=>t("label",{class:"form-label"},"终点坐标",-1)),eo=u(()=>t("br",null,null,-1)),to=["onUpdate:modelValue","onChange"],oo=["onUpdate:modelValue","onChange"],no=["onUpdate:modelValue","onChange"],so=["onClick"],io={class:"list-group-item"},ao=u(()=>t("label",{for:"background",class:"form-label"},"物体列表",-1)),ro=u(()=>t("br",null,null,-1)),lo={class:"accordion mb-3",id:"objectList"},co={class:"accordion-header"},ho=["id","data-bs-target","aria-controls"],po=["id"],uo={class:"accordion-body"},mo={class:"form-group mb-3"},bo=u(()=>t("label",{class:"form-label"},"物体位置",-1)),fo={class:"input-group"},go=["onUpdate:modelValue","onChange"],_o=["onUpdate:modelValue","onChange"],vo=["onUpdate:modelValue","onChange"],yo={class:"form-group mb-3"},wo=u(()=>t("label",{class:"form-label"},"物体大小",-1)),xo={class:"input-group"},Co=["onUpdate:modelValue","onChange"],Po=["onUpdate:modelValue","onChange"],Mo=["onUpdate:modelValue","onChange"],So={class:"form-group mb-3"},Eo=u(()=>t("label",{class:"form-label"},"移动范围",-1)),jo={class:"input-group"},zo=u(()=>t("span",{class:"input-group-text"},"x",-1)),Io=["onUpdate:modelValue","onChange"],ko=["onUpdate:modelValue","onChange"],Vo={class:"input-group"},Oo=u(()=>t("span",{class:"input-group-text"},"y",-1)),Uo=["onUpdate:modelValue","onChange"],Do=["onUpdate:modelValue","onChange"],To={class:"input-group"},Ao=u(()=>t("span",{class:"input-group-text"},"z",-1)),Qo=["onUpdate:modelValue","onChange"],Xo=["onUpdate:modelValue","onChange"],Yo={class:"form-group mb-3"},Lo=u(()=>t("label",{class:"form-label"},"物体大小",-1)),Ho={class:"input-group"},Zo=["onUpdate:modelValue","onChange"],Ro=["onUpdate:modelValue","onChange"],qo={class:"form-group mb-3"},$o=u(()=>t("label",{class:"form-label"},"摆放方向",-1)),Fo={class:"input-group"},Wo=["onUpdate:modelValue","onChange"],Go=Ge('<option value="+x" data-v-29cdd2d6>+x</option><option value="+y" data-v-29cdd2d6>+y</option><option value="+z" data-v-29cdd2d6>+z</option><option value="-x" data-v-29cdd2d6>-x</option><option value="-y" data-v-29cdd2d6>-y</option><option value="-z" data-v-29cdd2d6>-z</option>',6),Bo=[Go],No=["onUpdate:modelValue","onChange"],Jo=Ge('<option value="+x" data-v-29cdd2d6>+x</option><option value="+y" data-v-29cdd2d6>+y</option><option value="+z" data-v-29cdd2d6>+z</option><option value="-x" data-v-29cdd2d6>-x</option><option value="-y" data-v-29cdd2d6>-y</option><option value="-z" data-v-29cdd2d6>-z</option>',6),Ko=[Jo],en={class:"form-group mb-3"},tn=u(()=>t("label",{class:"form-label"},"旋转面",-1)),on=["onUpdate:modelValue","onChange"],nn=u(()=>t("option",{value:0},"yOz平面",-1)),sn=u(()=>t("option",{value:1},"xOz平面",-1)),an=u(()=>t("option",{value:2},"xOy平面",-1)),rn=[nn,sn,an],ln={class:"form-group mb-3"},cn=u(()=>t("label",{class:"form-label"},"初始方向",-1)),dn=["onUpdate:modelValue","onChange"],hn={class:"form-group mb-3"},pn=u(()=>t("label",{class:"form-label"},"物体颜色",-1)),un={class:"input-group"},mn=["onUpdate:modelValue","onChange"],bn={class:"form-group mb-3"},fn=["onClick"],gn=u(()=>t("label",{for:"background",class:"form-label"},"新建物体",-1)),_n=u(()=>t("br",null,null,-1)),vn={class:"btn-group",role:"group","aria-label":"Basic example"},yn={class:"list-group-item"},wn=u(()=>t("label",{for:"background",class:"form-label"},"镜子设定",-1)),xn=u(()=>t("br",null,null,-1)),Cn={class:"form-check"},Pn=u(()=>t("label",{class:"form-check-label",for:"mirrorEnabled"}," 开启镜子 ",-1)),Mn={class:"form-group mb-3"},Sn=u(()=>t("label",{class:"form-label"},"镜子位置",-1)),En={class:"input-group"},jn={class:"form-group mb-3"},zn=u(()=>t("label",{class:"form-label"},"镜子大小",-1)),In={class:"input-group"},kn={class:"form-group mb-3"},Vn=u(()=>t("label",{class:"form-label"},"移动范围",-1)),On={class:"input-group"},Un=u(()=>t("span",{class:"input-group-text"},"x",-1)),Dn={class:"input-group"},Tn=u(()=>t("span",{class:"input-group-text"},"y",-1)),An={class:"input-group"},Qn=u(()=>t("span",{class:"input-group-text"},"z",-1)),Xn=u(()=>t("div",{class:"right-scene"},[t("canvas",{id:"pg-canvas"})],-1)),Yn={class:"modal fade",id:"exportModal",tabindex:"-1","aria-labelledby":"exportModalLabel","aria-hidden":"true"},Ln={class:"modal-dialog"},Hn={class:"modal-content"},Zn={class:"modal-header"},Rn={class:"modal-title fs-5",id:"exportModalLabel"},qn=u(()=>t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1)),$n={class:"modal-body"},Fn=u(()=>t("br",null,null,-1)),Wn=u(()=>t("br",null,null,-1)),Gn={style:{color:"#db2828"}},Bn={class:"modal-footer"},Nn=u(()=>t("button",{type:"button",id:"closeModelButton",class:"btn btn-secondary","data-bs-dismiss":"modal"},"取消",-1)),Jn=Ke({__name:"DesignView",setup(b){document.title="关卡设计器 | Ponder Guy";const o=N(),e=N({background:"#feffbd",start:[0,0,0],dests:[[0,0,5]],objects:[]}),i={x:0,y:0},a=new ht,h={width:Math.floor(window.innerWidth*.7),height:window.innerHeight};let n;const x=v=>{const l=n.getBoundingClientRect();return{x:(v.clientX-l.left)*n.width/l.width,y:(v.clientY-l.top)*n.height/l.height}},V=v=>{const l=x(v);i.x=l.x/n.width*2-1,i.y=l.y/n.height*-2+1},A=()=>{i.x=-1e5,i.y=-1e5};A(),window.addEventListener("mousemove",V),window.addEventListener("mouseout",A),window.addEventListener("mouseleave",A),window.addEventListener("touchend",A);const j=new vt;j.background=new Le(e.value.background);const P=new yt(h.width/-16,h.width/16,h.height/16,h.height/-16,-200,500);P.position.set(200,200,200),P.lookAt(j.position),P.zoom=2;const ee=new wt(16777215);j.add(ee);const ce=new xt(16777215,.8);ce.position.set(0,100,0),j.add(ce);let D,f;const Y=new Ct(100);j.add(Y);const T=()=>{const v=n.getBoundingClientRect();h.height=v.height,h.width=v.width,P.left=h.width/-2,P.right=h.width/2,P.top=h.height/2,P.bottom=h.height/-2,P.left*=.5,P.right*=.5,P.top*=.5,P.bottom*=.5,P.updateProjectionMatrix(),D.setSize(h.width,h.height),D.setPixelRatio(window.devicePixelRatio)};let y;et(()=>{n=document.getElementById("pg-canvas"),D=new Mt({canvas:n,antialias:!0,alpha:!0}),D.localClippingEnabled=!0,f=new Tt(j,P,D,e.value.start),f.addNewTingyun([0,0,5]),f.dragControl.enabled=!1;const v=new pt(P,D.domElement);v.enableRotate=!1,y=new jt(P,D.domElement),y.setSize(.3),window.addEventListener("mousedown",s=>{s.button===2&&y.detach()}),y.addEventListener("objectChange",s=>{var _e;let d=s.target.object;if(!d)return;for(;!d.parent.isScene;)d=d.parent;const r=f.objects.indexOf(d);if(r!==-1){switch(d.objectType){case"Cube":e.value.objects[r].pos=[B(d.children[0].position.x,1),B(d.children[0].position.y,1),B(d.children[0].position.z,1)],g(r);break;case"Drawbox":e.value.objects[r].pos=[B(d.children[0].position.x,d.len[0]),B(d.children[0].position.y,d.len[1]),B(d.children[0].position.z,d.len[2])],g(r);break;case"Mirror":e.value.mirror&&(e.value.mirror.pos=[B(d.children[0].position.x,d.len[0]),B(d.children[0].position.y,d.len[1]),B(d.children[0].position.z,d.len[2])],f.changeMirrorInfo(e.value.mirror));break;case"Rotator":e.value.objects[r].pos=[Math.round(d.position.x/M-1/2),Math.round(d.position.y/M),Math.round(d.position.z/M-1/2)],g(r);break}(_e=f.mirror)==null||_e.updateMirrorCubePos()}}),j.add(y),n.addEventListener("mousedown",()=>{if(a.pickedObject){let s=a.pickedObject;for(;!s.parent.isScene;)s=s.parent;const d=f.objects.indexOf(s);if(d!==-1){const r=document.querySelector(`#flush-button-${d}`);r&&(r.classList.contains("collapsed")&&r.click(),setTimeout(()=>{const _e=setInterval(()=>{const ze=r.getBoundingClientRect().top;Math.abs(ze-80)<=30||o.value.scrollTop+o.value.offsetHeight+10>o.value.scrollHeight?(o.value.scrollTop+=ze-80,clearInterval(_e)):ze>80?o.value.scrollTop+=10:o.value.scrollTop-=10},10)},300))}["Cube","Drawbox","Rotator"].includes(s.objectType)?(s.objectType==="Rotator"?y.attach(s):y.attach(s.children[0]),y.setMode("translate")):y.detach()}}),T();const l=()=>{requestAnimationFrame(l),a.pick(new St(i.x,i.y),j,P),D.render(j,P)};l()}),window.addEventListener("resize",Pt(T,100));const H=N(!0);function q(){H.value?(y.enabled=!0,f.dragControl.enabled=!1,j.add(y)):(y.enabled=!1,f.dragControl.enabled=!0,j.remove(y))}function Se(){j.background=new Le(e.value.background)}function se(){f.changePonderPos(e.value.start)}function be(){e.value.dests.push([0,0,1]),f.addNewTingyun([0,0,1])}function fe(v){e.value.dests.splice(v,1),f.deleteTingyun(v)}function ie(v){f.changeTingyunPos(v,e.value.dests[v])}const Ee=N({Cube:"立方体",Drawbox:"移动条",Rotator:"旋转体",Plane:"平面"});let te=[0,0,0];function ae(v){let l;switch(te[1]++,v){case"Cube":l={type:v,pos:Array.from(te),color:"#54c8ff"};break;case"Drawbox":l={type:v,pos:Array.from(te),size:[1,1,4],range:[[0,0],[0,0],[0,0]],color:"#ffe21f"};break;case"Rotator":l={type:v,pos:Array.from(te),size:[4,4],face:["+x","+z"],direction:1,angle:0,color:"#fb8888"}}e.value.objects.push(l),f.addNewObject(l),a.updateObjs(f.objects)}function g(v){f.changeObjectInfo(v,e.value.objects[v]),te=[...e.value.objects[v].pos]}function k(v){e.value.objects.splice(v,1),f.deleteObject(v)}const X=N(!1);function O(){f.disposeMirror(),X.value?(e.value.mirror={pos:[0,0,0],size:[5,10,0],range:[[-20,20],[0,0],[0,0]]},f.setupMirror(e.value.mirror),a.updateObjs([...f.objects,f.mirror])):(e.value.mirror=void 0,a.updateObjs(f.objects))}function S(){X.value&&e.value.mirror&&f.changeMirrorInfo(e.value.mirror)}const E=N(""),$=N("导出"),F=N("");function re(){$.value="导入",E.value="",F.value=""}function je(){$.value="导出",E.value=btoa(JSON.stringify(e.value)),F.value=""}function ge(){var v;try{const l=JSON.parse(atob(E.value));for(;e.value.dests.length>0;)fe(0);for(;e.value.objects.length>0;)k(0);X.value=!1,a.updateObjs([]),e.value.start=l.start,se();for(let s=0;s<l.dests.length;++s)be(),e.value.dests[s]=l.dests[s],ie(s);for(let s=0;s<l.objects.length;++s)ae(l.objects[s].type),e.value.objects[s]=l.objects[s],g(s);l.mirror&&(X.value=!0,O(),e.value.mirror=l.mirror,S()),(v=document.getElementById("closeModelButton"))==null||v.click()}catch(l){F.value=`导入失败!
${l}`}}return(v,l)=>(G(),W(le,null,[t("div",At,[t("div",{class:"left-control",ref_key:"leftControl",ref:o},[t("ul",Qt,[t("li",Xt,[Yt,t("div",Lt,[tt(nt(st),{class:"btn btn-sm btn-outline-secondary",to:"/game/list",style:{"--bs-btn-padding-y":".25rem","--bs-btn-padding-x":".5rem","--bs-btn-font-size":".75rem"}},{default:ot(()=>[Ae("返回")]),_:1}),t("button",{class:"btn btn-sm btn-outline-secondary","data-bs-toggle":"modal","data-bs-target":"#exportModal",onClick:re,style:{"--bs-btn-padding-y":".25rem","--bs-btn-padding-x":".5rem","--bs-btn-font-size":".75rem"}},"导入"),t("button",{class:"btn btn-sm btn-outline-secondary","data-bs-toggle":"modal","data-bs-target":"#exportModal",onClick:je,style:{"--bs-btn-padding-y":".25rem","--bs-btn-padding-x":".5rem","--bs-btn-font-size":".75rem"}},"导出")])]),t("li",Ht,[Zt,Rt,t("div",qt,[p(t("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":l[0]||(l[0]=s=>H.value=s),onChange:q,id:"freeControlEnabled"},null,544),[[De,H.value]]),$t]),t("div",Ft,[Wt,p(t("input",{class:"form-control",name:"background","onUpdate:modelValue":l[1]||(l[1]=s=>e.value.background=s),onChange:Se},null,544),[[m,e.value.background]])])]),t("li",Gt,[Bt,t("div",Nt,[p(t("input",{type:"number",class:"form-control",placeholder:"x坐标","onUpdate:modelValue":l[2]||(l[2]=s=>e.value.start[0]=s),onChange:se},null,544),[[m,e.value.start[0]]]),p(t("input",{type:"number",class:"form-control",placeholder:"y坐标","onUpdate:modelValue":l[3]||(l[3]=s=>e.value.start[1]=s),onChange:se},null,544),[[m,e.value.start[1]]]),p(t("input",{type:"number",class:"form-control",placeholder:"z坐标","onUpdate:modelValue":l[4]||(l[4]=s=>e.value.start[2]=s),onChange:se},null,544),[[m,e.value.start[2]]])])]),t("li",Jt,[Kt,eo,(G(!0),W(le,null,Te(e.value.dests,(s,d)=>(G(),W("div",{class:"input-group mb-3",key:d},[p(t("input",{type:"number",class:"form-control",placeholder:"x坐标","onUpdate:modelValue":r=>s[0]=r,onChange:r=>ie(d)},null,40,to),[[m,s[0]]]),p(t("input",{type:"number",class:"form-control",placeholder:"y坐标","onUpdate:modelValue":r=>s[1]=r,onChange:r=>ie(d)},null,40,oo),[[m,s[1]]]),p(t("input",{type:"number",class:"form-control",placeholder:"z坐标","onUpdate:modelValue":r=>s[2]=r,onChange:r=>ie(d)},null,40,no),[[m,s[2]]]),t("button",{class:"btn btn-outline-danger",type:"button",onClick:r=>fe(d)},"-",8,so)]))),128)),t("button",{class:"btn btn-sm btn-outline-primary",onClick:be},"+")]),t("li",io,[ao,ro,t("div",lo,[(G(!0),W(le,null,Te(e.value.objects,(s,d)=>(G(),W("div",{class:"accordion-item",key:d},[t("span",co,[t("button",{class:"accordion-button collapsed",id:`flush-button-${d}`,type:"button","data-bs-toggle":"collapse","data-bs-target":`#flush-${d}`,"aria-expanded":"false","aria-controls":`flush-${d}`},Ie(Ee.value[s.type]),9,ho)]),t("div",{id:`flush-${d}`,class:"accordion-collapse collapse","data-bs-parent":"#objectList"},[t("div",uo,[t("div",mo,[bo,t("div",fo,[p(t("input",{type:"number",class:"form-control",placeholder:"x坐标","onUpdate:modelValue":r=>s.pos[0]=r,onChange:r=>g(d)},null,40,go),[[m,s.pos[0]]]),p(t("input",{type:"number",class:"form-control",placeholder:"y坐标","onUpdate:modelValue":r=>s.pos[1]=r,onChange:r=>g(d)},null,40,_o),[[m,s.pos[1]]]),p(t("input",{type:"number",class:"form-control",placeholder:"z坐标","onUpdate:modelValue":r=>s.pos[2]=r,onChange:r=>g(d)},null,40,vo),[[m,s.pos[2]]])])]),s.type==="Drawbox"?(G(),W(le,{key:0},[t("div",yo,[wo,t("div",xo,[p(t("input",{type:"number",min:"1",class:"form-control",placeholder:"x长度","onUpdate:modelValue":r=>s.size[0]=r,onChange:r=>g(d)},null,40,Co),[[m,s.size[0]]]),p(t("input",{type:"number",min:"1",class:"form-control",placeholder:"y长度","onUpdate:modelValue":r=>s.size[1]=r,onChange:r=>g(d)},null,40,Po),[[m,s.size[1]]]),p(t("input",{type:"number",min:"1",class:"form-control",placeholder:"z长度","onUpdate:modelValue":r=>s.size[2]=r,onChange:r=>g(d)},null,40,Mo),[[m,s.size[2]]])])]),t("div",So,[Eo,t("div",jo,[zo,p(t("input",{type:"number",class:"form-control",placeholder:"最小值","onUpdate:modelValue":r=>s.range[0][0]=r,onChange:r=>g(d)},null,40,Io),[[m,s.range[0][0]]]),p(t("input",{type:"number",class:"form-control",placeholder:"最大值","onUpdate:modelValue":r=>s.range[0][1]=r,onChange:r=>g(d)},null,40,ko),[[m,s.range[0][1]]])]),t("div",Vo,[Oo,p(t("input",{type:"number",class:"form-control",placeholder:"最小值","onUpdate:modelValue":r=>s.range[1][0]=r,onChange:r=>g(d)},null,40,Uo),[[m,s.range[1][0]]]),p(t("input",{type:"number",class:"form-control",placeholder:"最大值","onUpdate:modelValue":r=>s.range[1][1]=r,onChange:r=>g(d)},null,40,Do),[[m,s.range[1][1]]])]),t("div",To,[Ao,p(t("input",{type:"number",class:"form-control",placeholder:"最小值","onUpdate:modelValue":r=>s.range[2][0]=r,onChange:r=>g(d)},null,40,Qo),[[m,s.range[2][0]]]),p(t("input",{type:"number",class:"form-control",placeholder:"最大值","onUpdate:modelValue":r=>s.range[2][1]=r,onChange:r=>g(d)},null,40,Xo),[[m,s.range[2][1]]])])])],64)):ve("",!0),s.type==="Rotator"?(G(),W(le,{key:1},[t("div",Yo,[Lo,t("div",Ho,[p(t("input",{type:"number",min:"1",class:"form-control",placeholder:"长度1","onUpdate:modelValue":r=>s.size[0]=r,onChange:r=>g(d)},null,40,Zo),[[m,s.size[0]]]),p(t("input",{type:"number",min:"1",class:"form-control",placeholder:"长度2","onUpdate:modelValue":r=>s.size[1]=r,onChange:r=>g(d)},null,40,Ro),[[m,s.size[1]]])])]),t("div",qo,[$o,t("div",Fo,[p(t("select",{class:"form-control","onUpdate:modelValue":r=>s.face[0]=r,onChange:r=>g(d)},Bo,40,Wo),[[ke,s.face[0]]]),p(t("select",{class:"form-control","onUpdate:modelValue":r=>s.face[1]=r,onChange:r=>g(d)},Ko,40,No),[[ke,s.face[1]]])])]),t("div",en,[tn,p(t("select",{class:"form-control","onUpdate:modelValue":r=>s.direction=r,onChange:r=>g(d)},rn,40,on),[[ke,s.direction]])]),t("div",ln,[cn,p(t("input",{type:"number",min:"0",max:"3",class:"form-control",placeholder:"最小值","onUpdate:modelValue":r=>s.angle=r,onChange:r=>g(d)},null,40,dn),[[m,s.angle]])])],64)):ve("",!0),t("div",hn,[pn,t("div",un,[p(t("input",{type:"text",class:"form-control",placeholder:"#hex颜色值","onUpdate:modelValue":r=>s.color=r,onChange:r=>g(d)},null,40,mn),[[m,s.color]])])]),t("div",bn,[t("button",{class:"btn btn-sm btn-outline-danger",onClick:r=>k(d)},"删除物体",8,fn)])])],8,po)]))),128))]),gn,_n,t("div",vn,[t("button",{class:"btn btn-sm btn-outline-primary",onClick:l[5]||(l[5]=s=>ae("Cube"))},"立方体"),t("button",{class:"btn btn-sm btn-outline-warning",onClick:l[6]||(l[6]=s=>ae("Drawbox"))},"移动条"),t("button",{class:"btn btn-sm btn-outline-danger",onClick:l[7]||(l[7]=s=>ae("Rotator"))},"旋转体")])]),t("li",yn,[wn,xn,t("div",Cn,[p(t("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":l[8]||(l[8]=s=>X.value=s),onChange:O,id:"mirrorEnabled"},null,544),[[De,X.value]]),Pn]),X.value&&e.value.mirror?(G(),W(le,{key:0},[t("div",Mn,[Sn,t("div",En,[p(t("input",{type:"number",class:"form-control",placeholder:"x坐标","onUpdate:modelValue":l[9]||(l[9]=s=>e.value.mirror.pos[0]=s),onChange:S},null,544),[[m,e.value.mirror.pos[0]]]),p(t("input",{type:"number",class:"form-control",placeholder:"y坐标","onUpdate:modelValue":l[10]||(l[10]=s=>e.value.mirror.pos[1]=s),onChange:S},null,544),[[m,e.value.mirror.pos[1]]]),p(t("input",{type:"number",class:"form-control",placeholder:"z坐标","onUpdate:modelValue":l[11]||(l[11]=s=>e.value.mirror.pos[2]=s),onChange:S},null,544),[[m,e.value.mirror.pos[2]]])])]),t("div",jn,[zn,t("div",In,[p(t("input",{type:"number",min:"0",class:"form-control",placeholder:"x长度","onUpdate:modelValue":l[12]||(l[12]=s=>e.value.mirror.size[0]=s),onChange:S},null,544),[[m,e.value.mirror.size[0]]]),p(t("input",{type:"number",min:"1",class:"form-control",placeholder:"y长度","onUpdate:modelValue":l[13]||(l[13]=s=>e.value.mirror.size[1]=s),onChange:S},null,544),[[m,e.value.mirror.size[1]]]),p(t("input",{type:"number",min:"0",class:"form-control",placeholder:"z长度","onUpdate:modelValue":l[14]||(l[14]=s=>e.value.mirror.size[2]=s),onChange:S},null,544),[[m,e.value.mirror.size[2]]])])]),t("div",kn,[Vn,t("div",On,[Un,p(t("input",{type:"number",class:"form-control",placeholder:"最小值","onUpdate:modelValue":l[15]||(l[15]=s=>e.value.mirror.range[0][0]=s),onChange:S},null,544),[[m,e.value.mirror.range[0][0]]]),p(t("input",{type:"number",class:"form-control",placeholder:"最大值","onUpdate:modelValue":l[16]||(l[16]=s=>e.value.mirror.range[0][1]=s),onChange:S},null,544),[[m,e.value.mirror.range[0][1]]])]),t("div",Dn,[Tn,p(t("input",{type:"number",class:"form-control",placeholder:"最小值","onUpdate:modelValue":l[17]||(l[17]=s=>e.value.mirror.range[1][0]=s),onChange:S},null,544),[[m,e.value.mirror.range[1][0]]]),p(t("input",{type:"number",class:"form-control",placeholder:"最大值","onUpdate:modelValue":l[18]||(l[18]=s=>e.value.mirror.range[1][1]=s),onChange:S},null,544),[[m,e.value.mirror.range[1][1]]])]),t("div",An,[Qn,p(t("input",{type:"number",class:"form-control",placeholder:"最小值","onUpdate:modelValue":l[19]||(l[19]=s=>e.value.mirror.range[2][0]=s),onChange:S},null,544),[[m,e.value.mirror.range[2][0]]]),p(t("input",{type:"number",class:"form-control",placeholder:"最大值","onUpdate:modelValue":l[20]||(l[20]=s=>e.value.mirror.range[2][1]=s),onChange:S},null,544),[[m,e.value.mirror.range[2][1]]])])])],64)):ve("",!0)])])],512),Xn]),t("div",Yn,[t("div",Ln,[t("div",Hn,[t("div",Zn,[t("h1",Rn,Ie($.value)+"代码",1),qn]),t("div",$n,[Ae(" 关卡代码"),Fn,p(t("textarea",{class:"form-control",style:{width:"100%",height:"100%","min-height":"200px"},"onUpdate:modelValue":l[21]||(l[21]=s=>E.value=s)},null,512),[[m,E.value]]),Wn,t("span",Gn,Ie(F.value),1)]),t("div",Bn,[$.value==="导入"?(G(),W("button",{key:0,type:"button",class:"btn btn-primary",onClick:ge},"确定")):ve("",!0),Nn])])])])],64))}}),as=Et(Jn,[["__scopeId","data-v-29cdd2d6"]]);export{as as default};
