var Qa=Object.defineProperty;var Wa=(n,e,t)=>e in n?Qa(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Dn=(n,e,t)=>(Wa(n,typeof e!="symbol"?e+"":e,t),t);import{A as Va,t as Ya}from"./index-Bx0xm5aA.js";import{a as Xa}from"./axios-DmY7Om-x.js";import{r as Ja,s as Wt,t as ra,u as Za,v as ze,w as sa,C as Ae,x as ae,y as $a,z as er,D as tr,e as Ie,G as Xe,H as se,n as ia,c as xt,V as Oe,I as nr,J as ar,O as oa,K as rr,N as sr,o as Mt,U as ir,X as ca,Y as la,Z as Vt,q as or,_ as Dt,L as cr,$ as ua,k as lr,a0 as ur,g as br,a1 as dr,M as hr,a2 as fr,i as pr,a3 as mr,p as gr,a4 as Lt,P as yr,a5 as vr,l as wr,a6 as Ar,a7 as ft,a8 as xr,a9 as ba,aa as Ln,Q as da,ab as kr,ac as _r,ad as Tr,ae as Er,af as Rr,ag as jr,ah as Sr,ai as Or,aj as Pr,ak as Kn,al as Gn,am as Nn,an as Bn,ao as Fr,ap as Cr,aq as Mr,ar as Dr,as as Lr}from"./index-CE_QVOjg.js";function In(n,e){if(e===Ja)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===Wt||e===ra){let t=n.getIndex();if(t===null){const i=[],c=n.getAttribute("position");if(c!==void 0){for(let o=0;o<c.count;o++)i.push(o);n.setIndex(i),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const a=t.count-2,r=[];if(e===Wt)for(let i=1;i<=a;i++)r.push(t.getX(0)),r.push(t.getX(i)),r.push(t.getX(i+1));else for(let i=0;i<a;i++)i%2===0?(r.push(t.getX(i)),r.push(t.getX(i+1)),r.push(t.getX(i+2))):(r.push(t.getX(i+2)),r.push(t.getX(i+1)),r.push(t.getX(i)));r.length/3!==a&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(r),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}class Kr extends Za{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new Hr(t)}),this.register(function(t){return new Jr(t)}),this.register(function(t){return new Zr(t)}),this.register(function(t){return new $r(t)}),this.register(function(t){return new zr(t)}),this.register(function(t){return new Ur(t)}),this.register(function(t){return new Qr(t)}),this.register(function(t){return new Wr(t)}),this.register(function(t){return new Ir(t)}),this.register(function(t){return new Vr(t)}),this.register(function(t){return new qr(t)}),this.register(function(t){return new Xr(t)}),this.register(function(t){return new Yr(t)}),this.register(function(t){return new Nr(t)}),this.register(function(t){return new es(t)}),this.register(function(t){return new ts(t)})}load(e,t,a,r){const s=this;let i;if(this.resourcePath!=="")i=this.resourcePath;else if(this.path!==""){const l=ze.extractUrlBase(e);i=ze.resolveURL(l,this.path)}else i=ze.extractUrlBase(e);this.manager.itemStart(e);const c=function(l){r?r(l):console.error(l),s.manager.itemError(e),s.manager.itemEnd(e)},o=new sa(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{s.parse(l,i,function(u){t(u),s.manager.itemEnd(e)},c)}catch(u){c(u)}},a,c)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,a,r){let s;const i={},c={},o=new TextDecoder;if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(o.decode(new Uint8Array(e,0,4))===ha){try{i[S.KHR_BINARY_GLTF]=new ns(e)}catch(b){r&&r(b);return}s=JSON.parse(i[S.KHR_BINARY_GLTF].content)}else s=JSON.parse(o.decode(e));else s=e;if(s.asset===void 0||s.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const l=new ps(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const b=this.pluginCallbacks[u](l);b.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),c[b.name]=b,i[b.name]=!0}if(s.extensionsUsed)for(let u=0;u<s.extensionsUsed.length;++u){const b=s.extensionsUsed[u],d=s.extensionsRequired||[];switch(b){case S.KHR_MATERIALS_UNLIT:i[b]=new Br;break;case S.KHR_DRACO_MESH_COMPRESSION:i[b]=new as(s,this.dracoLoader);break;case S.KHR_TEXTURE_TRANSFORM:i[b]=new rs;break;case S.KHR_MESH_QUANTIZATION:i[b]=new ss;break;default:d.indexOf(b)>=0&&c[b]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+b+'".')}}l.setExtensions(i),l.setPlugins(c),l.parse(a,r)}parseAsync(e,t){const a=this;return new Promise(function(r,s){a.parse(e,t,r,s)})}}function Gr(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const S={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class Nr{constructor(e){this.parser=e,this.name=S.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let a=0,r=t.length;a<r;a++){const s=t[a];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,a="light:"+e;let r=t.cache.get(a);if(r)return r;const s=t.json,o=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let l;const u=new Ae(16777215);o.color!==void 0&&u.setRGB(o.color[0],o.color[1],o.color[2],ae);const b=o.range!==void 0?o.range:0;switch(o.type){case"directional":l=new tr(u),l.target.position.set(0,0,-1),l.add(l.target);break;case"point":l=new er(u),l.distance=b;break;case"spot":l=new $a(u),l.distance=b,o.spot=o.spot||{},o.spot.innerConeAngle=o.spot.innerConeAngle!==void 0?o.spot.innerConeAngle:0,o.spot.outerConeAngle=o.spot.outerConeAngle!==void 0?o.spot.outerConeAngle:Math.PI/4,l.angle=o.spot.outerConeAngle,l.penumbra=1-o.spot.innerConeAngle/o.spot.outerConeAngle,l.target.position.set(0,0,-1),l.add(l.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+o.type)}return l.position.set(0,0,0),l.decay=2,ce(l,o),o.intensity!==void 0&&(l.intensity=o.intensity),l.name=t.createUniqueName(o.name||"light_"+e),r=Promise.resolve(l),t.cache.add(a,r),r}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,a=this.parser,s=a.json.nodes[e],c=(s.extensions&&s.extensions[this.name]||{}).light;return c===void 0?null:this._loadLight(c).then(function(o){return a._getNodeRef(t.cache,c,o)})}}class Br{constructor(){this.name=S.KHR_MATERIALS_UNLIT}getMaterialType(){return Ie}extendParams(e,t,a){const r=[];e.color=new Ae(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const i=s.baseColorFactor;e.color.setRGB(i[0],i[1],i[2],ae),e.opacity=i[3]}s.baseColorTexture!==void 0&&r.push(a.assignTexture(e,"map",s.baseColorTexture,Xe))}return Promise.all(r)}}class Ir{constructor(e){this.parser=e,this.name=S.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}}class Hr{constructor(e){this.parser=e,this.name=S.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const a=this.parser.json.materials[e];return!a.extensions||!a.extensions[this.name]?null:se}extendMaterialParams(e,t){const a=this.parser,r=a.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],i=r.extensions[this.name];if(i.clearcoatFactor!==void 0&&(t.clearcoat=i.clearcoatFactor),i.clearcoatTexture!==void 0&&s.push(a.assignTexture(t,"clearcoatMap",i.clearcoatTexture)),i.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=i.clearcoatRoughnessFactor),i.clearcoatRoughnessTexture!==void 0&&s.push(a.assignTexture(t,"clearcoatRoughnessMap",i.clearcoatRoughnessTexture)),i.clearcoatNormalTexture!==void 0&&(s.push(a.assignTexture(t,"clearcoatNormalMap",i.clearcoatNormalTexture)),i.clearcoatNormalTexture.scale!==void 0)){const c=i.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new ia(c,c)}return Promise.all(s)}}class qr{constructor(e){this.parser=e,this.name=S.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const a=this.parser.json.materials[e];return!a.extensions||!a.extensions[this.name]?null:se}extendMaterialParams(e,t){const a=this.parser,r=a.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],i=r.extensions[this.name];return i.iridescenceFactor!==void 0&&(t.iridescence=i.iridescenceFactor),i.iridescenceTexture!==void 0&&s.push(a.assignTexture(t,"iridescenceMap",i.iridescenceTexture)),i.iridescenceIor!==void 0&&(t.iridescenceIOR=i.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),i.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=i.iridescenceThicknessMinimum),i.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=i.iridescenceThicknessMaximum),i.iridescenceThicknessTexture!==void 0&&s.push(a.assignTexture(t,"iridescenceThicknessMap",i.iridescenceThicknessTexture)),Promise.all(s)}}class zr{constructor(e){this.parser=e,this.name=S.KHR_MATERIALS_SHEEN}getMaterialType(e){const a=this.parser.json.materials[e];return!a.extensions||!a.extensions[this.name]?null:se}extendMaterialParams(e,t){const a=this.parser,r=a.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new Ae(0,0,0),t.sheenRoughness=0,t.sheen=1;const i=r.extensions[this.name];if(i.sheenColorFactor!==void 0){const c=i.sheenColorFactor;t.sheenColor.setRGB(c[0],c[1],c[2],ae)}return i.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=i.sheenRoughnessFactor),i.sheenColorTexture!==void 0&&s.push(a.assignTexture(t,"sheenColorMap",i.sheenColorTexture,Xe)),i.sheenRoughnessTexture!==void 0&&s.push(a.assignTexture(t,"sheenRoughnessMap",i.sheenRoughnessTexture)),Promise.all(s)}}class Ur{constructor(e){this.parser=e,this.name=S.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const a=this.parser.json.materials[e];return!a.extensions||!a.extensions[this.name]?null:se}extendMaterialParams(e,t){const a=this.parser,r=a.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],i=r.extensions[this.name];return i.transmissionFactor!==void 0&&(t.transmission=i.transmissionFactor),i.transmissionTexture!==void 0&&s.push(a.assignTexture(t,"transmissionMap",i.transmissionTexture)),Promise.all(s)}}class Qr{constructor(e){this.parser=e,this.name=S.KHR_MATERIALS_VOLUME}getMaterialType(e){const a=this.parser.json.materials[e];return!a.extensions||!a.extensions[this.name]?null:se}extendMaterialParams(e,t){const a=this.parser,r=a.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],i=r.extensions[this.name];t.thickness=i.thicknessFactor!==void 0?i.thicknessFactor:0,i.thicknessTexture!==void 0&&s.push(a.assignTexture(t,"thicknessMap",i.thicknessTexture)),t.attenuationDistance=i.attenuationDistance||1/0;const c=i.attenuationColor||[1,1,1];return t.attenuationColor=new Ae().setRGB(c[0],c[1],c[2],ae),Promise.all(s)}}class Wr{constructor(e){this.parser=e,this.name=S.KHR_MATERIALS_IOR}getMaterialType(e){const a=this.parser.json.materials[e];return!a.extensions||!a.extensions[this.name]?null:se}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class Vr{constructor(e){this.parser=e,this.name=S.KHR_MATERIALS_SPECULAR}getMaterialType(e){const a=this.parser.json.materials[e];return!a.extensions||!a.extensions[this.name]?null:se}extendMaterialParams(e,t){const a=this.parser,r=a.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],i=r.extensions[this.name];t.specularIntensity=i.specularFactor!==void 0?i.specularFactor:1,i.specularTexture!==void 0&&s.push(a.assignTexture(t,"specularIntensityMap",i.specularTexture));const c=i.specularColorFactor||[1,1,1];return t.specularColor=new Ae().setRGB(c[0],c[1],c[2],ae),i.specularColorTexture!==void 0&&s.push(a.assignTexture(t,"specularColorMap",i.specularColorTexture,Xe)),Promise.all(s)}}class Yr{constructor(e){this.parser=e,this.name=S.EXT_MATERIALS_BUMP}getMaterialType(e){const a=this.parser.json.materials[e];return!a.extensions||!a.extensions[this.name]?null:se}extendMaterialParams(e,t){const a=this.parser,r=a.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],i=r.extensions[this.name];return t.bumpScale=i.bumpFactor!==void 0?i.bumpFactor:1,i.bumpTexture!==void 0&&s.push(a.assignTexture(t,"bumpMap",i.bumpTexture)),Promise.all(s)}}class Xr{constructor(e){this.parser=e,this.name=S.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const a=this.parser.json.materials[e];return!a.extensions||!a.extensions[this.name]?null:se}extendMaterialParams(e,t){const a=this.parser,r=a.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],i=r.extensions[this.name];return i.anisotropyStrength!==void 0&&(t.anisotropy=i.anisotropyStrength),i.anisotropyRotation!==void 0&&(t.anisotropyRotation=i.anisotropyRotation),i.anisotropyTexture!==void 0&&s.push(a.assignTexture(t,"anisotropyMap",i.anisotropyTexture)),Promise.all(s)}}class Jr{constructor(e){this.parser=e,this.name=S.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,a=t.json,r=a.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],i=t.options.ktx2Loader;if(!i){if(a.extensionsRequired&&a.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,i)}}class Zr{constructor(e){this.parser=e,this.name=S.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,a=this.parser,r=a.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const i=s.extensions[t],c=r.images[i.source];let o=a.textureLoader;if(c.uri){const l=a.options.manager.getHandler(c.uri);l!==null&&(o=l)}return this.detectSupport().then(function(l){if(l)return a.loadTextureImage(e,i.source,o);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return a.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class $r{constructor(e){this.parser=e,this.name=S.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,a=this.parser,r=a.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const i=s.extensions[t],c=r.images[i.source];let o=a.textureLoader;if(c.uri){const l=a.options.manager.getHandler(c.uri);l!==null&&(o=l)}return this.detectSupport().then(function(l){if(l)return a.loadTextureImage(e,i.source,o);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return a.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class es{constructor(e){this.name=S.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,a=t.bufferViews[e];if(a.extensions&&a.extensions[this.name]){const r=a.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),i=this.parser.options.meshoptDecoder;if(!i||!i.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(c){const o=r.byteOffset||0,l=r.byteLength||0,u=r.count,b=r.byteStride,d=new Uint8Array(c,o,l);return i.decodeGltfBufferAsync?i.decodeGltfBufferAsync(u,b,d,r.mode,r.filter).then(function(f){return f.buffer}):i.ready.then(function(){const f=new ArrayBuffer(u*b);return i.decodeGltfBuffer(new Uint8Array(f),u,b,d,r.mode,r.filter),f})})}else return null}}class ts{constructor(e){this.name=S.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,a=t.nodes[e];if(!a.extensions||!a.extensions[this.name]||a.mesh===void 0)return null;const r=t.meshes[a.mesh];for(const l of r.primitives)if(l.mode!==W.TRIANGLES&&l.mode!==W.TRIANGLE_STRIP&&l.mode!==W.TRIANGLE_FAN&&l.mode!==void 0)return null;const i=a.extensions[this.name].attributes,c=[],o={};for(const l in i)c.push(this.parser.getDependency("accessor",i[l]).then(u=>(o[l]=u,o[l])));return c.length<1?null:(c.push(this.parser.createNodeMesh(e)),Promise.all(c).then(l=>{const u=l.pop(),b=u.isGroup?u.children:[u],d=l[0].count,f=[];for(const g of b){const m=new xt,y=new Oe,p=new da,h=new Oe(1,1,1),w=new nr(g.geometry,g.material,d);for(let v=0;v<d;v++)o.TRANSLATION&&y.fromBufferAttribute(o.TRANSLATION,v),o.ROTATION&&p.fromBufferAttribute(o.ROTATION,v),o.SCALE&&h.fromBufferAttribute(o.SCALE,v),w.setMatrixAt(v,m.compose(y,p,h));for(const v in o)if(v==="_COLOR_0"){const x=o[v];w.instanceColor=new ar(x.array,x.itemSize,x.normalized)}else v!=="TRANSLATION"&&v!=="ROTATION"&&v!=="SCALE"&&g.geometry.setAttribute(v,o[v]);oa.prototype.copy.call(w,g),this.parser.assignFinalMaterial(w),f.push(w)}return u.isGroup?(u.clear(),u.add(...f),u):f[0]}))}}const ha="glTF",Ne=12,Hn={JSON:1313821514,BIN:5130562};class ns{constructor(e){this.name=S.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,Ne),a=new TextDecoder;if(this.header={magic:a.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==ha)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-Ne,s=new DataView(e,Ne);let i=0;for(;i<r;){const c=s.getUint32(i,!0);i+=4;const o=s.getUint32(i,!0);if(i+=4,o===Hn.JSON){const l=new Uint8Array(e,Ne+i,c);this.content=a.decode(l)}else if(o===Hn.BIN){const l=Ne+i;this.body=e.slice(l,l+c)}i+=c}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class as{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=S.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const a=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,i=e.extensions[this.name].attributes,c={},o={},l={};for(const u in i){const b=Yt[u]||u.toLowerCase();c[b]=i[u]}for(const u in e.attributes){const b=Yt[u]||u.toLowerCase();if(i[u]!==void 0){const d=a.accessors[e.attributes[u]],f=Pe[d.componentType];l[b]=f.name,o[b]=d.normalized===!0}}return t.getDependency("bufferView",s).then(function(u){return new Promise(function(b,d){r.decodeDracoFile(u,function(f){for(const g in f.attributes){const m=f.attributes[g],y=o[g];y!==void 0&&(m.normalized=y)}b(f)},c,l,ae,d)})})}}class rs{constructor(){this.name=S.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class ss{constructor(){this.name=S.KHR_MESH_QUANTIZATION}}class fa extends Mr{constructor(e,t,a,r){super(e,t,a,r)}copySampleValue_(e){const t=this.resultBuffer,a=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let i=0;i!==r;i++)t[i]=a[s+i];return t}interpolate_(e,t,a,r){const s=this.resultBuffer,i=this.sampleValues,c=this.valueSize,o=c*2,l=c*3,u=r-t,b=(a-t)/u,d=b*b,f=d*b,g=e*l,m=g-l,y=-2*f+3*d,p=f-d,h=1-y,w=p-d+b;for(let v=0;v!==c;v++){const x=i[m+v+c],k=i[m+v+o]*u,A=i[g+v+c],j=i[g+v]*u;s[v]=h*x+w*k+y*A+p*j}return s}}const is=new da;class os extends fa{interpolate_(e,t,a,r){const s=super.interpolate_(e,t,a,r);return is.fromArray(s).normalize().toArray(s),s}}const W={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Pe={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},qn={9728:kr,9729:ca,9984:_r,9985:Tr,9986:Er,9987:la},zn={33071:Rr,33648:jr,10497:Vt},Kt={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Yt={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},ie={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},cs={CUBICSPLINE:void 0,LINEAR:ba,STEP:Sr},Gt={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function ls(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new ua({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Or})),n.DefaultMaterial}function pe(n,e,t){for(const a in t.extensions)n[a]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[a]=t.extensions[a])}function ce(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function us(n,e,t){let a=!1,r=!1,s=!1;for(let l=0,u=e.length;l<u;l++){const b=e[l];if(b.POSITION!==void 0&&(a=!0),b.NORMAL!==void 0&&(r=!0),b.COLOR_0!==void 0&&(s=!0),a&&r&&s)break}if(!a&&!r&&!s)return Promise.resolve(n);const i=[],c=[],o=[];for(let l=0,u=e.length;l<u;l++){const b=e[l];if(a){const d=b.POSITION!==void 0?t.getDependency("accessor",b.POSITION):n.attributes.position;i.push(d)}if(r){const d=b.NORMAL!==void 0?t.getDependency("accessor",b.NORMAL):n.attributes.normal;c.push(d)}if(s){const d=b.COLOR_0!==void 0?t.getDependency("accessor",b.COLOR_0):n.attributes.color;o.push(d)}}return Promise.all([Promise.all(i),Promise.all(c),Promise.all(o)]).then(function(l){const u=l[0],b=l[1],d=l[2];return a&&(n.morphAttributes.position=u),r&&(n.morphAttributes.normal=b),s&&(n.morphAttributes.color=d),n.morphTargetsRelative=!0,n})}function bs(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,a=e.weights.length;t<a;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let a=0,r=t.length;a<r;a++)n.morphTargetDictionary[t[a]]=a}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function ds(n){let e;const t=n.extensions&&n.extensions[S.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+Nt(t.attributes):e=n.indices+":"+Nt(n.attributes)+":"+n.mode,n.targets!==void 0)for(let a=0,r=n.targets.length;a<r;a++)e+=":"+Nt(n.targets[a]);return e}function Nt(n){let e="";const t=Object.keys(n).sort();for(let a=0,r=t.length;a<r;a++)e+=t[a]+":"+n[t[a]]+";";return e}function Xt(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function hs(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const fs=new xt;class ps{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new Gr,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let a=!1,r=!1,s=-1;typeof navigator<"u"&&(a=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,r=navigator.userAgent.indexOf("Firefox")>-1,s=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||a||r&&s<98?this.textureLoader=new rr(this.options.manager):this.textureLoader=new sr(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new sa(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const a=this,r=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(i){return i._markDefs&&i._markDefs()}),Promise.all(this._invokeAll(function(i){return i.beforeRoot&&i.beforeRoot()})).then(function(){return Promise.all([a.getDependencies("scene"),a.getDependencies("animation"),a.getDependencies("camera")])}).then(function(i){const c={scene:i[0][r.scene||0],scenes:i[0],animations:i[1],cameras:i[2],asset:r.asset,parser:a,userData:{}};return pe(s,c,r),ce(c,r),Promise.all(a._invokeAll(function(o){return o.afterRoot&&o.afterRoot(c)})).then(function(){e(c)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],a=this.json.meshes||[];for(let r=0,s=t.length;r<s;r++){const i=t[r].joints;for(let c=0,o=i.length;c<o;c++)e[i[c]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const i=e[r];i.mesh!==void 0&&(this._addNodeRef(this.meshCache,i.mesh),i.skin!==void 0&&(a[i.mesh].isSkinnedMesh=!0)),i.camera!==void 0&&this._addNodeRef(this.cameraCache,i.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,a){if(e.refs[t]<=1)return a;const r=a.clone(),s=(i,c)=>{const o=this.associations.get(i);o!=null&&this.associations.set(c,o);for(const[l,u]of i.children.entries())s(u,c.children[l])};return s(a,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let a=0;a<t.length;a++){const r=e(t[a]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const a=[];for(let r=0;r<t.length;r++){const s=e(t[r]);s&&a.push(s)}return a}getDependency(e,t){const a=e+":"+t;let r=this.cache.get(a);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!r)throw new Error("Unknown type: "+e);break}this.cache.add(a,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const a=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(r.map(function(s,i){return a.getDependency(e,i)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],a=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[S.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,i){a.load(ze.resolveURL(t.uri,r.path),s,void 0,function(){i(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(a){const r=t.byteLength||0,s=t.byteOffset||0;return a.slice(s,s+r)})}loadAccessor(e){const t=this,a=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0){const i=Kt[r.type],c=Pe[r.componentType],o=r.normalized===!0,l=new c(r.count*i);return Promise.resolve(new Mt(l,i,o))}const s=[];return r.bufferView!==void 0?s.push(this.getDependency("bufferView",r.bufferView)):s.push(null),r.sparse!==void 0&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(i){const c=i[0],o=Kt[r.type],l=Pe[r.componentType],u=l.BYTES_PER_ELEMENT,b=u*o,d=r.byteOffset||0,f=r.bufferView!==void 0?a.bufferViews[r.bufferView].byteStride:void 0,g=r.normalized===!0;let m,y;if(f&&f!==b){const p=Math.floor(d/f),h="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+p+":"+r.count;let w=t.cache.get(h);w||(m=new l(c,p*f,r.count*f/u),w=new ir(m,f/u),t.cache.add(h,w)),y=new Pr(w,o,d%f/u,g)}else c===null?m=new l(r.count*o):m=new l(c,d,r.count*o),y=new Mt(m,o,g);if(r.sparse!==void 0){const p=Kt.SCALAR,h=Pe[r.sparse.indices.componentType],w=r.sparse.indices.byteOffset||0,v=r.sparse.values.byteOffset||0,x=new h(i[1],w,r.sparse.count*p),k=new l(i[2],v,r.sparse.count*o);c!==null&&(y=new Mt(y.array.slice(),y.itemSize,y.normalized));for(let A=0,j=x.length;A<j;A++){const _=x[A];if(y.setX(_,k[A*o]),o>=2&&y.setY(_,k[A*o+1]),o>=3&&y.setZ(_,k[A*o+2]),o>=4&&y.setW(_,k[A*o+3]),o>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return y})}loadTexture(e){const t=this.json,a=this.options,s=t.textures[e].source,i=t.images[s];let c=this.textureLoader;if(i.uri){const o=a.manager.getHandler(i.uri);o!==null&&(c=o)}return this.loadTextureImage(e,s,c)}loadTextureImage(e,t,a){const r=this,s=this.json,i=s.textures[e],c=s.images[t],o=(c.uri||c.bufferView)+":"+i.sampler;if(this.textureCache[o])return this.textureCache[o];const l=this.loadImageSource(t,a).then(function(u){u.flipY=!1,u.name=i.name||c.name||"",u.name===""&&typeof c.uri=="string"&&c.uri.startsWith("data:image/")===!1&&(u.name=c.uri);const d=(s.samplers||{})[i.sampler]||{};return u.magFilter=qn[d.magFilter]||ca,u.minFilter=qn[d.minFilter]||la,u.wrapS=zn[d.wrapS]||Vt,u.wrapT=zn[d.wrapT]||Vt,r.associations.set(u,{textures:e}),u}).catch(function(){return null});return this.textureCache[o]=l,l}loadImageSource(e,t){const a=this,r=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(b=>b.clone());const i=r.images[e],c=self.URL||self.webkitURL;let o=i.uri||"",l=!1;if(i.bufferView!==void 0)o=a.getDependency("bufferView",i.bufferView).then(function(b){l=!0;const d=new Blob([b],{type:i.mimeType});return o=c.createObjectURL(d),o});else if(i.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const u=Promise.resolve(o).then(function(b){return new Promise(function(d,f){let g=d;t.isImageBitmapLoader===!0&&(g=function(m){const y=new Kn(m);y.needsUpdate=!0,d(y)}),t.load(ze.resolveURL(b,s.path),g,void 0,f)})}).then(function(b){return l===!0&&c.revokeObjectURL(o),b.userData.mimeType=i.mimeType||hs(i.uri),b}).catch(function(b){throw console.error("THREE.GLTFLoader: Couldn't load texture",o),b});return this.sourceCache[e]=u,u}assignTexture(e,t,a,r){const s=this;return this.getDependency("texture",a.index).then(function(i){if(!i)return null;if(a.texCoord!==void 0&&a.texCoord>0&&(i=i.clone(),i.channel=a.texCoord),s.extensions[S.KHR_TEXTURE_TRANSFORM]){const c=a.extensions!==void 0?a.extensions[S.KHR_TEXTURE_TRANSFORM]:void 0;if(c){const o=s.associations.get(i);i=s.extensions[S.KHR_TEXTURE_TRANSFORM].extendTexture(i,c),s.associations.set(i,o)}}return r!==void 0&&(i.colorSpace=r),e[t]=i,i})}assignFinalMaterial(e){const t=e.geometry;let a=e.material;const r=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,i=t.attributes.normal===void 0;if(e.isPoints){const c="PointsMaterial:"+a.uuid;let o=this.cache.get(c);o||(o=new or,Dt.prototype.copy.call(o,a),o.color.copy(a.color),o.map=a.map,o.sizeAttenuation=!1,this.cache.add(c,o)),a=o}else if(e.isLine){const c="LineBasicMaterial:"+a.uuid;let o=this.cache.get(c);o||(o=new cr,Dt.prototype.copy.call(o,a),o.color.copy(a.color),o.map=a.map,this.cache.add(c,o)),a=o}if(r||s||i){let c="ClonedMaterial:"+a.uuid+":";r&&(c+="derivative-tangents:"),s&&(c+="vertex-colors:"),i&&(c+="flat-shading:");let o=this.cache.get(c);o||(o=a.clone(),s&&(o.vertexColors=!0),i&&(o.flatShading=!0),r&&(o.normalScale&&(o.normalScale.y*=-1),o.clearcoatNormalScale&&(o.clearcoatNormalScale.y*=-1)),this.cache.add(c,o),this.associations.set(o,this.associations.get(a))),a=o}e.material=a}getMaterialType(){return ua}loadMaterial(e){const t=this,a=this.json,r=this.extensions,s=a.materials[e];let i;const c={},o=s.extensions||{},l=[];if(o[S.KHR_MATERIALS_UNLIT]){const b=r[S.KHR_MATERIALS_UNLIT];i=b.getMaterialType(),l.push(b.extendParams(c,s,t))}else{const b=s.pbrMetallicRoughness||{};if(c.color=new Ae(1,1,1),c.opacity=1,Array.isArray(b.baseColorFactor)){const d=b.baseColorFactor;c.color.setRGB(d[0],d[1],d[2],ae),c.opacity=d[3]}b.baseColorTexture!==void 0&&l.push(t.assignTexture(c,"map",b.baseColorTexture,Xe)),c.metalness=b.metallicFactor!==void 0?b.metallicFactor:1,c.roughness=b.roughnessFactor!==void 0?b.roughnessFactor:1,b.metallicRoughnessTexture!==void 0&&(l.push(t.assignTexture(c,"metalnessMap",b.metallicRoughnessTexture)),l.push(t.assignTexture(c,"roughnessMap",b.metallicRoughnessTexture))),i=this._invokeOne(function(d){return d.getMaterialType&&d.getMaterialType(e)}),l.push(Promise.all(this._invokeAll(function(d){return d.extendMaterialParams&&d.extendMaterialParams(e,c)})))}s.doubleSided===!0&&(c.side=lr);const u=s.alphaMode||Gt.OPAQUE;if(u===Gt.BLEND?(c.transparent=!0,c.depthWrite=!1):(c.transparent=!1,u===Gt.MASK&&(c.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&i!==Ie&&(l.push(t.assignTexture(c,"normalMap",s.normalTexture)),c.normalScale=new ia(1,1),s.normalTexture.scale!==void 0)){const b=s.normalTexture.scale;c.normalScale.set(b,b)}if(s.occlusionTexture!==void 0&&i!==Ie&&(l.push(t.assignTexture(c,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(c.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&i!==Ie){const b=s.emissiveFactor;c.emissive=new Ae().setRGB(b[0],b[1],b[2],ae)}return s.emissiveTexture!==void 0&&i!==Ie&&l.push(t.assignTexture(c,"emissiveMap",s.emissiveTexture,Xe)),Promise.all(l).then(function(){const b=new i(c);return s.name&&(b.name=s.name),ce(b,s),t.associations.set(b,{materials:e}),s.extensions&&pe(r,b,s),b})}createUniqueName(e){const t=ur.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,a=this.extensions,r=this.primitiveCache;function s(c){return a[S.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(c,t).then(function(o){return Un(o,c,t)})}const i=[];for(let c=0,o=e.length;c<o;c++){const l=e[c],u=ds(l),b=r[u];if(b)i.push(b.promise);else{let d;l.extensions&&l.extensions[S.KHR_DRACO_MESH_COMPRESSION]?d=s(l):d=Un(new br,l,t),r[u]={primitive:l,promise:d},i.push(d)}}return Promise.all(i)}loadMesh(e){const t=this,a=this.json,r=this.extensions,s=a.meshes[e],i=s.primitives,c=[];for(let o=0,l=i.length;o<l;o++){const u=i[o].material===void 0?ls(this.cache):this.getDependency("material",i[o].material);c.push(u)}return c.push(t.loadGeometries(i)),Promise.all(c).then(function(o){const l=o.slice(0,o.length-1),u=o[o.length-1],b=[];for(let f=0,g=u.length;f<g;f++){const m=u[f],y=i[f];let p;const h=l[f];if(y.mode===W.TRIANGLES||y.mode===W.TRIANGLE_STRIP||y.mode===W.TRIANGLE_FAN||y.mode===void 0)p=s.isSkinnedMesh===!0?new dr(m,h):new hr(m,h),p.isSkinnedMesh===!0&&p.normalizeSkinWeights(),y.mode===W.TRIANGLE_STRIP?p.geometry=In(p.geometry,ra):y.mode===W.TRIANGLE_FAN&&(p.geometry=In(p.geometry,Wt));else if(y.mode===W.LINES)p=new fr(m,h);else if(y.mode===W.LINE_STRIP)p=new pr(m,h);else if(y.mode===W.LINE_LOOP)p=new mr(m,h);else if(y.mode===W.POINTS)p=new gr(m,h);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+y.mode);Object.keys(p.geometry.morphAttributes).length>0&&bs(p,s),p.name=t.createUniqueName(s.name||"mesh_"+e),ce(p,s),y.extensions&&pe(r,p,y),t.assignFinalMaterial(p),b.push(p)}for(let f=0,g=b.length;f<g;f++)t.associations.set(b[f],{meshes:e,primitives:f});if(b.length===1)return s.extensions&&pe(r,b[0],s),b[0];const d=new Lt;s.extensions&&pe(r,d,s),t.associations.set(d,{meshes:e});for(let f=0,g=b.length;f<g;f++)d.add(b[f]);return d})}loadCamera(e){let t;const a=this.json.cameras[e],r=a[a.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return a.type==="perspective"?t=new yr(vr.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):a.type==="orthographic"&&(t=new wr(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),a.name&&(t.name=this.createUniqueName(a.name)),ce(t,a),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],a=[];for(let r=0,s=t.joints.length;r<s;r++)a.push(this._loadNodeShallow(t.joints[r]));return t.inverseBindMatrices!==void 0?a.push(this.getDependency("accessor",t.inverseBindMatrices)):a.push(null),Promise.all(a).then(function(r){const s=r.pop(),i=r,c=[],o=[];for(let l=0,u=i.length;l<u;l++){const b=i[l];if(b){c.push(b);const d=new xt;s!==null&&d.fromArray(s.array,l*16),o.push(d)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[l])}return new Ar(c,o)})}loadAnimation(e){const t=this.json,a=this,r=t.animations[e],s=r.name?r.name:"animation_"+e,i=[],c=[],o=[],l=[],u=[];for(let b=0,d=r.channels.length;b<d;b++){const f=r.channels[b],g=r.samplers[f.sampler],m=f.target,y=m.node,p=r.parameters!==void 0?r.parameters[g.input]:g.input,h=r.parameters!==void 0?r.parameters[g.output]:g.output;m.node!==void 0&&(i.push(this.getDependency("node",y)),c.push(this.getDependency("accessor",p)),o.push(this.getDependency("accessor",h)),l.push(g),u.push(m))}return Promise.all([Promise.all(i),Promise.all(c),Promise.all(o),Promise.all(l),Promise.all(u)]).then(function(b){const d=b[0],f=b[1],g=b[2],m=b[3],y=b[4],p=[];for(let h=0,w=d.length;h<w;h++){const v=d[h],x=f[h],k=g[h],A=m[h],j=y[h];if(v===void 0)continue;v.updateMatrix&&v.updateMatrix();const _=a._createAnimationTracks(v,x,k,A,j);if(_)for(let P=0;P<_.length;P++)p.push(_[P])}return new ft(s,void 0,p)})}createNodeMesh(e){const t=this.json,a=this,r=t.nodes[e];return r.mesh===void 0?null:a.getDependency("mesh",r.mesh).then(function(s){const i=a._getNodeRef(a.meshCache,r.mesh,s);return r.weights!==void 0&&i.traverse(function(c){if(c.isMesh)for(let o=0,l=r.weights.length;o<l;o++)c.morphTargetInfluences[o]=r.weights[o]}),i})}loadNode(e){const t=this.json,a=this,r=t.nodes[e],s=a._loadNodeShallow(e),i=[],c=r.children||[];for(let l=0,u=c.length;l<u;l++)i.push(a.getDependency("node",c[l]));const o=r.skin===void 0?Promise.resolve(null):a.getDependency("skin",r.skin);return Promise.all([s,Promise.all(i),o]).then(function(l){const u=l[0],b=l[1],d=l[2];d!==null&&u.traverse(function(f){f.isSkinnedMesh&&f.bind(d,fs)});for(let f=0,g=b.length;f<g;f++)u.add(b[f]);return u})}_loadNodeShallow(e){const t=this.json,a=this.extensions,r=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=t.nodes[e],i=s.name?r.createUniqueName(s.name):"",c=[],o=r._invokeOne(function(l){return l.createNodeMesh&&l.createNodeMesh(e)});return o&&c.push(o),s.camera!==void 0&&c.push(r.getDependency("camera",s.camera).then(function(l){return r._getNodeRef(r.cameraCache,s.camera,l)})),r._invokeAll(function(l){return l.createNodeAttachment&&l.createNodeAttachment(e)}).forEach(function(l){c.push(l)}),this.nodeCache[e]=Promise.all(c).then(function(l){let u;if(s.isBone===!0?u=new xr:l.length>1?u=new Lt:l.length===1?u=l[0]:u=new oa,u!==l[0])for(let b=0,d=l.length;b<d;b++)u.add(l[b]);if(s.name&&(u.userData.name=s.name,u.name=i),ce(u,s),s.extensions&&pe(a,u,s),s.matrix!==void 0){const b=new xt;b.fromArray(s.matrix),u.applyMatrix4(b)}else s.translation!==void 0&&u.position.fromArray(s.translation),s.rotation!==void 0&&u.quaternion.fromArray(s.rotation),s.scale!==void 0&&u.scale.fromArray(s.scale);return r.associations.has(u)||r.associations.set(u,{}),r.associations.get(u).nodes=e,u}),this.nodeCache[e]}loadScene(e){const t=this.extensions,a=this.json.scenes[e],r=this,s=new Lt;a.name&&(s.name=r.createUniqueName(a.name)),ce(s,a),a.extensions&&pe(t,s,a);const i=a.nodes||[],c=[];for(let o=0,l=i.length;o<l;o++)c.push(r.getDependency("node",i[o]));return Promise.all(c).then(function(o){for(let u=0,b=o.length;u<b;u++)s.add(o[u]);const l=u=>{const b=new Map;for(const[d,f]of r.associations)(d instanceof Dt||d instanceof Kn)&&b.set(d,f);return u.traverse(d=>{const f=r.associations.get(d);f!=null&&b.set(d,f)}),b};return r.associations=l(s),s})}_createAnimationTracks(e,t,a,r,s){const i=[],c=e.name?e.name:e.uuid,o=[];ie[s.path]===ie.weights?e.traverse(function(d){d.morphTargetInfluences&&o.push(d.name?d.name:d.uuid)}):o.push(c);let l;switch(ie[s.path]){case ie.weights:l=Nn;break;case ie.rotation:l=Bn;break;case ie.position:case ie.scale:l=Gn;break;default:switch(a.itemSize){case 1:l=Nn;break;case 2:case 3:default:l=Gn;break}break}const u=r.interpolation!==void 0?cs[r.interpolation]:ba,b=this._getArrayFromAccessor(a);for(let d=0,f=o.length;d<f;d++){const g=new l(o[d]+"."+ie[s.path],t.array,b,u);r.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(g),i.push(g)}return i}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const a=Xt(t.constructor),r=new Float32Array(t.length);for(let s=0,i=t.length;s<i;s++)r[s]=t[s]*a;t=r}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(a){const r=this instanceof Bn?os:fa;return new r(this.times,this.values,this.getValueSize()/3,a)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function ms(n,e,t){const a=e.attributes,r=new Fr;if(a.POSITION!==void 0){const c=t.json.accessors[a.POSITION],o=c.min,l=c.max;if(o!==void 0&&l!==void 0){if(r.set(new Oe(o[0],o[1],o[2]),new Oe(l[0],l[1],l[2])),c.normalized){const u=Xt(Pe[c.componentType]);r.min.multiplyScalar(u),r.max.multiplyScalar(u)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const c=new Oe,o=new Oe;for(let l=0,u=s.length;l<u;l++){const b=s[l];if(b.POSITION!==void 0){const d=t.json.accessors[b.POSITION],f=d.min,g=d.max;if(f!==void 0&&g!==void 0){if(o.setX(Math.max(Math.abs(f[0]),Math.abs(g[0]))),o.setY(Math.max(Math.abs(f[1]),Math.abs(g[1]))),o.setZ(Math.max(Math.abs(f[2]),Math.abs(g[2]))),d.normalized){const m=Xt(Pe[d.componentType]);o.multiplyScalar(m)}c.max(o)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(c)}n.boundingBox=r;const i=new Cr;r.getCenter(i.center),i.radius=r.min.distanceTo(r.max)/2,n.boundingSphere=i}function Un(n,e,t){const a=e.attributes,r=[];function s(i,c){return t.getDependency("accessor",i).then(function(o){n.setAttribute(c,o)})}for(const i in a){const c=Yt[i]||i.toLowerCase();c in n.attributes||r.push(s(a[i],c))}if(e.indices!==void 0&&!n.index){const i=t.getDependency("accessor",e.indices).then(function(c){n.setIndex(c)});r.push(i)}return Ln.workingColorSpace!==ae&&"COLOR_0"in a&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${Ln.workingColorSpace}" not supported.`),ce(n,e),ms(n,e,t),Promise.all(r).then(function(){return e.targets!==void 0?us(n,e.targets,t):n})}var gs=function(){var n="b9H79Tebbbe8Fv9Gbb9Gvuuuuueu9Giuuub9Geueu9Giuuueuikqbeeedddillviebeoweuec:q;iekr;leDo9TW9T9VV95dbH9F9F939H79T9F9J9H229F9Jt9VV7bb8A9TW79O9V9Wt9F9KW9J9V9KW9wWVtW949c919M9MWVbeY9TW79O9V9Wt9F9KW9J9V9KW69U9KW949c919M9MWVbdE9TW79O9V9Wt9F9KW9J9V9KW69U9KW949tWG91W9U9JWbiL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9p9JtblK9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9r919HtbvL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWVT949Wbol79IV9Rbrq:P8Yqdbk;3sezu8Jjjjjbcj;eb9Rgv8Kjjjjbc9:hodnadcefal0mbcuhoaiRbbc:Ge9hmbavaialfgrad9Radz1jjjbhwcj;abad9UhoaicefhldnadTmbaoc;WFbGgocjdaocjd6EhDcbhqinaqae9pmeaDaeaq9RaqaDfae6Egkcsfgocl4cifcd4hxdndndndnaoc9WGgmTmbcbhPcehsawcjdfhzalhHinaraH9Rax6midnaraHaxfgl9RcK6mbczhoinawcj;cbfaogifgoc9WfhOdndndndndnaHaic9WfgAco4fRbbaAci4coG4ciGPlbedibkaO9cb83ibaOcwf9cb83ibxikaOalRblalRbbgAco4gCaCciSgCE86bbaocGfalclfaCfgORbbaAcl4ciGgCaCciSgCE86bbaocVfaOaCfgORbbaAcd4ciGgCaCciSgCE86bbaoc7faOaCfgORbbaAciGgAaAciSgAE86bbaoctfaOaAfgARbbalRbegOco4gCaCciSgCE86bbaoc91faAaCfgARbbaOcl4ciGgCaCciSgCE86bbaoc4faAaCfgARbbaOcd4ciGgCaCciSgCE86bbaoc93faAaCfgARbbaOciGgOaOciSgOE86bbaoc94faAaOfgARbbalRbdgOco4gCaCciSgCE86bbaoc95faAaCfgARbbaOcl4ciGgCaCciSgCE86bbaoc96faAaCfgARbbaOcd4ciGgCaCciSgCE86bbaoc97faAaCfgARbbaOciGgOaOciSgOE86bbaoc98faAaOfgORbbalRbiglco4gAaAciSgAE86bbaoc99faOaAfgORbbalcl4ciGgAaAciSgAE86bbaoc9:faOaAfgORbbalcd4ciGgAaAciSgAE86bbaocufaOaAfgoRbbalciGglalciSglE86bbaoalfhlxdkaOalRbwalRbbgAcl4gCaCcsSgCE86bbaocGfalcwfaCfgORbbaAcsGgAaAcsSgAE86bbaocVfaOaAfgORbbalRbegAcl4gCaCcsSgCE86bbaoc7faOaCfgORbbaAcsGgAaAcsSgAE86bbaoctfaOaAfgORbbalRbdgAcl4gCaCcsSgCE86bbaoc91faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc4faOaAfgORbbalRbigAcl4gCaCcsSgCE86bbaoc93faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc94faOaAfgORbbalRblgAcl4gCaCcsSgCE86bbaoc95faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc96faOaAfgORbbalRbvgAcl4gCaCcsSgCE86bbaoc97faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc98faOaAfgORbbalRbogAcl4gCaCcsSgCE86bbaoc99faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc9:faOaAfgORbbalRbrglcl4gAaAcsSgAE86bbaocufaOaAfgoRbbalcsGglalcsSglE86bbaoalfhlxekaOal8Pbb83bbaOcwfalcwf8Pbb83bbalczfhlkdnaiam9pmbaiczfhoaral9RcL0mekkaiam6mialTmidnakTmbawaPfRbbhOcbhoazhiinaiawcj;cbfaofRbbgAce4cbaAceG9R7aOfgO86bbaiadfhiaocefgoak9hmbkkazcefhzaPcefgPad6hsalhHaPad9hmexvkkcbhlasceGmdxikalaxad2fhCdnakTmbcbhHcehsawcjdfhminaral9Rax6mialTmdalaxfhlawaHfRbbhOcbhoamhiinaiawcj;cbfaofRbbgAce4cbaAceG9R7aOfgO86bbaiadfhiaocefgoak9hmbkamcefhmaHcefgHad6hsaHad9hmbkaChlxikcbhocehsinaral9Rax6mdalTmealaxfhlaocefgoad6hsadao9hmbkaChlxdkcbhlasceGTmekc9:hoxikabaqad2fawcjdfakad2z1jjjb8Aawawcjdfakcufad2fadz1jjjb8Aakaqfhqalmbkc9:hoxekcbc99aral9Radcaadca0ESEhokavcj;ebf8Kjjjjbaok;yzeHu8Jjjjjbc;ae9Rgv8Kjjjjbc9:hodnaeci9UgrcHfal0mbcuhoaiRbbgwc;WeGc;Ge9hmbawcsGgDce0mbavc;abfcFecjez:jjjjb8AavcUf9cu83ibavc8Wf9cu83ibavcyf9cu83ibavcaf9cu83ibavcKf9cu83ibavczf9cu83ibav9cu83iwav9cu83ibaialfc9WfhqaicefgwarfhodnaeTmbcmcsaDceSEhkcbhxcbhmcbhDcbhicbhlindnaoaq9nmbc9:hoxikdndnawRbbgrc;Ve0mbavc;abfalarcl4cu7fcsGcitfgPydlhsaPydbhzdnarcsGgPak9pmbavaiarcu7fcsGcdtfydbaxaPEhraPThPdndnadcd9hmbabaDcetfgHaz87ebaHcdfas87ebaHclfar87ebxekabaDcdtfgHazBdbaHclfasBdbaHcwfarBdbkaxaPfhxavc;abfalcitfgHarBdbaHasBdlavaicdtfarBdbavc;abfalcefcsGglcitfgHazBdbaHarBdlaiaPfhialcefhlxdkdndnaPcsSmbamaPfaPc987fcefhmxekaocefhrao8SbbgPcFeGhHdndnaPcu9mmbarhoxekaocvfhoaHcFbGhHcrhPdninar8SbbgOcFbGaPtaHVhHaOcu9kmearcefhraPcrfgPc8J9hmbxdkkarcefhokaHce4cbaHceG9R7amfhmkdndnadcd9hmbabaDcetfgraz87ebarcdfas87ebarclfam87ebxekabaDcdtfgrazBdbarclfasBdbarcwfamBdbkavc;abfalcitfgramBdbarasBdlavaicdtfamBdbavc;abfalcefcsGglcitfgrazBdbaramBdlaicefhialcefhlxekdnarcpe0mbaxcefgOavaiaqarcsGfRbbgPcl49RcsGcdtfydbaPcz6gHEhravaiaP9RcsGcdtfydbaOaHfgsaPcsGgOEhPaOThOdndnadcd9hmbabaDcetfgzax87ebazcdfar87ebazclfaP87ebxekabaDcdtfgzaxBdbazclfarBdbazcwfaPBdbkavaicdtfaxBdbavc;abfalcitfgzarBdbazaxBdlavaicefgicsGcdtfarBdbavc;abfalcefcsGcitfgzaPBdbazarBdlavaiaHfcsGgicdtfaPBdbavc;abfalcdfcsGglcitfgraxBdbaraPBdlalcefhlaiaOfhiasaOfhxxekaxcbaoRbbgzEgAarc;:eSgrfhsazcsGhCazcl4hXdndnazcs0mbascefhOxekashOavaiaX9RcsGcdtfydbhskdndnaCmbaOcefhxxekaOhxavaiaz9RcsGcdtfydbhOkdndnarTmbaocefhrxekaocdfhrao8SbegHcFeGhPdnaHcu9kmbaocofhAaPcFbGhPcrhodninar8SbbgHcFbGaotaPVhPaHcu9kmearcefhraocrfgoc8J9hmbkaAhrxekarcefhrkaPce4cbaPceG9R7amfgmhAkdndnaXcsSmbarhPxekarcefhPar8SbbgocFeGhHdnaocu9kmbarcvfhsaHcFbGhHcrhodninaP8SbbgrcFbGaotaHVhHarcu9kmeaPcefhPaocrfgoc8J9hmbkashPxekaPcefhPkaHce4cbaHceG9R7amfgmhskdndnaCcsSmbaPhoxekaPcefhoaP8SbbgrcFeGhHdnarcu9kmbaPcvfhOaHcFbGhHcrhrdninao8SbbgPcFbGartaHVhHaPcu9kmeaocefhoarcrfgrc8J9hmbkaOhoxekaocefhokaHce4cbaHceG9R7amfgmhOkdndnadcd9hmbabaDcetfgraA87ebarcdfas87ebarclfaO87ebxekabaDcdtfgraABdbarclfasBdbarcwfaOBdbkavc;abfalcitfgrasBdbaraABdlavaicdtfaABdbavc;abfalcefcsGcitfgraOBdbarasBdlavaicefgicsGcdtfasBdbavc;abfalcdfcsGcitfgraABdbaraOBdlavaiazcz6aXcsSVfgicsGcdtfaOBdbaiaCTaCcsSVfhialcifhlkawcefhwalcsGhlaicsGhiaDcifgDae6mbkkcbc99aoaqSEhokavc;aef8Kjjjjbaok:llevu8Jjjjjbcz9Rhvc9:hodnaecvfal0mbcuhoaiRbbc;:eGc;qe9hmbav9cb83iwaicefhraialfc98fhwdnaeTmbdnadcdSmbcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcdtfaicd4cbaice4ceG9R7avcwfaiceGcdtVgoydbfglBdbaoalBdbaDcefgDae9hmbxdkkcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcetfaicd4cbaice4ceG9R7avcwfaiceGcdtVgoydbfgl87ebaoalBdbaDcefgDae9hmbkkcbc99arawSEhokaok:Lvoeue99dud99eud99dndnadcl9hmbaeTmeindndnabcdfgd8Sbb:Yab8Sbbgi:Ygl:l:tabcefgv8Sbbgo:Ygr:l:tgwJbb;:9cawawNJbbbbawawJbbbb9GgDEgq:mgkaqaicb9iEalMgwawNakaqaocb9iEarMgqaqNMM:r:vglNJbbbZJbbb:;aDEMgr:lJbbb9p9DTmbar:Ohixekcjjjj94hikadai86bbdndnaqalNJbbbZJbbb:;aqJbbbb9GEMgq:lJbbb9p9DTmbaq:Ohdxekcjjjj94hdkavad86bbdndnawalNJbbbZJbbb:;awJbbbb9GEMgw:lJbbb9p9DTmbaw:Ohdxekcjjjj94hdkabad86bbabclfhbaecufgembxdkkaeTmbindndnabclfgd8Ueb:Yab8Uebgi:Ygl:l:tabcdfgv8Uebgo:Ygr:l:tgwJb;:FSawawNJbbbbawawJbbbb9GgDEgq:mgkaqaicb9iEalMgwawNakaqaocb9iEarMgqaqNMM:r:vglNJbbbZJbbb:;aDEMgr:lJbbb9p9DTmbar:Ohixekcjjjj94hikadai87ebdndnaqalNJbbbZJbbb:;aqJbbbb9GEMgq:lJbbb9p9DTmbaq:Ohdxekcjjjj94hdkavad87ebdndnawalNJbbbZJbbb:;awJbbbb9GEMgw:lJbbb9p9DTmbaw:Ohdxekcjjjj94hdkabad87ebabcwfhbaecufgembkkk;siliui99iue99dnaeTmbcbhiabhlindndnJ;Zl81Zalcof8UebgvciV:Y:vgoal8Ueb:YNgrJb;:FSNJbbbZJbbb:;arJbbbb9GEMgw:lJbbb9p9DTmbaw:OhDxekcjjjj94hDkalclf8Uebhqalcdf8UebhkabavcefciGaiVcetfaD87ebdndnaoak:YNgwJb;:FSNJbbbZJbbb:;awJbbbb9GEMgx:lJbbb9p9DTmbax:Ohkxekcjjjj94hkkabavcdfciGaiVcetfak87ebdndnaoaq:YNgoJb;:FSNJbbbZJbbb:;aoJbbbb9GEMgx:lJbbb9p9DTmbax:Ohqxekcjjjj94hqkabavcufciGaiVcetfaq87ebdndnJbbjZararN:tawawN:taoaoN:tgrJbbbbarJbbbb9GE:rJb;:FSNJbbbZMgr:lJbbb9p9DTmbar:Ohqxekcjjjj94hqkabavciGaiVcetfaq87ebalcwfhlaiclfhiaecufgembkkk9mbdnadcd4ae2geTmbinababydbgdcwtcw91:Yadce91cjjj;8ifcjjj98G::NUdbabclfhbaecufgembkkk9teiucbcbydj1jjbgeabcifc98GfgbBdj1jjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaik;LeeeudndnaeabVciGTmbabhixekdndnadcz9pmbabhixekabhiinaiaeydbBdbaiclfaeclfydbBdbaicwfaecwfydbBdbaicxfaecxfydbBdbaiczfhiaeczfheadc9Wfgdcs0mbkkadcl6mbinaiaeydbBdbaeclfheaiclfhiadc98fgdci0mbkkdnadTmbinaiaeRbb86bbaicefhiaecefheadcufgdmbkkabk;aeedudndnabciGTmbabhixekaecFeGc:b:c:ew2hldndnadcz9pmbabhixekabhiinaialBdbaicxfalBdbaicwfalBdbaiclfalBdbaiczfhiadc9Wfgdcs0mbkkadcl6mbinaialBdbaiclfhiadc98fgdci0mbkkdnadTmbinaiae86bbaicefhiadcufgdmbkkabkkkebcjwklz9Kbb",e="b9H79TebbbeKl9Gbb9Gvuuuuueu9Giuuub9Geueuikqbbebeedddilve9Weeeviebeoweuec:q;Aekr;leDo9TW9T9VV95dbH9F9F939H79T9F9J9H229F9Jt9VV7bb8A9TW79O9V9Wt9F9KW9J9V9KW9wWVtW949c919M9MWVbdY9TW79O9V9Wt9F9KW9J9V9KW69U9KW949c919M9MWVblE9TW79O9V9Wt9F9KW9J9V9KW69U9KW949tWG91W9U9JWbvL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9p9JtboK9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9r919HtbrL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWVT949Wbwl79IV9RbDq;t9tqlbzik9:evu8Jjjjjbcz9Rhbcbheincbhdcbhiinabcwfadfaicjuaead4ceGglE86bbaialfhiadcefgdcw9hmbkaec:q:yjjbfai86bbaecitc:q1jjbfab8Piw83ibaecefgecjd9hmbkk;h8JlHud97euo978Jjjjjbcj;kb9Rgv8Kjjjjbc9:hodnadcefal0mbcuhoaiRbbc:Ge9hmbavaialfgrad9Rad;8qbbcj;abad9UhoaicefhldnadTmbaoc;WFbGgocjdaocjd6EhwcbhDinaDae9pmeawaeaD9RaDawfae6Egqcsfgoc9WGgkci2hxakcethmaocl4cifcd4hPabaDad2fhscbhzdnincehHalhOcbhAdninaraO9RaP6miavcj;cbfaAak2fhCaOaPfhlcbhidnakc;ab6mbaral9Rc;Gb6mbcbhoinaCaofhidndndndndnaOaoco4fRbbgXciGPlbedibkaipxbbbbbbbbbbbbbbbbpklbxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaialpbbbpklbalczfhlkdndndndndnaXcd4ciGPlbedibkaipxbbbbbbbbbbbbbbbbpklzxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklzalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklzalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaialpbbbpklzalczfhlkdndndndndnaXcl4ciGPlbedibkaipxbbbbbbbbbbbbbbbbpklaxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklaalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklaalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaialpbbbpklaalczfhlkdndndndndnaXco4Plbedibkaipxbbbbbbbbbbbbbbbbpkl8WxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibaXc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spkl8WalclfaYpQbfaXc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibaXc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spkl8WalcwfaYpQbfaXc:q:yjjbfRbbfhlxekaialpbbbpkl8Walczfhlkaoc;abfhiaocjefak0meaihoaral9Rc;Fb0mbkkdndnaiak9pmbaici4hoinaral9RcK6mdaCaifhXdndndndndnaOaico4fRbbaocoG4ciGPlbedibkaXpxbbbbbbbbbbbbbbbbpklbxikaXalpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaXalpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaXalpbbbpklbalczfhlkaocdfhoaiczfgiak6mbkkalTmbaAci6hHalhOaAcefgohAaoclSmdxekkcbhlaHceGmdkdnakTmbavcjdfazfhiavazfpbdbhYcbhXinaiavcj;cbfaXfgopblbgLcep9TaLpxeeeeeeeeeeeeeeeegQp9op9Hp9rgLaoakfpblbg8Acep9Ta8AaQp9op9Hp9rg8ApmbzeHdOiAlCvXoQrLgEaoamfpblbg3cep9Ta3aQp9op9Hp9rg3aoaxfpblbg5cep9Ta5aQp9op9Hp9rg5pmbzeHdOiAlCvXoQrLg8EpmbezHdiOAlvCXorQLgQaQpmbedibedibedibediaYp9UgYp9AdbbaiadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfgoaYaEa8EpmwDKYqk8AExm35Ps8E8FgQaQpmbedibedibedibedip9UgYp9AdbbaoadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfgoaYaLa8ApmwKDYq8AkEx3m5P8Es8FgLa3a5pmwKDYq8AkEx3m5P8Es8Fg8ApmbezHdiOAlvCXorQLgQaQpmbedibedibedibedip9UgYp9AdbbaoadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfgoaYaLa8ApmwDKYqk8AExm35Ps8E8FgQaQpmbedibedibedibedip9UgYp9AdbbaoadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfhiaXczfgXak6mbkkazclfgzad6mbkasavcjdfaqad2;8qbbavavcjdfaqcufad2fad;8qbbaqaDfhDc9:hoalmexikkc9:hoxekcbc99aral9Radcaadca0ESEhokavcj;kbf8Kjjjjbaokwbz:bjjjbk;uzeHu8Jjjjjbc;ae9Rgv8Kjjjjbc9:hodnaeci9UgrcHfal0mbcuhoaiRbbgwc;WeGc;Ge9hmbawcsGgDce0mbavc;abfcFecje;8kbavcUf9cu83ibavc8Wf9cu83ibavcyf9cu83ibavcaf9cu83ibavcKf9cu83ibavczf9cu83ibav9cu83iwav9cu83ibaialfc9WfhqaicefgwarfhodnaeTmbcmcsaDceSEhkcbhxcbhmcbhDcbhicbhlindnaoaq9nmbc9:hoxikdndnawRbbgrc;Ve0mbavc;abfalarcl4cu7fcsGcitfgPydlhsaPydbhzdnarcsGgPak9pmbavaiarcu7fcsGcdtfydbaxaPEhraPThPdndnadcd9hmbabaDcetfgHaz87ebaHcdfas87ebaHclfar87ebxekabaDcdtfgHazBdbaHclfasBdbaHcwfarBdbkaxaPfhxavc;abfalcitfgHarBdbaHasBdlavaicdtfarBdbavc;abfalcefcsGglcitfgHazBdbaHarBdlaiaPfhialcefhlxdkdndnaPcsSmbamaPfaPc987fcefhmxekaocefhrao8SbbgPcFeGhHdndnaPcu9mmbarhoxekaocvfhoaHcFbGhHcrhPdninar8SbbgOcFbGaPtaHVhHaOcu9kmearcefhraPcrfgPc8J9hmbxdkkarcefhokaHce4cbaHceG9R7amfhmkdndnadcd9hmbabaDcetfgraz87ebarcdfas87ebarclfam87ebxekabaDcdtfgrazBdbarclfasBdbarcwfamBdbkavc;abfalcitfgramBdbarasBdlavaicdtfamBdbavc;abfalcefcsGglcitfgrazBdbaramBdlaicefhialcefhlxekdnarcpe0mbaxcefgOavaiaqarcsGfRbbgPcl49RcsGcdtfydbaPcz6gHEhravaiaP9RcsGcdtfydbaOaHfgsaPcsGgOEhPaOThOdndnadcd9hmbabaDcetfgzax87ebazcdfar87ebazclfaP87ebxekabaDcdtfgzaxBdbazclfarBdbazcwfaPBdbkavaicdtfaxBdbavc;abfalcitfgzarBdbazaxBdlavaicefgicsGcdtfarBdbavc;abfalcefcsGcitfgzaPBdbazarBdlavaiaHfcsGgicdtfaPBdbavc;abfalcdfcsGglcitfgraxBdbaraPBdlalcefhlaiaOfhiasaOfhxxekaxcbaoRbbgzEgAarc;:eSgrfhsazcsGhCazcl4hXdndnazcs0mbascefhOxekashOavaiaX9RcsGcdtfydbhskdndnaCmbaOcefhxxekaOhxavaiaz9RcsGcdtfydbhOkdndnarTmbaocefhrxekaocdfhrao8SbegHcFeGhPdnaHcu9kmbaocofhAaPcFbGhPcrhodninar8SbbgHcFbGaotaPVhPaHcu9kmearcefhraocrfgoc8J9hmbkaAhrxekarcefhrkaPce4cbaPceG9R7amfgmhAkdndnaXcsSmbarhPxekarcefhPar8SbbgocFeGhHdnaocu9kmbarcvfhsaHcFbGhHcrhodninaP8SbbgrcFbGaotaHVhHarcu9kmeaPcefhPaocrfgoc8J9hmbkashPxekaPcefhPkaHce4cbaHceG9R7amfgmhskdndnaCcsSmbaPhoxekaPcefhoaP8SbbgrcFeGhHdnarcu9kmbaPcvfhOaHcFbGhHcrhrdninao8SbbgPcFbGartaHVhHaPcu9kmeaocefhoarcrfgrc8J9hmbkaOhoxekaocefhokaHce4cbaHceG9R7amfgmhOkdndnadcd9hmbabaDcetfgraA87ebarcdfas87ebarclfaO87ebxekabaDcdtfgraABdbarclfasBdbarcwfaOBdbkavc;abfalcitfgrasBdbaraABdlavaicdtfaABdbavc;abfalcefcsGcitfgraOBdbarasBdlavaicefgicsGcdtfasBdbavc;abfalcdfcsGcitfgraABdbaraOBdlavaiazcz6aXcsSVfgicsGcdtfaOBdbaiaCTaCcsSVfhialcifhlkawcefhwalcsGhlaicsGhiaDcifgDae6mbkkcbc99aoaqSEhokavc;aef8Kjjjjbaok:llevu8Jjjjjbcz9Rhvc9:hodnaecvfal0mbcuhoaiRbbc;:eGc;qe9hmbav9cb83iwaicefhraialfc98fhwdnaeTmbdnadcdSmbcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcdtfaicd4cbaice4ceG9R7avcwfaiceGcdtVgoydbfglBdbaoalBdbaDcefgDae9hmbxdkkcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcetfaicd4cbaice4ceG9R7avcwfaiceGcdtVgoydbfgl87ebaoalBdbaDcefgDae9hmbkkcbc99arawSEhokaok:EPliuo97eue978Jjjjjbca9Rhidndnadcl9hmbdnaec98GglTmbcbhvabhdinadadpbbbgocKp:RecKp:Sep;6egraocwp:RecKp:Sep;6earp;Geaoczp:RecKp:Sep;6egwp;Gep;Kep;LegDpxbbbbbbbbbbbbbbbbp:2egqarpxbbbjbbbjbbbjbbbjgkp9op9rp;Kegrpxbb;:9cbb;:9cbb;:9cbb;:9cararp;MeaDaDp;Meawaqawakp9op9rp;Kegrarp;Mep;Kep;Kep;Jep;Negwp;Mepxbbn0bbn0bbn0bbn0gqp;KepxFbbbFbbbFbbbFbbbp9oaopxbbbFbbbFbbbFbbbFp9op9qarawp;Meaqp;Kecwp:RepxbFbbbFbbbFbbbFbbp9op9qaDawp;Meaqp;Keczp:RepxbbFbbbFbbbFbbbFbp9op9qpkbbadczfhdavclfgval6mbkkalae9pmeaiaeciGgvcdtgdVcbczad9R;8kbaiabalcdtfglad;8qbbdnavTmbaiaipblbgocKp:RecKp:Sep;6egraocwp:RecKp:Sep;6earp;Geaoczp:RecKp:Sep;6egwp;Gep;Kep;LegDpxbbbbbbbbbbbbbbbbp:2egqarpxbbbjbbbjbbbjbbbjgkp9op9rp;Kegrpxbb;:9cbb;:9cbb;:9cbb;:9cararp;MeaDaDp;Meawaqawakp9op9rp;Kegrarp;Mep;Kep;Kep;Jep;Negwp;Mepxbbn0bbn0bbn0bbn0gqp;KepxFbbbFbbbFbbbFbbbp9oaopxbbbFbbbFbbbFbbbFp9op9qarawp;Meaqp;Kecwp:RepxbFbbbFbbbFbbbFbbp9op9qaDawp;Meaqp;Keczp:RepxbbFbbbFbbbFbbbFbp9op9qpklbkalaiad;8qbbskdnaec98GgxTmbcbhvabhdinadczfglalpbbbgopxbbbbbbFFbbbbbbFFgkp9oadpbbbgDaopmlvorxmPsCXQL358E8FpxFubbFubbFubbFubbp9op;6eaDaopmbediwDqkzHOAKY8AEgoczp:Sep;6egrp;Geaoczp:Reczp:Sep;6egwp;Gep;Kep;Legopxb;:FSb;:FSb;:FSb;:FSawaopxbbbbbbbbbbbbbbbbp:2egqawpxbbbjbbbjbbbjbbbjgmp9op9rp;Kegwawp;Meaoaop;Mearaqaramp9op9rp;Kegoaop;Mep;Kep;Kep;Jep;Negrp;Mepxbbn0bbn0bbn0bbn0gqp;Keczp:Reawarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9op9qgwaoarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9ogopmwDKYqk8AExm35Ps8E8Fp9qpkbbadaDakp9oawaopmbezHdiOAlvCXorQLp9qpkbbadcafhdavclfgvax6mbkkaxae9pmbaiaeciGgvcitgdfcbcaad9R;8kbaiabaxcitfglad;8qbbdnavTmbaiaipblzgopxbbbbbbFFbbbbbbFFgkp9oaipblbgDaopmlvorxmPsCXQL358E8FpxFubbFubbFubbFubbp9op;6eaDaopmbediwDqkzHOAKY8AEgoczp:Sep;6egrp;Geaoczp:Reczp:Sep;6egwp;Gep;Kep;Legopxb;:FSb;:FSb;:FSb;:FSawaopxbbbbbbbbbbbbbbbbp:2egqawpxbbbjbbbjbbbjbbbjgmp9op9rp;Kegwawp;Meaoaop;Mearaqaramp9op9rp;Kegoaop;Mep;Kep;Kep;Jep;Negrp;Mepxbbn0bbn0bbn0bbn0gqp;Keczp:Reawarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9op9qgwaoarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9ogopmwDKYqk8AExm35Ps8E8Fp9qpklzaiaDakp9oawaopmbezHdiOAlvCXorQLp9qpklbkalaiad;8qbbkk;4wllue97euv978Jjjjjbc8W9Rhidnaec98GglTmbcbhvabhoinaiaopbbbgraoczfgwpbbbgDpmlvorxmPsCXQL358E8Fgqczp:Segkclp:RepklbaopxbbjZbbjZbbjZbbjZpx;Zl81Z;Zl81Z;Zl81Z;Zl81Zakpxibbbibbbibbbibbbp9qp;6ep;NegkaraDpmbediwDqkzHOAKY8AEgrczp:Reczp:Sep;6ep;MegDaDp;Meakarczp:Sep;6ep;Megxaxp;Meakaqczp:Reczp:Sep;6ep;Megqaqp;Mep;Kep;Kep;Lepxbbbbbbbbbbbbbbbbp:4ep;Jepxb;:FSb;:FSb;:FSb;:FSgkp;Mepxbbn0bbn0bbn0bbn0grp;KepxFFbbFFbbFFbbFFbbgmp9oaxakp;Mearp;Keczp:Rep9qgxaqakp;Mearp;Keczp:ReaDakp;Mearp;Keamp9op9qgkpmbezHdiOAlvCXorQLgrp5baipblbpEb:T:j83ibaocwfarp5eaipblbpEe:T:j83ibawaxakpmwDKYqk8AExm35Ps8E8Fgkp5baipblbpEd:T:j83ibaocKfakp5eaipblbpEi:T:j83ibaocafhoavclfgval6mbkkdnalae9pmbaiaeciGgvcitgofcbcaao9R;8kbaiabalcitfgwao;8qbbdnavTmbaiaipblbgraipblzgDpmlvorxmPsCXQL358E8Fgqczp:Segkclp:RepklaaipxbbjZbbjZbbjZbbjZpx;Zl81Z;Zl81Z;Zl81Z;Zl81Zakpxibbbibbbibbbibbbp9qp;6ep;NegkaraDpmbediwDqkzHOAKY8AEgrczp:Reczp:Sep;6ep;MegDaDp;Meakarczp:Sep;6ep;Megxaxp;Meakaqczp:Reczp:Sep;6ep;Megqaqp;Mep;Kep;Kep;Lepxbbbbbbbbbbbbbbbbp:4ep;Jepxb;:FSb;:FSb;:FSb;:FSgkp;Mepxbbn0bbn0bbn0bbn0grp;KepxFFbbFFbbFFbbFFbbgmp9oaxakp;Mearp;Keczp:Rep9qgxaqakp;Mearp;Keczp:ReaDakp;Mearp;Keamp9op9qgkpmbezHdiOAlvCXorQLgrp5baipblapEb:T:j83ibaiarp5eaipblapEe:T:j83iwaiaxakpmwDKYqk8AExm35Ps8E8Fgkp5baipblapEd:T:j83izaiakp5eaipblapEi:T:j83iKkawaiao;8qbbkk:Pddiue978Jjjjjbc;ab9Rhidnadcd4ae2glc98GgvTmbcbhdabheinaeaepbbbgocwp:Recwp:Sep;6eaocep:SepxbbjZbbjZbbjZbbjZp:UepxbbjFbbjFbbjFbbjFp9op;Mepkbbaeczfheadclfgdav6mbkkdnaval9pmbaialciGgdcdtgeVcbc;abae9R;8kbaiabavcdtfgvae;8qbbdnadTmbaiaipblbgocwp:Recwp:Sep;6eaocep:SepxbbjZbbjZbbjZbbjZp:UepxbbjFbbjFbbjFbbjFp9op;Mepklbkavaiae;8qbbkk9teiucbcbydj1jjbgeabcifc98GfgbBdj1jjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaikkkebcjwklz9Tbb",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),a=new Uint8Array([32,0,65,2,1,106,34,33,3,128,11,4,13,64,6,253,10,7,15,116,127,5,8,12,40,16,19,54,20,9,27,255,113,17,42,67,24,23,146,148,18,14,22,45,70,69,56,114,101,21,25,63,75,136,108,28,118,29,73,115]);if(typeof WebAssembly!="object")return{supported:!1};var r=WebAssembly.validate(t)?e:n,s,i=WebAssembly.instantiate(c(r),{}).then(function(p){s=p.instance,s.exports.__wasm_call_ctors()});function c(p){for(var h=new Uint8Array(p.length),w=0;w<p.length;++w){var v=p.charCodeAt(w);h[w]=v>96?v-97:v>64?v-39:v+4}for(var x=0,w=0;w<p.length;++w)h[x++]=h[w]<60?a[h[w]]:(h[w]-60)*64+h[++w];return h.buffer.slice(0,x)}function o(p,h,w,v,x,k){var A=s.exports.sbrk,j=w+3&-4,_=A(j*v),P=A(x.length),O=new Uint8Array(s.exports.memory.buffer);O.set(x,P);var K=p(_,w,v,P,x.length);if(K==0&&k&&k(_,j,v),h.set(O.subarray(_,_+w*v)),A(_-A(0)),K!=0)throw new Error("Malformed buffer data: "+K)}var l={NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},u={ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"},b=[],d=0;function f(p){var h={object:new Worker(p),pending:0,requests:{}};return h.object.onmessage=function(w){var v=w.data;h.pending-=v.count,h.requests[v.id][v.action](v.value),delete h.requests[v.id]},h}function g(p){for(var h="var instance; var ready = WebAssembly.instantiate(new Uint8Array(["+new Uint8Array(c(r))+"]), {}).then(function(result) { instance = result.instance; instance.exports.__wasm_call_ctors(); });self.onmessage = workerProcess;"+o.toString()+y.toString(),w=new Blob([h],{type:"text/javascript"}),v=URL.createObjectURL(w),x=0;x<p;++x)b[x]=f(v);URL.revokeObjectURL(v)}function m(p,h,w,v,x){for(var k=b[0],A=1;A<b.length;++A)b[A].pending<k.pending&&(k=b[A]);return new Promise(function(j,_){var P=new Uint8Array(w),O=d++;k.pending+=p,k.requests[O]={resolve:j,reject:_},k.object.postMessage({id:O,count:p,size:h,source:P,mode:v,filter:x},[P.buffer])})}function y(p){i.then(function(){var h=p.data;try{var w=new Uint8Array(h.count*h.size);o(s.exports[h.mode],w,h.count,h.size,h.source,s.exports[h.filter]),self.postMessage({id:h.id,count:h.count,action:"resolve",value:w},[w.buffer])}catch(v){self.postMessage({id:h.id,count:h.count,action:"reject",value:v})}})}return{ready:i,supported:!0,useWorkers:function(p){g(p)},decodeVertexBuffer:function(p,h,w,v,x){o(s.exports.meshopt_decodeVertexBuffer,p,h,w,v,s.exports[l[x]])},decodeIndexBuffer:function(p,h,w,v){o(s.exports.meshopt_decodeIndexBuffer,p,h,w,v)},decodeIndexSequence:function(p,h,w,v){o(s.exports.meshopt_decodeIndexSequence,p,h,w,v)},decodeGltfBuffer:function(p,h,w,v,x,k){o(s.exports[u[x]],p,h,w,v,s.exports[l[k]])},decodeGltfBufferAsync:function(p,h,w,v,x){return b.length>0?m(p,h,w,u[v],l[x]):i.then(function(){var k=new Uint8Array(p*h);return o(s.exports[u[v]],k,p,h,w,s.exports[l[x]]),k})}}}();const C=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,L=Object.keys,I=Array.isArray;function q(n,e){return typeof e!="object"||L(e).forEach(function(t){n[t]=e[t]}),n}typeof Promise>"u"||C.Promise||(C.Promise=Promise);const Je=Object.getPrototypeOf,ys={}.hasOwnProperty;function Q(n,e){return ys.call(n,e)}function De(n,e){typeof e=="function"&&(e=e(Je(n))),(typeof Reflect>"u"?L:Reflect.ownKeys)(e).forEach(t=>{te(n,t,e[t])})}const pa=Object.defineProperty;function te(n,e,t,a){pa(n,e,q(t&&Q(t,"get")&&typeof t.get=="function"?{get:t.get,set:t.set,configurable:!0}:{value:t,configurable:!0,writable:!0},a))}function Fe(n){return{from:function(e){return n.prototype=Object.create(e.prototype),te(n.prototype,"constructor",n),{extend:De.bind(null,n.prototype)}}}}const vs=Object.getOwnPropertyDescriptor;function kn(n,e){let t;return vs(n,e)||(t=Je(n))&&kn(t,e)}const ws=[].slice;function kt(n,e,t){return ws.call(n,e,t)}function ma(n,e){return e(n)}function He(n){if(!n)throw new Error("Assertion Failed")}function ga(n){C.setImmediate?setImmediate(n):setTimeout(n,0)}function ya(n,e){return n.reduce((t,a,r)=>{var s=e(a,r);return s&&(t[s[0]]=s[1]),t},{})}function ne(n,e){if(typeof e=="string"&&Q(n,e))return n[e];if(!e)return n;if(typeof e!="string"){for(var t=[],a=0,r=e.length;a<r;++a){var s=ne(n,e[a]);t.push(s)}return t}var i=e.indexOf(".");if(i!==-1){var c=n[e.substr(0,i)];return c==null?void 0:ne(c,e.substr(i+1))}}function V(n,e,t){if(n&&e!==void 0&&(!("isFrozen"in Object)||!Object.isFrozen(n)))if(typeof e!="string"&&"length"in e){He(typeof t!="string"&&"length"in t);for(var a=0,r=e.length;a<r;++a)V(n,e[a],t[a])}else{var s=e.indexOf(".");if(s!==-1){var i=e.substr(0,s),c=e.substr(s+1);if(c==="")t===void 0?I(n)&&!isNaN(parseInt(i))?n.splice(i,1):delete n[i]:n[i]=t;else{var o=n[i];o&&Q(n,i)||(o=n[i]={}),V(o,c,t)}}else t===void 0?I(n)&&!isNaN(parseInt(e))?n.splice(e,1):delete n[e]:n[e]=t}}function va(n){var e={};for(var t in n)Q(n,t)&&(e[t]=n[t]);return e}const As=[].concat;function wa(n){return As.apply([],n)}const Aa="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(wa([8,16,32,64].map(n=>["Int","Uint","Float"].map(e=>e+n+"Array")))).filter(n=>C[n]),xs=Aa.map(n=>C[n]);ya(Aa,n=>[n,!0]);let le=null;function rt(n){le=typeof WeakMap<"u"&&new WeakMap;const e=Jt(n);return le=null,e}function Jt(n){if(!n||typeof n!="object")return n;let e=le&&le.get(n);if(e)return e;if(I(n)){e=[],le&&le.set(n,e);for(var t=0,a=n.length;t<a;++t)e.push(Jt(n[t]))}else if(xs.indexOf(n.constructor)>=0)e=n;else{const s=Je(n);for(var r in e=s===Object.prototype?{}:Object.create(s),le&&le.set(n,e),n)Q(n,r)&&(e[r]=Jt(n[r]))}return e}const{toString:ks}={};function Zt(n){return ks.call(n).slice(8,-1)}const $t=typeof Symbol<"u"?Symbol.iterator:"@@iterator",_s=typeof $t=="symbol"?function(n){var e;return n!=null&&(e=n[$t])&&e.apply(n)}:function(){return null},Se={};function $(n){var e,t,a,r;if(arguments.length===1){if(I(n))return n.slice();if(this===Se&&typeof n=="string")return[n];if(r=_s(n)){for(t=[];!(a=r.next()).done;)t.push(a.value);return t}if(n==null)return[n];if(typeof(e=n.length)=="number"){for(t=new Array(e);e--;)t[e]=n[e];return t}return[n]}for(e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return t}const _n=typeof Symbol<"u"?n=>n[Symbol.toStringTag]==="AsyncFunction":()=>!1;var X=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function xa(n,e){X=n,ka=e}var ka=()=>!0;const Ts=!new Error("").stack;function _e(){if(Ts)try{throw _e.arguments,new Error}catch(n){return n}return new Error}function en(n,e){var t=n.stack;return t?(e=e||0,t.indexOf(n.name)===0&&(e+=(n.name+n.message).split(`
`).length),t.split(`
`).slice(e).filter(ka).map(a=>`
`+a).join("")):""}var _a=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Tn=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(_a),Es={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Ce(n,e){this._e=_e(),this.name=n,this.message=e}function Ta(n,e){return n+". Errors: "+Object.keys(e).map(t=>e[t].toString()).filter((t,a,r)=>r.indexOf(t)===a).join(`
`)}function _t(n,e,t,a){this._e=_e(),this.failures=e,this.failedKeys=a,this.successCount=t,this.message=Ta(n,e)}function Ue(n,e){this._e=_e(),this.name="BulkError",this.failures=Object.keys(e).map(t=>e[t]),this.failuresByPos=e,this.message=Ta(n,e)}Fe(Ce).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+en(this._e,2))}},toString:function(){return this.name+": "+this.message}}),Fe(_t).from(Ce),Fe(Ue).from(Ce);var En=Tn.reduce((n,e)=>(n[e]=e+"Error",n),{});const Rs=Ce;var R=Tn.reduce((n,e)=>{var t=e+"Error";function a(r,s){this._e=_e(),this.name=t,r?typeof r=="string"?(this.message=`${r}${s?`
 `+s:""}`,this.inner=s||null):typeof r=="object"&&(this.message=`${r.name} ${r.message}`,this.inner=r):(this.message=Es[e]||t,this.inner=null)}return Fe(a).from(Rs),n[e]=a,n},{});R.Syntax=SyntaxError,R.Type=TypeError,R.Range=RangeError;var Qn=_a.reduce((n,e)=>(n[e+"Error"]=R[e],n),{}),pt=Tn.reduce((n,e)=>(["Syntax","Type","Range"].indexOf(e)===-1&&(n[e+"Error"]=R[e]),n),{});function F(){}function Ze(n){return n}function js(n,e){return n==null||n===Ze?e:function(t){return e(n(t))}}function xe(n,e){return function(){n.apply(this,arguments),e.apply(this,arguments)}}function Ss(n,e){return n===F?e:function(){var t=n.apply(this,arguments);t!==void 0&&(arguments[0]=t);var a=this.onsuccess,r=this.onerror;this.onsuccess=null,this.onerror=null;var s=e.apply(this,arguments);return a&&(this.onsuccess=this.onsuccess?xe(a,this.onsuccess):a),r&&(this.onerror=this.onerror?xe(r,this.onerror):r),s!==void 0?s:t}}function Os(n,e){return n===F?e:function(){n.apply(this,arguments);var t=this.onsuccess,a=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),t&&(this.onsuccess=this.onsuccess?xe(t,this.onsuccess):t),a&&(this.onerror=this.onerror?xe(a,this.onerror):a)}}function Ps(n,e){return n===F?e:function(t){var a=n.apply(this,arguments);q(t,a);var r=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var i=e.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?xe(r,this.onsuccess):r),s&&(this.onerror=this.onerror?xe(s,this.onerror):s),a===void 0?i===void 0?void 0:i:q(a,i)}}function Fs(n,e){return n===F?e:function(){return e.apply(this,arguments)!==!1&&n.apply(this,arguments)}}function Rn(n,e){return n===F?e:function(){var t=n.apply(this,arguments);if(t&&typeof t.then=="function"){for(var a=this,r=arguments.length,s=new Array(r);r--;)s[r]=arguments[r];return t.then(function(){return e.apply(a,s)})}return e.apply(this,arguments)}}pt.ModifyError=_t,pt.DexieError=Ce,pt.BulkError=Ue;var $e={};const Ea=100,[tn,Tt,nn]=typeof Promise>"u"?[]:(()=>{let n=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[n,Je(n),n];const e=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[e,Je(e),n]})(),Ra=Tt&&Tt.then,mt=tn&&tn.constructor,jn=!!nn;var an=!1,Cs=nn?()=>{nn.then(ot)}:C.setImmediate?setImmediate.bind(null,ot):C.MutationObserver?()=>{var n=document.createElement("div");new MutationObserver(()=>{ot(),n=null}).observe(n,{attributes:!0}),n.setAttribute("i","1")}:()=>{setTimeout(ot,0)},Qe=function(n,e){qe.push([n,e]),Et&&(Cs(),Et=!1)},rn=!0,Et=!0,ye=[],gt=[],sn=null,on=Ze,Me={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Yn,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(n=>{try{Yn(n[0],n[1])}catch{}})}},E=Me,qe=[],ve=0,yt=[];function T(n){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=F,this._lib=!1;var e=this._PSD=E;if(X&&(this._stackHolder=_e(),this._prev=null,this._numPrev=0),typeof n!="function"){if(n!==$e)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&ln(this,this._value))}this._state=null,this._value=null,++e.ref,Sa(this,n)}const cn={get:function(){var n=E,e=Rt;function t(a,r){var s=!n.global&&(n!==E||e!==Rt);const i=s&&!re();var c=new T((o,l)=>{Sn(this,new ja(jt(a,n,s,i),jt(r,n,s,i),o,l,n))});return X&&Fa(c,this),c}return t.prototype=$e,t},set:function(n){te(this,"then",n&&n.prototype===$e?cn:{get:function(){return n},set:cn.set})}};function ja(n,e,t,a,r){this.onFulfilled=typeof n=="function"?n:null,this.onRejected=typeof e=="function"?e:null,this.resolve=t,this.reject=a,this.psd=r}function Sa(n,e){try{e(t=>{if(n._state===null){if(t===n)throw new TypeError("A promise cannot be resolved with itself.");var a=n._lib&&st();t&&typeof t.then=="function"?Sa(n,(r,s)=>{t instanceof T?t._then(r,s):t.then(r,s)}):(n._state=!0,n._value=t,Oa(n)),a&&it()}},ln.bind(null,n))}catch(t){ln(n,t)}}function ln(n,e){if(gt.push(e),n._state===null){var t=n._lib&&st();e=on(e),n._state=!1,n._value=e,X&&e!==null&&typeof e=="object"&&!e._promise&&function(a,r,s){try{a.apply(null,s)}catch(i){r&&r(i)}}(()=>{var a=kn(e,"stack");e._promise=n,te(e,"stack",{get:()=>an?a&&(a.get?a.get.apply(e):a.value):n.stack})}),function(a){ye.some(r=>r._value===a._value)||ye.push(a)}(n),Oa(n),t&&it()}}function Oa(n){var e=n._listeners;n._listeners=[];for(var t=0,a=e.length;t<a;++t)Sn(n,e[t]);var r=n._PSD;--r.ref||r.finalize(),ve===0&&(++ve,Qe(()=>{--ve==0&&On()},[]))}function Sn(n,e){if(n._state!==null){var t=n._state?e.onFulfilled:e.onRejected;if(t===null)return(n._state?e.resolve:e.reject)(n._value);++e.psd.ref,++ve,Qe(Ms,[t,n,e])}else n._listeners.push(e)}function Ms(n,e,t){try{sn=e;var a,r=e._value;e._state?a=n(r):(gt.length&&(gt=[]),a=n(r),gt.indexOf(r)===-1&&function(s){for(var i=ye.length;i;)if(ye[--i]._value===s._value)return void ye.splice(i,1)}(e)),t.resolve(a)}catch(s){t.reject(s)}finally{sn=null,--ve==0&&On(),--t.psd.ref||t.psd.finalize()}}function Pa(n,e,t){if(e.length===t)return e;var a="";if(n._state===!1){var r,s,i=n._value;i!=null?(r=i.name||"Error",s=i.message||i,a=en(i,0)):(r=i,s=""),e.push(r+(s?": "+s:"")+a)}return X&&((a=en(n._stackHolder,2))&&e.indexOf(a)===-1&&e.push(a),n._prev&&Pa(n._prev,e,t)),e}function Fa(n,e){var t=e?e._numPrev+1:0;t<100&&(n._prev=e,n._numPrev=t)}function ot(){st()&&it()}function st(){var n=rn;return rn=!1,Et=!1,n}function it(){var n,e,t;do for(;qe.length>0;)for(n=qe,qe=[],t=n.length,e=0;e<t;++e){var a=n[e];a[0].apply(null,a[1])}while(qe.length>0);rn=!0,Et=!0}function On(){var n=ye;ye=[],n.forEach(a=>{a._PSD.onunhandled.call(null,a._value,a)});for(var e=yt.slice(0),t=e.length;t;)e[--t]()}function ct(n){return new T($e,!1,n)}function M(n,e){var t=E;return function(){var a=st(),r=E;try{return de(t,!0),n.apply(this,arguments)}catch(s){e&&e(s)}finally{de(r,!1),a&&it()}}}De(T.prototype,{then:cn,_then:function(n,e){Sn(this,new ja(null,null,n,e,E))},catch:function(n){if(arguments.length===1)return this.then(null,n);var e=arguments[0],t=arguments[1];return typeof e=="function"?this.then(null,a=>a instanceof e?t(a):ct(a)):this.then(null,a=>a&&a.name===e?t(a):ct(a))},finally:function(n){return this.then(e=>(n(),e),e=>(n(),ct(e)))},stack:{get:function(){if(this._stack)return this._stack;try{an=!0;var n=Pa(this,[],20).join(`
From previous: `);return this._state!==null&&(this._stack=n),n}finally{an=!1}}},timeout:function(n,e){return n<1/0?new T((t,a)=>{var r=setTimeout(()=>a(new R.Timeout(e)),n);this.then(t,a).finally(clearTimeout.bind(null,r))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&te(T.prototype,Symbol.toStringTag,"Dexie.Promise"),Me.env=Ca(),De(T,{all:function(){var n=$.apply(null,arguments).map(lt);return new T(function(e,t){n.length===0&&e([]);var a=n.length;n.forEach((r,s)=>T.resolve(r).then(i=>{n[s]=i,--a||e(n)},t))})},resolve:n=>{if(n instanceof T)return n;if(n&&typeof n.then=="function")return new T((t,a)=>{n.then(t,a)});var e=new T($e,!0,n);return Fa(e,sn),e},reject:ct,race:function(){var n=$.apply(null,arguments).map(lt);return new T((e,t)=>{n.map(a=>T.resolve(a).then(e,t))})},PSD:{get:()=>E,set:n=>E=n},totalEchoes:{get:()=>Rt},newPSD:be,usePSD:Ke,scheduler:{get:()=>Qe,set:n=>{Qe=n}},rejectionMapper:{get:()=>on,set:n=>{on=n}},follow:(n,e)=>new T((t,a)=>be((r,s)=>{var i=E;i.unhandleds=[],i.onunhandled=s,i.finalize=xe(function(){(function(c){function o(){c(),yt.splice(yt.indexOf(o),1)}yt.push(o),++ve,Qe(()=>{--ve==0&&On()},[])})(()=>{this.unhandleds.length===0?r():s(this.unhandleds[0])})},i.finalize),n()},e,t,a))}),mt&&(mt.allSettled&&te(T,"allSettled",function(){const n=$.apply(null,arguments).map(lt);return new T(e=>{n.length===0&&e([]);let t=n.length;const a=new Array(t);n.forEach((r,s)=>T.resolve(r).then(i=>a[s]={status:"fulfilled",value:i},i=>a[s]={status:"rejected",reason:i}).then(()=>--t||e(a)))})}),mt.any&&typeof AggregateError<"u"&&te(T,"any",function(){const n=$.apply(null,arguments).map(lt);return new T((e,t)=>{n.length===0&&t(new AggregateError([]));let a=n.length;const r=new Array(a);n.forEach((s,i)=>T.resolve(s).then(c=>e(c),c=>{r[i]=c,--a||t(new AggregateError(r))}))})}));const B={awaits:0,echoes:0,id:0};var Ds=0,vt=[],Bt=0,Rt=0,Ls=0;function be(n,e,t,a){var r=E,s=Object.create(r);s.parent=r,s.ref=0,s.global=!1,s.id=++Ls;var i=Me.env;s.env=jn?{Promise:T,PromiseProp:{value:T,configurable:!0,writable:!0},all:T.all,race:T.race,allSettled:T.allSettled,any:T.any,resolve:T.resolve,reject:T.reject,nthen:Wn(i.nthen,s),gthen:Wn(i.gthen,s)}:{},e&&q(s,e),++r.ref,s.finalize=function(){--this.parent.ref||this.parent.finalize()};var c=Ke(s,n,t,a);return s.ref===0&&s.finalize(),c}function Le(){return B.id||(B.id=++Ds),++B.awaits,B.echoes+=Ea,B.id}function re(){return!!B.awaits&&(--B.awaits==0&&(B.id=0),B.echoes=B.awaits*Ea,!0)}function lt(n){return B.echoes&&n&&n.constructor===mt?(Le(),n.then(e=>(re(),e),e=>(re(),G(e)))):n}function Ks(n){++Rt,B.echoes&&--B.echoes!=0||(B.echoes=B.id=0),vt.push(E),de(n,!0)}function Gs(){var n=vt[vt.length-1];vt.pop(),de(n,!1)}function de(n,e){var t=E;if((e?!B.echoes||Bt++&&n===E:!Bt||--Bt&&n===E)||Ma(e?Ks.bind(null,n):Gs),n!==E&&(E=n,t===Me&&(Me.env=Ca()),jn)){var a=Me.env.Promise,r=n.env;Tt.then=r.nthen,a.prototype.then=r.gthen,(t.global||n.global)&&(Object.defineProperty(C,"Promise",r.PromiseProp),a.all=r.all,a.race=r.race,a.resolve=r.resolve,a.reject=r.reject,r.allSettled&&(a.allSettled=r.allSettled),r.any&&(a.any=r.any))}}function Ca(){var n=C.Promise;return jn?{Promise:n,PromiseProp:Object.getOwnPropertyDescriptor(C,"Promise"),all:n.all,race:n.race,allSettled:n.allSettled,any:n.any,resolve:n.resolve,reject:n.reject,nthen:Tt.then,gthen:n.prototype.then}:{}}function Ke(n,e,t,a,r){var s=E;try{return de(n,!0),e(t,a,r)}finally{de(s,!1)}}function Ma(n){Ra.call(tn,n)}function jt(n,e,t,a){return typeof n!="function"?n:function(){var r=E;t&&Le(),de(e,!0);try{return n.apply(this,arguments)}finally{de(r,!1),a&&Ma(re)}}}function Wn(n,e){return function(t,a){return n.call(this,jt(t,e),jt(a,e))}}(""+Ra).indexOf("[native code]")===-1&&(Le=re=F);const Vn="unhandledrejection";function Yn(n,e){var t;try{t=e.onuncatched(n)}catch{}if(t!==!1)try{var a,r={promise:e,reason:n};if(C.document&&document.createEvent?((a=document.createEvent("Event")).initEvent(Vn,!0,!0),q(a,r)):C.CustomEvent&&q(a=new CustomEvent(Vn,{detail:r}),r),a&&C.dispatchEvent&&(dispatchEvent(a),!C.PromiseRejectionEvent&&C.onunhandledrejection))try{C.onunhandledrejection(a)}catch{}X&&a&&!a.defaultPrevented&&console.warn(`Unhandled rejection: ${n.stack||n}`)}catch{}}var G=T.reject;function un(n,e,t,a){if(n.idbdb&&(n._state.openComplete||E.letThrough||n._vip)){var r=n._createTransaction(e,t,n._dbSchema);try{r.create(),n._state.PR1398_maxLoop=3}catch(s){return s.name===En.InvalidState&&n.isOpen()&&--n._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),n._close(),n.open().then(()=>un(n,e,t,a))):G(s)}return r._promise(e,(s,i)=>be(()=>(E.trans=r,a(s,i,r)))).then(s=>r._completion.then(()=>s))}if(n._state.openComplete)return G(new R.DatabaseClosed(n._state.dbOpenError));if(!n._state.isBeingOpened){if(!n._options.autoOpen)return G(new R.DatabaseClosed);n.open().catch(F)}return n._state.dbReadyPromise.then(()=>un(n,e,t,a))}const Xn="3.2.6",ge="￿",bn=-1/0,J="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Da="String expected.",We=[],Pt=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Ns=Pt,Bs=Pt,La=n=>!/(dexie\.js|dexie\.min\.js)/.test(n),Ft="__dbnames",It="readonly",Ht="readwrite";function ke(n,e){return n?e?function(){return n.apply(this,arguments)&&e.apply(this,arguments)}:n:e}const Ka={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function ut(n){return typeof n!="string"||/\./.test(n)?e=>e:e=>(e[n]===void 0&&n in e&&delete(e=rt(e))[n],e)}class Is{_trans(e,t,a){const r=this._tx||E.trans,s=this.name;function i(o,l,u){if(!u.schema[s])throw new R.NotFound("Table "+s+" not part of transaction");return t(u.idbtrans,u)}const c=st();try{return r&&r.db===this.db?r===E.trans?r._promise(e,i,a):be(()=>r._promise(e,i,a),{trans:r,transless:E.transless||E}):un(this.db,e,[this.name],i)}finally{c&&it()}}get(e,t){return e&&e.constructor===Object?this.where(e).first(t):this._trans("readonly",a=>this.core.get({trans:a,key:e}).then(r=>this.hook.reading.fire(r))).then(t)}where(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(I(e))return new this.db.WhereClause(this,`[${e.join("+")}]`);const t=L(e);if(t.length===1)return this.where(t[0]).equals(e[t[0]]);const a=this.schema.indexes.concat(this.schema.primKey).filter(l=>{if(l.compound&&t.every(u=>l.keyPath.indexOf(u)>=0)){for(let u=0;u<t.length;++u)if(t.indexOf(l.keyPath[u])===-1)return!1;return!0}return!1}).sort((l,u)=>l.keyPath.length-u.keyPath.length)[0];if(a&&this.db._maxKey!==ge){const l=a.keyPath.slice(0,t.length);return this.where(l).equals(l.map(u=>e[u]))}!a&&X&&console.warn(`The query ${JSON.stringify(e)} on ${this.name} would benefit of a compound index [${t.join("+")}]`);const{idxByName:r}=this.schema,s=this.db._deps.indexedDB;function i(l,u){try{return s.cmp(l,u)===0}catch{return!1}}const[c,o]=t.reduce(([l,u],b)=>{const d=r[b],f=e[b];return[l||d,l||!d?ke(u,d&&d.multi?g=>{const m=ne(g,b);return I(m)&&m.some(y=>i(f,y))}:g=>i(f,ne(g,b))):u]},[null,null]);return c?this.where(c.name).equals(e[c.keyPath]).filter(o):a?this.filter(o):this.where(t).equals("")}filter(e){return this.toCollection().and(e)}count(e){return this.toCollection().count(e)}offset(e){return this.toCollection().offset(e)}limit(e){return this.toCollection().limit(e)}each(e){return this.toCollection().each(e)}toArray(e){return this.toCollection().toArray(e)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(e){return new this.db.Collection(new this.db.WhereClause(this,I(e)?`[${e.join("+")}]`:e))}reverse(){return this.toCollection().reverse()}mapToClass(e){this.schema.mappedClass=e;const t=a=>{if(!a)return a;const r=Object.create(e.prototype);for(var s in a)if(Q(a,s))try{r[s]=a[s]}catch{}return r};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=t,this.hook("reading",t),e}defineClass(){return this.mapToClass(function(e){q(this,e)})}add(e,t){const{auto:a,keyPath:r}=this.schema.primKey;let s=e;return r&&a&&(s=ut(r)(e)),this._trans("readwrite",i=>this.core.mutate({trans:i,type:"add",keys:t!=null?[t]:null,values:[s]})).then(i=>i.numFailures?T.reject(i.failures[0]):i.lastResult).then(i=>{if(r)try{V(e,r,i)}catch{}return i})}update(e,t){if(typeof e!="object"||I(e))return this.where(":id").equals(e).modify(t);{const a=ne(e,this.schema.primKey.keyPath);if(a===void 0)return G(new R.InvalidArgument("Given object does not contain its primary key"));try{typeof t!="function"?L(t).forEach(r=>{V(e,r,t[r])}):t(e,{value:e,primKey:a})}catch{}return this.where(":id").equals(a).modify(t)}}put(e,t){const{auto:a,keyPath:r}=this.schema.primKey;let s=e;return r&&a&&(s=ut(r)(e)),this._trans("readwrite",i=>this.core.mutate({trans:i,type:"put",values:[s],keys:t!=null?[t]:null})).then(i=>i.numFailures?T.reject(i.failures[0]):i.lastResult).then(i=>{if(r)try{V(e,r,i)}catch{}return i})}delete(e){return this._trans("readwrite",t=>this.core.mutate({trans:t,type:"delete",keys:[e]})).then(t=>t.numFailures?T.reject(t.failures[0]):void 0)}clear(){return this._trans("readwrite",e=>this.core.mutate({trans:e,type:"deleteRange",range:Ka})).then(e=>e.numFailures?T.reject(e.failures[0]):void 0)}bulkGet(e){return this._trans("readonly",t=>this.core.getMany({keys:e,trans:t}).then(a=>a.map(r=>this.hook.reading.fire(r))))}bulkAdd(e,t,a){const r=Array.isArray(t)?t:void 0,s=(a=a||(r?void 0:t))?a.allKeys:void 0;return this._trans("readwrite",i=>{const{auto:c,keyPath:o}=this.schema.primKey;if(o&&r)throw new R.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(r&&r.length!==e.length)throw new R.InvalidArgument("Arguments objects and keys must have the same length");const l=e.length;let u=o&&c?e.map(ut(o)):e;return this.core.mutate({trans:i,type:"add",keys:r,values:u,wantResults:s}).then(({numFailures:b,results:d,lastResult:f,failures:g})=>{if(b===0)return s?d:f;throw new Ue(`${this.name}.bulkAdd(): ${b} of ${l} operations failed`,g)})})}bulkPut(e,t,a){const r=Array.isArray(t)?t:void 0,s=(a=a||(r?void 0:t))?a.allKeys:void 0;return this._trans("readwrite",i=>{const{auto:c,keyPath:o}=this.schema.primKey;if(o&&r)throw new R.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(r&&r.length!==e.length)throw new R.InvalidArgument("Arguments objects and keys must have the same length");const l=e.length;let u=o&&c?e.map(ut(o)):e;return this.core.mutate({trans:i,type:"put",keys:r,values:u,wantResults:s}).then(({numFailures:b,results:d,lastResult:f,failures:g})=>{if(b===0)return s?d:f;throw new Ue(`${this.name}.bulkPut(): ${b} of ${l} operations failed`,g)})})}bulkDelete(e){const t=e.length;return this._trans("readwrite",a=>this.core.mutate({trans:a,type:"delete",keys:e})).then(({numFailures:a,lastResult:r,failures:s})=>{if(a===0)return r;throw new Ue(`${this.name}.bulkDelete(): ${a} of ${t} operations failed`,s)})}}function Ve(n){var e={},t=function(i,c){if(c){for(var o=arguments.length,l=new Array(o-1);--o;)l[o-1]=arguments[o];return e[i].subscribe.apply(null,l),n}if(typeof i=="string")return e[i]};t.addEventType=s;for(var a=1,r=arguments.length;a<r;++a)s(arguments[a]);return t;function s(i,c,o){if(typeof i!="object"){var l;c||(c=Fs),o||(o=F);var u={subscribers:[],fire:o,subscribe:function(b){u.subscribers.indexOf(b)===-1&&(u.subscribers.push(b),u.fire=c(u.fire,b))},unsubscribe:function(b){u.subscribers=u.subscribers.filter(function(d){return d!==b}),u.fire=u.subscribers.reduce(c,o)}};return e[i]=t[i]=u,u}L(l=i).forEach(function(b){var d=l[b];if(I(d))s(b,l[b][0],l[b][1]);else{if(d!=="asap")throw new R.InvalidArgument("Invalid event config");var f=s(b,Ze,function(){for(var g=arguments.length,m=new Array(g);g--;)m[g]=arguments[g];f.subscribers.forEach(function(y){ga(function(){y.apply(null,m)})})})}})}}function Be(n,e){return Fe(e).from({prototype:n}),e}function Re(n,e){return!(n.filter||n.algorithm||n.or)&&(e?n.justLimit:!n.replayFilter)}function qt(n,e){n.filter=ke(n.filter,e)}function zt(n,e,t){var a=n.replayFilter;n.replayFilter=a?()=>ke(a(),e()):e,n.justLimit=t&&!a}function wt(n,e){if(n.isPrimKey)return e.primaryKey;const t=e.getIndexByKeyPath(n.index);if(!t)throw new R.Schema("KeyPath "+n.index+" on object store "+e.name+" is not indexed");return t}function Jn(n,e,t){const a=wt(n,e.schema);return e.openCursor({trans:t,values:!n.keysOnly,reverse:n.dir==="prev",unique:!!n.unique,query:{index:a,range:n.range}})}function bt(n,e,t,a){const r=n.replayFilter?ke(n.filter,n.replayFilter()):n.filter;if(n.or){const s={},i=(c,o,l)=>{if(!r||r(o,l,d=>o.stop(d),d=>o.fail(d))){var u=o.primaryKey,b=""+u;b==="[object ArrayBuffer]"&&(b=""+new Uint8Array(u)),Q(s,b)||(s[b]=!0,e(c,o,l))}};return Promise.all([n.or._iterate(i,t),Zn(Jn(n,a,t),n.algorithm,i,!n.keysOnly&&n.valueMapper)])}return Zn(Jn(n,a,t),ke(n.algorithm,r),e,!n.keysOnly&&n.valueMapper)}function Zn(n,e,t,a){var r=M(a?(s,i,c)=>t(a(s),i,c):t);return n.then(s=>{if(s)return s.start(()=>{var i=()=>s.continue();e&&!e(s,c=>i=c,c=>{s.stop(c),i=F},c=>{s.fail(c),i=F})||r(s.value,s,c=>i=c),i()})})}function H(n,e){try{const t=$n(n),a=$n(e);if(t!==a)return t==="Array"?1:a==="Array"?-1:t==="binary"?1:a==="binary"?-1:t==="string"?1:a==="string"?-1:t==="Date"?1:a!=="Date"?NaN:-1;switch(t){case"number":case"Date":case"string":return n>e?1:n<e?-1:0;case"binary":return function(r,s){const i=r.length,c=s.length,o=i<c?i:c;for(let l=0;l<o;++l)if(r[l]!==s[l])return r[l]<s[l]?-1:1;return i===c?0:i<c?-1:1}(ea(n),ea(e));case"Array":return function(r,s){const i=r.length,c=s.length,o=i<c?i:c;for(let l=0;l<o;++l){const u=H(r[l],s[l]);if(u!==0)return u}return i===c?0:i<c?-1:1}(n,e)}}catch{}return NaN}function $n(n){const e=typeof n;if(e!=="object")return e;if(ArrayBuffer.isView(n))return"binary";const t=Zt(n);return t==="ArrayBuffer"?"binary":t}function ea(n){return n instanceof Uint8Array?n:ArrayBuffer.isView(n)?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):new Uint8Array(n)}class Hs{_read(e,t){var a=this._ctx;return a.error?a.table._trans(null,G.bind(null,a.error)):a.table._trans("readonly",e).then(t)}_write(e){var t=this._ctx;return t.error?t.table._trans(null,G.bind(null,t.error)):t.table._trans("readwrite",e,"locked")}_addAlgorithm(e){var t=this._ctx;t.algorithm=ke(t.algorithm,e)}_iterate(e,t){return bt(this._ctx,e,t,this._ctx.table.core)}clone(e){var t=Object.create(this.constructor.prototype),a=Object.create(this._ctx);return e&&q(a,e),t._ctx=a,t}raw(){return this._ctx.valueMapper=null,this}each(e){var t=this._ctx;return this._read(a=>bt(t,e,a,t.table.core))}count(e){return this._read(t=>{const a=this._ctx,r=a.table.core;if(Re(a,!0))return r.count({trans:t,query:{index:wt(a,r.schema),range:a.range}}).then(i=>Math.min(i,a.limit));var s=0;return bt(a,()=>(++s,!1),t,r).then(()=>s)}).then(e)}sortBy(e,t){const a=e.split(".").reverse(),r=a[0],s=a.length-1;function i(l,u){return u?i(l[a[u]],u-1):l[r]}var c=this._ctx.dir==="next"?1:-1;function o(l,u){var b=i(l,s),d=i(u,s);return b<d?-c:b>d?c:0}return this.toArray(function(l){return l.sort(o)}).then(t)}toArray(e){return this._read(t=>{var a=this._ctx;if(a.dir==="next"&&Re(a,!0)&&a.limit>0){const{valueMapper:r}=a,s=wt(a,a.table.core.schema);return a.table.core.query({trans:t,limit:a.limit,values:!0,query:{index:s,range:a.range}}).then(({result:i})=>r?i.map(r):i)}{const r=[];return bt(a,s=>r.push(s),t,a.table.core).then(()=>r)}},e)}offset(e){var t=this._ctx;return e<=0||(t.offset+=e,Re(t)?zt(t,()=>{var a=e;return(r,s)=>a===0||(a===1?(--a,!1):(s(()=>{r.advance(a),a=0}),!1))}):zt(t,()=>{var a=e;return()=>--a<0})),this}limit(e){return this._ctx.limit=Math.min(this._ctx.limit,e),zt(this._ctx,()=>{var t=e;return function(a,r,s){return--t<=0&&r(s),t>=0}},!0),this}until(e,t){return qt(this._ctx,function(a,r,s){return!e(a.value)||(r(s),t)}),this}first(e){return this.limit(1).toArray(function(t){return t[0]}).then(e)}last(e){return this.reverse().first(e)}filter(e){var t,a;return qt(this._ctx,function(r){return e(r.value)}),t=this._ctx,a=e,t.isMatch=ke(t.isMatch,a),this}and(e){return this.filter(e)}or(e){return new this.db.WhereClause(this._ctx.table,e,this)}reverse(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(a,r){e(r.key,r)})}eachUniqueKey(e){return this._ctx.unique="unique",this.eachKey(e)}eachPrimaryKey(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(a,r){e(r.primaryKey,r)})}keys(e){var t=this._ctx;t.keysOnly=!t.isMatch;var a=[];return this.each(function(r,s){a.push(s.key)}).then(function(){return a}).then(e)}primaryKeys(e){var t=this._ctx;if(t.dir==="next"&&Re(t,!0)&&t.limit>0)return this._read(r=>{var s=wt(t,t.table.core.schema);return t.table.core.query({trans:r,values:!1,limit:t.limit,query:{index:s,range:t.range}})}).then(({result:r})=>r).then(e);t.keysOnly=!t.isMatch;var a=[];return this.each(function(r,s){a.push(s.primaryKey)}).then(function(){return a}).then(e)}uniqueKeys(e){return this._ctx.unique="unique",this.keys(e)}firstKey(e){return this.limit(1).keys(function(t){return t[0]}).then(e)}lastKey(e){return this.reverse().firstKey(e)}distinct(){var e=this._ctx,t=e.index&&e.table.schema.idxByName[e.index];if(!t||!t.multi)return this;var a={};return qt(this._ctx,function(r){var s=r.primaryKey.toString(),i=Q(a,s);return a[s]=!0,!i}),this}modify(e){var t=this._ctx;return this._write(a=>{var r;if(typeof e=="function")r=e;else{var s=L(e),i=s.length;r=function(m){for(var y=!1,p=0;p<i;++p){var h=s[p],w=e[h];ne(m,h)!==w&&(V(m,h,w),y=!0)}return y}}const c=t.table.core,{outbound:o,extractKey:l}=c.schema.primaryKey,u=this.db._options.modifyChunkSize||200,b=[];let d=0;const f=[],g=(m,y)=>{const{failures:p,numFailures:h}=y;d+=m-h;for(let w of L(p))b.push(p[w])};return this.clone().primaryKeys().then(m=>{const y=p=>{const h=Math.min(u,m.length-p);return c.getMany({trans:a,keys:m.slice(p,p+h),cache:"immutable"}).then(w=>{const v=[],x=[],k=o?[]:null,A=[];for(let _=0;_<h;++_){const P=w[_],O={value:rt(P),primKey:m[p+_]};r.call(O,O.value,O)!==!1&&(O.value==null?A.push(m[p+_]):o||H(l(P),l(O.value))===0?(x.push(O.value),o&&k.push(m[p+_])):(A.push(m[p+_]),v.push(O.value)))}const j=Re(t)&&t.limit===1/0&&(typeof e!="function"||e===Ut)&&{index:t.index,range:t.range};return Promise.resolve(v.length>0&&c.mutate({trans:a,type:"add",values:v}).then(_=>{for(let P in _.failures)A.splice(parseInt(P),1);g(v.length,_)})).then(()=>(x.length>0||j&&typeof e=="object")&&c.mutate({trans:a,type:"put",keys:k,values:x,criteria:j,changeSpec:typeof e!="function"&&e}).then(_=>g(x.length,_))).then(()=>(A.length>0||j&&e===Ut)&&c.mutate({trans:a,type:"delete",keys:A,criteria:j}).then(_=>g(A.length,_))).then(()=>m.length>p+h&&y(p+u))})};return y(0).then(()=>{if(b.length>0)throw new _t("Error modifying one or more objects",b,d,f);return m.length})})})}delete(){var e=this._ctx,t=e.range;return Re(e)&&(e.isPrimKey&&!Bs||t.type===3)?this._write(a=>{const{primaryKey:r}=e.table.core.schema,s=t;return e.table.core.count({trans:a,query:{index:r,range:s}}).then(i=>e.table.core.mutate({trans:a,type:"deleteRange",range:s}).then(({failures:c,lastResult:o,results:l,numFailures:u})=>{if(u)throw new _t("Could not delete some values",Object.keys(c).map(b=>c[b]),i-u);return i-u}))}):this.modify(Ut)}}const Ut=(n,e)=>e.value=null;function qs(n,e){return n<e?-1:n===e?0:1}function zs(n,e){return n>e?-1:n===e?0:1}function U(n,e,t){var a=n instanceof Na?new n.Collection(n):n;return a._ctx.error=t?new t(e):new TypeError(e),a}function je(n){return new n.Collection(n,()=>Ga("")).limit(0)}function Us(n,e,t,a,r,s){for(var i=Math.min(n.length,a.length),c=-1,o=0;o<i;++o){var l=e[o];if(l!==a[o])return r(n[o],t[o])<0?n.substr(0,o)+t[o]+t.substr(o+1):r(n[o],a[o])<0?n.substr(0,o)+a[o]+t.substr(o+1):c>=0?n.substr(0,c)+e[c]+t.substr(c+1):null;r(n[o],l)<0&&(c=o)}return i<a.length&&s==="next"?n+t.substr(n.length):i<n.length&&s==="prev"?n.substr(0,t.length):c<0?null:n.substr(0,c)+a[c]+t.substr(c+1)}function dt(n,e,t,a){var r,s,i,c,o,l,u,b=t.length;if(!t.every(m=>typeof m=="string"))return U(n,Da);function d(m){r=function(p){return p==="next"?h=>h.toUpperCase():h=>h.toLowerCase()}(m),s=function(p){return p==="next"?h=>h.toLowerCase():h=>h.toUpperCase()}(m),i=m==="next"?qs:zs;var y=t.map(function(p){return{lower:s(p),upper:r(p)}}).sort(function(p,h){return i(p.lower,h.lower)});c=y.map(function(p){return p.upper}),o=y.map(function(p){return p.lower}),l=m,u=m==="next"?"":a}d("next");var f=new n.Collection(n,()=>oe(c[0],o[b-1]+a));f._ondirectionchange=function(m){d(m)};var g=0;return f._addAlgorithm(function(m,y,p){var h=m.key;if(typeof h!="string")return!1;var w=s(h);if(e(w,o,g))return!0;for(var v=null,x=g;x<b;++x){var k=Us(h,w,c[x],o[x],i,l);k===null&&v===null?g=x+1:(v===null||i(v,k)>0)&&(v=k)}return y(v!==null?function(){m.continue(v+u)}:p),!1}),f}function oe(n,e,t,a){return{type:2,lower:n,upper:e,lowerOpen:t,upperOpen:a}}function Ga(n){return{type:1,lower:n,upper:n}}class Na{get Collection(){return this._ctx.table.db.Collection}between(e,t,a,r){a=a!==!1,r=r===!0;try{return this._cmp(e,t)>0||this._cmp(e,t)===0&&(a||r)&&(!a||!r)?je(this):new this.Collection(this,()=>oe(e,t,!a,!r))}catch{return U(this,J)}}equals(e){return e==null?U(this,J):new this.Collection(this,()=>Ga(e))}above(e){return e==null?U(this,J):new this.Collection(this,()=>oe(e,void 0,!0))}aboveOrEqual(e){return e==null?U(this,J):new this.Collection(this,()=>oe(e,void 0,!1))}below(e){return e==null?U(this,J):new this.Collection(this,()=>oe(void 0,e,!1,!0))}belowOrEqual(e){return e==null?U(this,J):new this.Collection(this,()=>oe(void 0,e))}startsWith(e){return typeof e!="string"?U(this,Da):this.between(e,e+ge,!0,!0)}startsWithIgnoreCase(e){return e===""?this.startsWith(e):dt(this,(t,a)=>t.indexOf(a[0])===0,[e],ge)}equalsIgnoreCase(e){return dt(this,(t,a)=>t===a[0],[e],"")}anyOfIgnoreCase(){var e=$.apply(Se,arguments);return e.length===0?je(this):dt(this,(t,a)=>a.indexOf(t)!==-1,e,"")}startsWithAnyOfIgnoreCase(){var e=$.apply(Se,arguments);return e.length===0?je(this):dt(this,(t,a)=>a.some(r=>t.indexOf(r)===0),e,ge)}anyOf(){const e=$.apply(Se,arguments);let t=this._cmp;try{e.sort(t)}catch{return U(this,J)}if(e.length===0)return je(this);const a=new this.Collection(this,()=>oe(e[0],e[e.length-1]));a._ondirectionchange=s=>{t=s==="next"?this._ascending:this._descending,e.sort(t)};let r=0;return a._addAlgorithm((s,i,c)=>{const o=s.key;for(;t(o,e[r])>0;)if(++r,r===e.length)return i(c),!1;return t(o,e[r])===0||(i(()=>{s.continue(e[r])}),!1)}),a}notEqual(e){return this.inAnyRange([[bn,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const e=$.apply(Se,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return U(this,J)}const t=e.reduce((a,r)=>a?a.concat([[a[a.length-1][1],r]]):[[bn,r]],null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})}inAnyRange(e,t){const a=this._cmp,r=this._ascending,s=this._descending,i=this._min,c=this._max;if(e.length===0)return je(this);if(!e.every(h=>h[0]!==void 0&&h[1]!==void 0&&r(h[0],h[1])<=0))return U(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",R.InvalidArgument);const o=!t||t.includeLowers!==!1,l=t&&t.includeUppers===!0;let u,b=r;function d(h,w){return b(h[0],w[0])}try{u=e.reduce(function(h,w){let v=0,x=h.length;for(;v<x;++v){const k=h[v];if(a(w[0],k[1])<0&&a(w[1],k[0])>0){k[0]=i(k[0],w[0]),k[1]=c(k[1],w[1]);break}}return v===x&&h.push(w),h},[]),u.sort(d)}catch{return U(this,J)}let f=0;const g=l?h=>r(h,u[f][1])>0:h=>r(h,u[f][1])>=0,m=o?h=>s(h,u[f][0])>0:h=>s(h,u[f][0])>=0;let y=g;const p=new this.Collection(this,()=>oe(u[0][0],u[u.length-1][1],!o,!l));return p._ondirectionchange=h=>{h==="next"?(y=g,b=r):(y=m,b=s),u.sort(d)},p._addAlgorithm((h,w,v)=>{for(var x=h.key;y(x);)if(++f,f===u.length)return w(v),!1;return!!function(k){return!g(k)&&!m(k)}(x)||(this._cmp(x,u[f][1])===0||this._cmp(x,u[f][0])===0||w(()=>{b===r?h.continue(u[f][0]):h.continue(u[f][1])}),!1)}),p}startsWithAnyOf(){const e=$.apply(Se,arguments);return e.every(t=>typeof t=="string")?e.length===0?je(this):this.inAnyRange(e.map(t=>[t,t+ge])):U(this,"startsWithAnyOf() only works with strings")}}function Y(n){return M(function(e){return et(e),n(e.target.error),!1})}function et(n){n.stopPropagation&&n.stopPropagation(),n.preventDefault&&n.preventDefault()}const tt="storagemutated",ue="x-storagemutated-1",he=Ve(null,tt);class Qs{_lock(){return He(!E.global),++this._reculock,this._reculock!==1||E.global||(E.lockOwnerFor=this),this}_unlock(){if(He(!E.global),--this._reculock==0)for(E.global||(E.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{Ke(e[1],e[0])}catch{}}return this}_locked(){return this._reculock&&E.lockOwnerFor!==this}create(e){if(!this.mode)return this;const t=this.db.idbdb,a=this.db._state.dbOpenError;if(He(!this.idbtrans),!e&&!t)switch(a&&a.name){case"DatabaseClosedError":throw new R.DatabaseClosed(a);case"MissingAPIError":throw new R.MissingAPI(a.message,a);default:throw new R.OpenFailed(a)}if(!this.active)throw new R.TransactionInactive;return He(this._completion._state===null),(e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):t.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=M(r=>{et(r),this._reject(e.error)}),e.onabort=M(r=>{et(r),this.active&&this._reject(new R.Abort(e.error)),this.active=!1,this.on("abort").fire(r)}),e.oncomplete=M(()=>{this.active=!1,this._resolve(),"mutatedParts"in e&&he.storagemutated.fire(e.mutatedParts)}),this}_promise(e,t,a){if(e==="readwrite"&&this.mode!=="readwrite")return G(new R.ReadOnly("Transaction is readonly"));if(!this.active)return G(new R.TransactionInactive);if(this._locked())return new T((s,i)=>{this._blockedFuncs.push([()=>{this._promise(e,t,a).then(s,i)},E])});if(a)return be(()=>{var s=new T((i,c)=>{this._lock();const o=t(i,c,this);o&&o.then&&o.then(i,c)});return s.finally(()=>this._unlock()),s._lib=!0,s});var r=new T((s,i)=>{var c=t(s,i,this);c&&c.then&&c.then(s,i)});return r._lib=!0,r}_root(){return this.parent?this.parent._root():this}waitFor(e){var t=this._root();const a=T.resolve(e);if(t._waitingFor)t._waitingFor=t._waitingFor.then(()=>a);else{t._waitingFor=a,t._waitingQueue=[];var r=t.idbtrans.objectStore(t.storeNames[0]);(function i(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&&(r.get(-1/0).onsuccess=i)})()}var s=t._waitingFor;return new T((i,c)=>{a.then(o=>t._waitingQueue.push(M(i.bind(null,o))),o=>t._waitingQueue.push(M(c.bind(null,o)))).finally(()=>{t._waitingFor===s&&(t._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new R.Abort))}table(e){const t=this._memoizedTables||(this._memoizedTables={});if(Q(t,e))return t[e];const a=this.schema[e];if(!a)throw new R.NotFound("Table "+e+" not part of transaction");const r=new this.db.Table(e,a,this);return r.core=this.db.core.table(e),t[e]=r,r}}function dn(n,e,t,a,r,s,i){return{name:n,keyPath:e,unique:t,multi:a,auto:r,compound:s,src:(t&&!i?"&":"")+(a?"*":"")+(r?"++":"")+Ba(e)}}function Ba(n){return typeof n=="string"?n:n?"["+[].join.call(n,"+")+"]":""}function Ia(n,e,t){return{name:n,primKey:e,indexes:t,mappedClass:null,idxByName:ya(t,a=>[a.name,a])}}let nt=n=>{try{return n.only([[]]),nt=()=>[[]],[[]]}catch{return nt=()=>ge,ge}};function hn(n){return n==null?()=>{}:typeof n=="string"?function(e){return e.split(".").length===1?a=>a[e]:a=>ne(a,e)}(n):e=>ne(e,n)}function ta(n){return[].slice.call(n)}let Ws=0;function Ye(n){return n==null?":id":typeof n=="string"?n:`[${n.join("+")}]`}function Vs(n,e,t){function a(o){if(o.type===3)return null;if(o.type===4)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:l,upper:u,lowerOpen:b,upperOpen:d}=o;return l===void 0?u===void 0?null:e.upperBound(u,!!d):u===void 0?e.lowerBound(l,!!b):e.bound(l,u,!!b,!!d)}const{schema:r,hasGetAll:s}=function(o,l){const u=ta(o.objectStoreNames);return{schema:{name:o.name,tables:u.map(b=>l.objectStore(b)).map(b=>{const{keyPath:d,autoIncrement:f}=b,g=I(d),m=d==null,y={},p={name:b.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:m,compound:g,keyPath:d,autoIncrement:f,unique:!0,extractKey:hn(d)},indexes:ta(b.indexNames).map(h=>b.index(h)).map(h=>{const{name:w,unique:v,multiEntry:x,keyPath:k}=h,A={name:w,compound:I(k),keyPath:k,unique:v,multiEntry:x,extractKey:hn(k)};return y[Ye(k)]=A,A}),getIndexByKeyPath:h=>y[Ye(h)]};return y[":id"]=p.primaryKey,d!=null&&(y[Ye(d)]=p.primaryKey),p})},hasGetAll:u.length>0&&"getAll"in l.objectStore(u[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(n,t),i=r.tables.map(o=>function(l){const u=l.name;return{name:u,schema:l,mutate:function({trans:b,type:d,keys:f,values:g,range:m}){return new Promise((y,p)=>{y=M(y);const h=b.objectStore(u),w=h.keyPath==null,v=d==="put"||d==="add";if(!v&&d!=="delete"&&d!=="deleteRange")throw new Error("Invalid operation type: "+d);const{length:x}=f||g||{length:1};if(f&&g&&f.length!==g.length)throw new Error("Given keys array must have same length as given values array.");if(x===0)return y({numFailures:0,failures:{},results:[],lastResult:void 0});let k;const A=[],j=[];let _=0;const P=K=>{++_,et(K)};if(d==="deleteRange"){if(m.type===4)return y({numFailures:_,failures:j,results:[],lastResult:void 0});m.type===3?A.push(k=h.clear()):A.push(k=h.delete(a(m)))}else{const[K,N]=v?w?[g,f]:[g,null]:[f,null];if(v)for(let D=0;D<x;++D)A.push(k=N&&N[D]!==void 0?h[d](K[D],N[D]):h[d](K[D])),k.onerror=P;else for(let D=0;D<x;++D)A.push(k=h[d](K[D])),k.onerror=P}const O=K=>{const N=K.target.result;A.forEach((D,Te)=>D.error!=null&&(j[Te]=D.error)),y({numFailures:_,failures:j,results:d==="delete"?f:A.map(D=>D.result),lastResult:N})};k.onerror=K=>{P(K),O(K)},k.onsuccess=O})},getMany:({trans:b,keys:d})=>new Promise((f,g)=>{f=M(f);const m=b.objectStore(u),y=d.length,p=new Array(y);let h,w=0,v=0;const x=A=>{const j=A.target;p[j._pos]=j.result,++v===w&&f(p)},k=Y(g);for(let A=0;A<y;++A)d[A]!=null&&(h=m.get(d[A]),h._pos=A,h.onsuccess=x,h.onerror=k,++w);w===0&&f(p)}),get:({trans:b,key:d})=>new Promise((f,g)=>{f=M(f);const m=b.objectStore(u).get(d);m.onsuccess=y=>f(y.target.result),m.onerror=Y(g)}),query:function(b){return d=>new Promise((f,g)=>{f=M(f);const{trans:m,values:y,limit:p,query:h}=d,w=p===1/0?void 0:p,{index:v,range:x}=h,k=m.objectStore(u),A=v.isPrimaryKey?k:k.index(v.name),j=a(x);if(p===0)return f({result:[]});if(b){const _=y?A.getAll(j,w):A.getAllKeys(j,w);_.onsuccess=P=>f({result:P.target.result}),_.onerror=Y(g)}else{let _=0;const P=y||!("openKeyCursor"in A)?A.openCursor(j):A.openKeyCursor(j),O=[];P.onsuccess=K=>{const N=P.result;return N?(O.push(y?N.value:N.primaryKey),++_===p?f({result:O}):void N.continue()):f({result:O})},P.onerror=Y(g)}})}(s),openCursor:function({trans:b,values:d,query:f,reverse:g,unique:m}){return new Promise((y,p)=>{y=M(y);const{index:h,range:w}=f,v=b.objectStore(u),x=h.isPrimaryKey?v:v.index(h.name),k=g?m?"prevunique":"prev":m?"nextunique":"next",A=d||!("openKeyCursor"in x)?x.openCursor(a(w),k):x.openKeyCursor(a(w),k);A.onerror=Y(p),A.onsuccess=M(j=>{const _=A.result;if(!_)return void y(null);_.___id=++Ws,_.done=!1;const P=_.continue.bind(_);let O=_.continuePrimaryKey;O&&(O=O.bind(_));const K=_.advance.bind(_),N=()=>{throw new Error("Cursor not stopped")};_.trans=b,_.stop=_.continue=_.continuePrimaryKey=_.advance=()=>{throw new Error("Cursor not started")},_.fail=M(p),_.next=function(){let D=1;return this.start(()=>D--?this.continue():this.stop()).then(()=>this)},_.start=D=>{const Te=new Promise((z,fe)=>{z=M(z),A.onerror=Y(fe),_.fail=fe,_.stop=Ge=>{_.stop=_.continue=_.continuePrimaryKey=_.advance=N,z(Ge)}}),Ee=()=>{if(A.result)try{D()}catch(z){_.fail(z)}else _.done=!0,_.start=()=>{throw new Error("Cursor behind last entry")},_.stop()};return A.onsuccess=M(z=>{A.onsuccess=Ee,Ee()}),_.continue=P,_.continuePrimaryKey=O,_.advance=K,Ee(),Te},y(_)},p)})},count({query:b,trans:d}){const{index:f,range:g}=b;return new Promise((m,y)=>{const p=d.objectStore(u),h=f.isPrimaryKey?p:p.index(f.name),w=a(g),v=w?h.count(w):h.count();v.onsuccess=M(x=>m(x.target.result)),v.onerror=Y(y)})}}}(o)),c={};return i.forEach(o=>c[o.name]=o),{stack:"dbcore",transaction:n.transaction.bind(n),table(o){if(!c[o])throw new Error(`Table '${o}' not found`);return c[o]},MIN_KEY:-1/0,MAX_KEY:nt(e),schema:r}}function fn({_novip:n},e){const t=e.db,a=function(r,s,{IDBKeyRange:i,indexedDB:c},o){return{dbcore:function(u,b){return b.reduce((d,{create:f})=>({...d,...f(d)}),u)}(Vs(s,i,o),r.dbcore)}}(n._middlewares,t,n._deps,e);n.core=a.dbcore,n.tables.forEach(r=>{const s=r.name;n.core.schema.tables.some(i=>i.name===s)&&(r.core=n.core.table(s),n[s]instanceof n.Table&&(n[s].core=r.core))})}function St({_novip:n},e,t,a){t.forEach(r=>{const s=a[r];e.forEach(i=>{const c=kn(i,r);(!c||"value"in c&&c.value===void 0)&&(i===n.Transaction.prototype||i instanceof n.Transaction?te(i,r,{get(){return this.table(r)},set(o){pa(this,r,{value:o,writable:!0,configurable:!0,enumerable:!0})}}):i[r]=new n.Table(r,s))})})}function pn({_novip:n},e){e.forEach(t=>{for(let a in t)t[a]instanceof n.Table&&delete t[a]})}function Ys(n,e){return n._cfg.version-e._cfg.version}function Xs(n,e,t,a){const r=n._dbSchema,s=n._createTransaction("readwrite",n._storeNames,r);s.create(t),s._completion.catch(a);const i=s._reject.bind(s),c=E.transless||E;be(()=>{E.trans=s,E.transless=c,e===0?(L(r).forEach(o=>{Qt(t,o,r[o].primKey,r[o].indexes)}),fn(n,t),T.follow(()=>n.on.populate.fire(s)).catch(i)):function({_novip:o},l,u,b){const d=[],f=o._versions;let g=o._dbSchema=gn(o,o.idbdb,b),m=!1;const y=f.filter(h=>h._cfg.version>=l);function p(){return d.length?T.resolve(d.shift()(u.idbtrans)).then(p):T.resolve()}return y.forEach(h=>{d.push(()=>{const w=g,v=h._cfg.dbschema;yn(o,w,b),yn(o,v,b),g=o._dbSchema=v;const x=Ha(w,v);x.add.forEach(A=>{Qt(b,A[0],A[1].primKey,A[1].indexes)}),x.change.forEach(A=>{if(A.recreate)throw new R.Upgrade("Not yet support for changing primary key");{const j=b.objectStore(A.name);A.add.forEach(_=>mn(j,_)),A.change.forEach(_=>{j.deleteIndex(_.name),mn(j,_)}),A.del.forEach(_=>j.deleteIndex(_))}});const k=h._cfg.contentUpgrade;if(k&&h._cfg.version>l){fn(o,b),u._memoizedTables={},m=!0;let A=va(v);x.del.forEach(O=>{A[O]=w[O]}),pn(o,[o.Transaction.prototype]),St(o,[o.Transaction.prototype],L(A),A),u.schema=A;const j=_n(k);let _;j&&Le();const P=T.follow(()=>{if(_=k(u),_&&j){var O=re.bind(null,null);_.then(O,O)}});return _&&typeof _.then=="function"?T.resolve(_):P.then(()=>_)}}),d.push(w=>{(!m||!Ns)&&function(v,x){[].slice.call(x.db.objectStoreNames).forEach(k=>v[k]==null&&x.db.deleteObjectStore(k))}(h._cfg.dbschema,w),pn(o,[o.Transaction.prototype]),St(o,[o.Transaction.prototype],o._storeNames,o._dbSchema),u.schema=o._dbSchema})}),p().then(()=>{var h,w;w=b,L(h=g).forEach(v=>{w.db.objectStoreNames.contains(v)||Qt(w,v,h[v].primKey,h[v].indexes)})})}(n,e,s,t).catch(i)})}function Ha(n,e){const t={del:[],add:[],change:[]};let a;for(a in n)e[a]||t.del.push(a);for(a in e){const r=n[a],s=e[a];if(r){const i={name:a,def:s,recreate:!1,del:[],add:[],change:[]};if(""+(r.primKey.keyPath||"")!=""+(s.primKey.keyPath||"")||r.primKey.auto!==s.primKey.auto&&!Pt)i.recreate=!0,t.change.push(i);else{const c=r.idxByName,o=s.idxByName;let l;for(l in c)o[l]||i.del.push(l);for(l in o){const u=c[l],b=o[l];u?u.src!==b.src&&i.change.push(b):i.add.push(b)}(i.del.length>0||i.add.length>0||i.change.length>0)&&t.change.push(i)}}else t.add.push([a,s])}return t}function Qt(n,e,t,a){const r=n.db.createObjectStore(e,t.keyPath?{keyPath:t.keyPath,autoIncrement:t.auto}:{autoIncrement:t.auto});return a.forEach(s=>mn(r,s)),r}function mn(n,e){n.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function gn(n,e,t){const a={};return kt(e.objectStoreNames,0).forEach(r=>{const s=t.objectStore(r);let i=s.keyPath;const c=dn(Ba(i),i||"",!1,!1,!!s.autoIncrement,i&&typeof i!="string",!0),o=[];for(let u=0;u<s.indexNames.length;++u){const b=s.index(s.indexNames[u]);i=b.keyPath;var l=dn(b.name,i,!!b.unique,!!b.multiEntry,!1,i&&typeof i!="string",!1);o.push(l)}a[r]=Ia(r,c,o)}),a}function yn({_novip:n},e,t){const a=t.db.objectStoreNames;for(let r=0;r<a.length;++r){const s=a[r],i=t.objectStore(s);n._hasGetAll="getAll"in i;for(let c=0;c<i.indexNames.length;++c){const o=i.indexNames[c],l=i.index(o).keyPath,u=typeof l=="string"?l:"["+kt(l).join("+")+"]";if(e[s]){const b=e[s].idxByName[u];b&&(b.name=o,delete e[s].idxByName[u],e[s].idxByName[o]=b)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&C.WorkerGlobalScope&&C instanceof C.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(n._hasGetAll=!1)}class Js{_parseStoresSpec(e,t){L(e).forEach(a=>{if(e[a]!==null){var r=e[a].split(",").map((i,c)=>{const o=(i=i.trim()).replace(/([&*]|\+\+)/g,""),l=/^\[/.test(o)?o.match(/^\[(.*)\]$/)[1].split("+"):o;return dn(o,l||null,/\&/.test(i),/\*/.test(i),/\+\+/.test(i),I(l),c===0)}),s=r.shift();if(s.multi)throw new R.Schema("Primary key cannot be multi-valued");r.forEach(i=>{if(i.auto)throw new R.Schema("Only primary key can be marked as autoIncrement (++)");if(!i.keyPath)throw new R.Schema("Index must have a name and cannot be an empty string")}),t[a]=Ia(a,s,r)}})}stores(e){const t=this.db;this._cfg.storesSource=this._cfg.storesSource?q(this._cfg.storesSource,e):e;const a=t._versions,r={};let s={};return a.forEach(i=>{q(r,i._cfg.storesSource),s=i._cfg.dbschema={},i._parseStoresSpec(r,s)}),t._dbSchema=s,pn(t,[t._allTables,t,t.Transaction.prototype]),St(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],L(s),s),t._storeNames=L(s),this}upgrade(e){return this._cfg.contentUpgrade=Rn(this._cfg.contentUpgrade||F,e),this}}function Pn(n,e){let t=n._dbNamesDB;return t||(t=n._dbNamesDB=new we(Ft,{addons:[],indexedDB:n,IDBKeyRange:e}),t.version(1).stores({dbnames:"name"})),t.table("dbnames")}function Fn(n){return n&&typeof n.databases=="function"}function vn(n){return be(function(){return E.letThrough=!0,n()})}function Zs(){var n;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(e){var t=function(){return indexedDB.databases().finally(e)};n=setInterval(t,100),t()}).finally(function(){return clearInterval(n)}):Promise.resolve()}function $s(n){const e=n._state,{indexedDB:t}=n._deps;if(e.isBeingOpened||n.idbdb)return e.dbReadyPromise.then(()=>e.dbOpenError?G(e.dbOpenError):n);X&&(e.openCanceller._stackHolder=_e()),e.isBeingOpened=!0,e.dbOpenError=null,e.openComplete=!1;const a=e.openCanceller;function r(){if(e.openCanceller!==a)throw new R.DatabaseClosed("db.open() was cancelled")}let s=e.dbReadyResolve,i=null,c=!1;const o=()=>new T((l,u)=>{if(r(),!t)throw new R.MissingAPI;const b=n.name,d=e.autoSchema?t.open(b):t.open(b,Math.round(10*n.verno));if(!d)throw new R.MissingAPI;d.onerror=Y(u),d.onblocked=M(n._fireOnBlocked),d.onupgradeneeded=M(f=>{if(i=d.transaction,e.autoSchema&&!n._options.allowEmptyDB){d.onerror=et,i.abort(),d.result.close();const m=t.deleteDatabase(b);m.onsuccess=m.onerror=M(()=>{u(new R.NoSuchDatabase(`Database ${b} doesnt exist`))})}else{i.onerror=Y(u);var g=f.oldVersion>Math.pow(2,62)?0:f.oldVersion;c=g<1,n._novip.idbdb=d.result,Xs(n,g/10,i,u)}},u),d.onsuccess=M(()=>{i=null;const f=n._novip.idbdb=d.result,g=kt(f.objectStoreNames);if(g.length>0)try{const y=f.transaction((m=g).length===1?m[0]:m,"readonly");e.autoSchema?function({_novip:p},h,w){p.verno=h.version/10;const v=p._dbSchema=gn(0,h,w);p._storeNames=kt(h.objectStoreNames,0),St(p,[p._allTables],L(v),v)}(n,f,y):(yn(n,n._dbSchema,y),function(p,h){const w=Ha(gn(0,p.idbdb,h),p._dbSchema);return!(w.add.length||w.change.some(v=>v.add.length||v.change.length))}(n,y)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),fn(n,y)}catch{}var m;We.push(n),f.onversionchange=M(y=>{e.vcFired=!0,n.on("versionchange").fire(y)}),f.onclose=M(y=>{n.on("close").fire(y)}),c&&function({indexedDB:y,IDBKeyRange:p},h){!Fn(y)&&h!==Ft&&Pn(y,p).put({name:h}).catch(F)}(n._deps,b),l()},u)}).catch(l=>l&&l.name==="UnknownError"&&e.PR1398_maxLoop>0?(e.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),o()):T.reject(l));return T.race([a,(typeof navigator>"u"?T.resolve():Zs()).then(o)]).then(()=>(r(),e.onReadyBeingFired=[],T.resolve(vn(()=>n.on.ready.fire(n.vip))).then(function l(){if(e.onReadyBeingFired.length>0){let u=e.onReadyBeingFired.reduce(Rn,F);return e.onReadyBeingFired=[],T.resolve(vn(()=>u(n.vip))).then(l)}}))).finally(()=>{e.onReadyBeingFired=null,e.isBeingOpened=!1}).then(()=>n).catch(l=>{e.dbOpenError=l;try{i&&i.abort()}catch{}return a===e.openCanceller&&n._close(),G(l)}).finally(()=>{e.openComplete=!0,s()})}function wn(n){var e=s=>n.next(s),t=r(e),a=r(s=>n.throw(s));function r(s){return i=>{var c=s(i),o=c.value;return c.done?o:o&&typeof o.then=="function"?o.then(t,a):I(o)?Promise.all(o).then(t,a):t(o)}}return r(e)()}function ei(n,e,t){var a=arguments.length;if(a<2)throw new R.InvalidArgument("Too few arguments");for(var r=new Array(a-1);--a;)r[a-1]=arguments[a];return t=r.pop(),[n,wa(r),t]}function qa(n,e,t,a,r){return T.resolve().then(()=>{const s=E.transless||E,i=n._createTransaction(e,t,n._dbSchema,a),c={trans:i,transless:s};if(a)i.idbtrans=a.idbtrans;else try{i.create(),n._state.PR1398_maxLoop=3}catch(b){return b.name===En.InvalidState&&n.isOpen()&&--n._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),n._close(),n.open().then(()=>qa(n,e,t,null,r))):G(b)}const o=_n(r);let l;o&&Le();const u=T.follow(()=>{if(l=r.call(i,i),l)if(o){var b=re.bind(null,null);l.then(b,b)}else typeof l.next=="function"&&typeof l.throw=="function"&&(l=wn(l))},c);return(l&&typeof l.then=="function"?T.resolve(l).then(b=>i.active?b:G(new R.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):u.then(()=>l)).then(b=>(a&&i._resolve(),i._completion.then(()=>b))).catch(b=>(i._reject(b),G(b)))})}function ht(n,e,t){const a=I(n)?n.slice():[n];for(let r=0;r<t;++r)a.push(e);return a}const ti={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(n){return{...n,table(e){const t=n.table(e),{schema:a}=t,r={},s=[];function i(u,b,d){const f=Ye(u),g=r[f]=r[f]||[],m=u==null?0:typeof u=="string"?1:u.length,y=b>0,p={...d,isVirtual:y,keyTail:b,keyLength:m,extractKey:hn(u),unique:!y&&d.unique};return g.push(p),p.isPrimaryKey||s.push(p),m>1&&i(m===2?u[0]:u.slice(0,m-1),b+1,d),g.sort((h,w)=>h.keyTail-w.keyTail),p}const c=i(a.primaryKey.keyPath,0,a.primaryKey);r[":id"]=[c];for(const u of a.indexes)i(u.keyPath,0,u);function o(u){const b=u.query.index;return b.isVirtual?{...u,query:{index:b,range:(d=u.query.range,f=b.keyTail,{type:d.type===1?2:d.type,lower:ht(d.lower,d.lowerOpen?n.MAX_KEY:n.MIN_KEY,f),lowerOpen:!0,upper:ht(d.upper,d.upperOpen?n.MIN_KEY:n.MAX_KEY,f),upperOpen:!0})}}:u;var d,f}return{...t,schema:{...a,primaryKey:c,indexes:s,getIndexByKeyPath:function(u){const b=r[Ye(u)];return b&&b[0]}},count:u=>t.count(o(u)),query:u=>t.query(o(u)),openCursor(u){const{keyTail:b,isVirtual:d,keyLength:f}=u.query.index;return d?t.openCursor(o(u)).then(g=>g&&function(m){return Object.create(m,{continue:{value:function(p){p!=null?m.continue(ht(p,u.reverse?n.MAX_KEY:n.MIN_KEY,b)):u.unique?m.continue(m.key.slice(0,f).concat(u.reverse?n.MIN_KEY:n.MAX_KEY,b)):m.continue()}},continuePrimaryKey:{value(p,h){m.continuePrimaryKey(ht(p,n.MAX_KEY,b),h)}},primaryKey:{get:()=>m.primaryKey},key:{get(){const p=m.key;return f===1?p[0]:p.slice(0,f)}},value:{get:()=>m.value}})}(g)):t.openCursor(u)}}}}}};function Cn(n,e,t,a){return t=t||{},a=a||"",L(n).forEach(r=>{if(Q(e,r)){var s=n[r],i=e[r];if(typeof s=="object"&&typeof i=="object"&&s&&i){const c=Zt(s);c!==Zt(i)?t[a+r]=e[r]:c==="Object"?Cn(s,i,t,a+r+"."):s!==i&&(t[a+r]=e[r])}else s!==i&&(t[a+r]=e[r])}else t[a+r]=void 0}),L(e).forEach(r=>{Q(n,r)||(t[a+r]=e[r])}),t}const ni={stack:"dbcore",name:"HooksMiddleware",level:2,create:n=>({...n,table(e){const t=n.table(e),{primaryKey:a}=t.schema;return{...t,mutate(s){const i=E.trans,{deleting:c,creating:o,updating:l}=i.table(e).hook;switch(s.type){case"add":if(o.fire===F)break;return i._promise("readwrite",()=>u(s),!0);case"put":if(o.fire===F&&l.fire===F)break;return i._promise("readwrite",()=>u(s),!0);case"delete":if(c.fire===F)break;return i._promise("readwrite",()=>u(s),!0);case"deleteRange":if(c.fire===F)break;return i._promise("readwrite",()=>function(d){return b(d.trans,d.range,1e4)}(s),!0)}return t.mutate(s);function u(d){const f=E.trans,g=d.keys||function(m,y){return y.type==="delete"?y.keys:y.keys||y.values.map(m.extractKey)}(a,d);if(!g)throw new Error("Keys missing");return(d=d.type==="add"||d.type==="put"?{...d,keys:g}:{...d}).type!=="delete"&&(d.values=[...d.values]),d.keys&&(d.keys=[...d.keys]),function(m,y,p){return y.type==="add"?Promise.resolve([]):m.getMany({trans:y.trans,keys:p,cache:"immutable"})}(t,d,g).then(m=>{const y=g.map((p,h)=>{const w=m[h],v={onerror:null,onsuccess:null};if(d.type==="delete")c.fire.call(v,p,w,f);else if(d.type==="add"||w===void 0){const x=o.fire.call(v,p,d.values[h],f);p==null&&x!=null&&(p=x,d.keys[h]=p,a.outbound||V(d.values[h],a.keyPath,p))}else{const x=Cn(w,d.values[h]),k=l.fire.call(v,x,p,w,f);if(k){const A=d.values[h];Object.keys(k).forEach(j=>{Q(A,j)?A[j]=k[j]:V(A,j,k[j])})}}return v});return t.mutate(d).then(({failures:p,results:h,numFailures:w,lastResult:v})=>{for(let x=0;x<g.length;++x){const k=h?h[x]:g[x],A=y[x];k==null?A.onerror&&A.onerror(p[x]):A.onsuccess&&A.onsuccess(d.type==="put"&&m[x]?d.values[x]:k)}return{failures:p,results:h,numFailures:w,lastResult:v}}).catch(p=>(y.forEach(h=>h.onerror&&h.onerror(p)),Promise.reject(p)))})}function b(d,f,g){return t.query({trans:d,values:!1,query:{index:a,range:f},limit:g}).then(({result:m})=>u({type:"delete",keys:m,trans:d}).then(y=>y.numFailures>0?Promise.reject(y.failures[0]):m.length<g?{failures:[],numFailures:0,lastResult:void 0}:b(d,{...f,lower:m[m.length-1],lowerOpen:!0},g)))}}}}})};function za(n,e,t){try{if(!e||e.keys.length<n.length)return null;const a=[];for(let r=0,s=0;r<e.keys.length&&s<n.length;++r)H(e.keys[r],n[s])===0&&(a.push(t?rt(e.values[r]):e.values[r]),++s);return a.length===n.length?a:null}catch{return null}}const ai={stack:"dbcore",level:-1,create:n=>({table:e=>{const t=n.table(e);return{...t,getMany:a=>{if(!a.cache)return t.getMany(a);const r=za(a.keys,a.trans._cache,a.cache==="clone");return r?T.resolve(r):t.getMany(a).then(s=>(a.trans._cache={keys:a.keys,values:a.cache==="clone"?rt(s):s},s))},mutate:a=>(a.type!=="add"&&(a.trans._cache=null),t.mutate(a))}}})};function Mn(n){return!("from"in n)}const Z=function(n,e){if(!this){const t=new Z;return n&&"d"in n&&q(t,n),t}q(this,arguments.length?{d:1,from:n,to:arguments.length>1?e:n}:{d:0})};function at(n,e,t){const a=H(e,t);if(isNaN(a))return;if(a>0)throw RangeError();if(Mn(n))return q(n,{from:e,to:t,d:1});const r=n.l,s=n.r;if(H(t,n.from)<0)return r?at(r,e,t):n.l={from:e,to:t,d:1,l:null,r:null},na(n);if(H(e,n.to)>0)return s?at(s,e,t):n.r={from:e,to:t,d:1,l:null,r:null},na(n);H(e,n.from)<0&&(n.from=e,n.l=null,n.d=s?s.d+1:1),H(t,n.to)>0&&(n.to=t,n.r=null,n.d=n.l?n.l.d+1:1);const i=!n.r;r&&!n.l&&Ot(n,r),s&&i&&Ot(n,s)}function Ot(n,e){Mn(e)||function t(a,{from:r,to:s,l:i,r:c}){at(a,r,s),i&&t(a,i),c&&t(a,c)}(n,e)}function ri(n,e){const t=An(e);let a=t.next();if(a.done)return!1;let r=a.value;const s=An(n);let i=s.next(r.from),c=i.value;for(;!a.done&&!i.done;){if(H(c.from,r.to)<=0&&H(c.to,r.from)>=0)return!0;H(r.from,c.from)<0?r=(a=t.next(c.from)).value:c=(i=s.next(r.from)).value}return!1}function An(n){let e=Mn(n)?null:{s:0,n};return{next(t){const a=arguments.length>0;for(;e;)switch(e.s){case 0:if(e.s=1,a)for(;e.n.l&&H(t,e.n.from)<0;)e={up:e,n:e.n.l,s:1};else for(;e.n.l;)e={up:e,n:e.n.l,s:1};case 1:if(e.s=2,!a||H(t,e.n.to)<=0)return{value:e.n,done:!1};case 2:if(e.n.r){e.s=3,e={up:e,n:e.n.r,s:0};continue}case 3:e=e.up}return{done:!0}}}}function na(n){var e,t;const a=(((e=n.r)===null||e===void 0?void 0:e.d)||0)-(((t=n.l)===null||t===void 0?void 0:t.d)||0),r=a>1?"r":a<-1?"l":"";if(r){const s=r==="r"?"l":"r",i={...n},c=n[r];n.from=c.from,n.to=c.to,n[r]=c[r],i[r]=c[s],n[s]=i,i.d=aa(i)}n.d=aa(n)}function aa({r:n,l:e}){return(n?e?Math.max(n.d,e.d):n.d:e?e.d:0)+1}De(Z.prototype,{add(n){return Ot(this,n),this},addKey(n){return at(this,n,n),this},addKeys(n){return n.forEach(e=>at(this,e,e)),this},[$t](){return An(this)}});const si={stack:"dbcore",level:0,create:n=>{const e=n.schema.name,t=new Z(n.MIN_KEY,n.MAX_KEY);return{...n,table:a=>{const r=n.table(a),{schema:s}=r,{primaryKey:i}=s,{extractKey:c,outbound:o}=i,l={...r,mutate:d=>{const f=d.trans,g=f.mutatedParts||(f.mutatedParts={}),m=k=>{const A=`idb://${e}/${a}/${k}`;return g[A]||(g[A]=new Z)},y=m(""),p=m(":dels"),{type:h}=d;let[w,v]=d.type==="deleteRange"?[d.range]:d.type==="delete"?[d.keys]:d.values.length<50?[[],d.values]:[];const x=d.trans._cache;return r.mutate(d).then(k=>{if(I(w)){h!=="delete"&&(w=k.results),y.addKeys(w);const A=za(w,x);A||h==="add"||p.addKeys(w),(A||v)&&function(j,_,P,O){function K(N){const D=j(N.name||"");function Te(z){return z!=null?N.extractKey(z):null}const Ee=z=>N.multiEntry&&I(z)?z.forEach(fe=>D.addKey(fe)):D.addKey(z);(P||O).forEach((z,fe)=>{const Ge=P&&Te(P[fe]),Ct=O&&Te(O[fe]);H(Ge,Ct)!==0&&(Ge!=null&&Ee(Ge),Ct!=null&&Ee(Ct))})}_.indexes.forEach(K)}(m,s,A,v)}else if(w){const A={from:w.lower,to:w.upper};p.add(A),y.add(A)}else y.add(t),p.add(t),s.indexes.forEach(A=>m(A.name).add(t));return k})}},u=({query:{index:d,range:f}})=>{var g,m;return[d,new Z((g=f.lower)!==null&&g!==void 0?g:n.MIN_KEY,(m=f.upper)!==null&&m!==void 0?m:n.MAX_KEY)]},b={get:d=>[i,new Z(d.key)],getMany:d=>[i,new Z().addKeys(d.keys)],count:u,query:u,openCursor:u};return L(b).forEach(d=>{l[d]=function(f){const{subscr:g}=E;if(g){const m=v=>{const x=`idb://${e}/${a}/${v}`;return g[x]||(g[x]=new Z)},y=m(""),p=m(":dels"),[h,w]=b[d](f);if(m(h.name||"").add(w),!h.isPrimaryKey){if(d!=="count"){const v=d==="query"&&o&&f.values&&r.query({...f,values:!1});return r[d].apply(this,arguments).then(x=>{if(d==="query"){if(o&&f.values)return v.then(({result:A})=>(y.addKeys(A),x));const k=f.values?x.result.map(c):x.result;f.values?y.addKeys(k):p.addKeys(k)}else if(d==="openCursor"){const k=x,A=f.values;return k&&Object.create(k,{key:{get:()=>(p.addKey(k.primaryKey),k.key)},primaryKey:{get(){const j=k.primaryKey;return p.addKey(j),j}},value:{get:()=>(A&&y.addKey(k.primaryKey),k.value)}})}return x})}p.add(t)}}return r[d].apply(this,arguments)}}),l}}}};class we{constructor(e,t){this._middlewares={},this.verno=0;const a=we.dependencies;this._options=t={addons:we.addons,autoOpen:!0,indexedDB:a.indexedDB,IDBKeyRange:a.IDBKeyRange,...t},this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange};const{addons:r}=t;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const s={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:F,dbReadyPromise:null,cancelOpen:F,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var i;s.dbReadyPromise=new T(c=>{s.dbReadyResolve=c}),s.openCanceller=new T((c,o)=>{s.cancelOpen=o}),this._state=s,this.name=e,this.on=Ve(this,"populate","blocked","versionchange","close",{ready:[Rn,F]}),this.on.ready.subscribe=ma(this.on.ready.subscribe,c=>(o,l)=>{we.vip(()=>{const u=this._state;if(u.openComplete)u.dbOpenError||T.resolve().then(o),l&&c(o);else if(u.onReadyBeingFired)u.onReadyBeingFired.push(o),l&&c(o);else{c(o);const b=this;l||c(function d(){b.on.ready.unsubscribe(o),b.on.ready.unsubscribe(d)})}})}),this.Collection=(i=this,Be(Hs.prototype,function(c,o){this.db=i;let l=Ka,u=null;if(o)try{l=o()}catch(g){u=g}const b=c._ctx,d=b.table,f=d.hook.reading.fire;this._ctx={table:d,index:b.index,isPrimKey:!b.index||d.schema.primKey.keyPath&&b.index===d.schema.primKey.name,range:l,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:u,or:b.or,valueMapper:f!==Ze?f:null}})),this.Table=function(c){return Be(Is.prototype,function(o,l,u){this.db=c,this._tx=u,this.name=o,this.schema=l,this.hook=c._allTables[o]?c._allTables[o].hook:Ve(null,{creating:[Ss,F],reading:[js,Ze],updating:[Ps,F],deleting:[Os,F]})})}(this),this.Transaction=function(c){return Be(Qs.prototype,function(o,l,u,b,d){this.db=c,this.mode=o,this.storeNames=l,this.schema=u,this.chromeTransactionDurability=b,this.idbtrans=null,this.on=Ve(this,"complete","error","abort"),this.parent=d||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new T((f,g)=>{this._resolve=f,this._reject=g}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},f=>{var g=this.active;return this.active=!1,this.on.error.fire(f),this.parent?this.parent._reject(f):g&&this.idbtrans&&this.idbtrans.abort(),G(f)})})}(this),this.Version=function(c){return Be(Js.prototype,function(o){this.db=c,this._cfg={version:o,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}(this),this.WhereClause=function(c){return Be(Na.prototype,function(o,l,u){this.db=c,this._ctx={table:o,index:l===":id"?null:l,or:u};const b=c._deps.indexedDB;if(!b)throw new R.MissingAPI;this._cmp=this._ascending=b.cmp.bind(b),this._descending=(d,f)=>b.cmp(f,d),this._max=(d,f)=>b.cmp(d,f)>0?d:f,this._min=(d,f)=>b.cmp(d,f)<0?d:f,this._IDBKeyRange=c._deps.IDBKeyRange})}(this),this.on("versionchange",c=>{c.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",c=>{!c.newVersion||c.newVersion<c.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${c.oldVersion/10}`)}),this._maxKey=nt(t.IDBKeyRange),this._createTransaction=(c,o,l,u)=>new this.Transaction(c,o,l,this._options.chromeTransactionDurability,u),this._fireOnBlocked=c=>{this.on("blocked").fire(c),We.filter(o=>o.name===this.name&&o!==this&&!o._state.vcFired).map(o=>o.on("versionchange").fire(c))},this.use(ti),this.use(ni),this.use(si),this.use(ai),this.vip=Object.create(this,{_vip:{value:!0}}),r.forEach(c=>c(this))}version(e){if(isNaN(e)||e<.1)throw new R.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new R.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);const t=this._versions;var a=t.filter(r=>r._cfg.version===e)[0];return a||(a=new this.Version(e),t.push(a),t.sort(Ys),a.stores({}),this._state.autoSchema=!1,a)}_whenReady(e){return this.idbdb&&(this._state.openComplete||E.letThrough||this._vip)?e():new T((t,a)=>{if(this._state.openComplete)return a(new R.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void a(new R.DatabaseClosed);this.open().catch(F)}this._state.dbReadyPromise.then(t,a)}).then(e)}use({stack:e,create:t,level:a,name:r}){r&&this.unuse({stack:e,name:r});const s=this._middlewares[e]||(this._middlewares[e]=[]);return s.push({stack:e,create:t,level:a??10,name:r}),s.sort((i,c)=>i.level-c.level),this}unuse({stack:e,name:t,create:a}){return e&&this._middlewares[e]&&(this._middlewares[e]=this._middlewares[e].filter(r=>a?r.create!==a:!!t&&r.name!==t)),this}open(){return $s(this)}_close(){const e=this._state,t=We.indexOf(this);if(t>=0&&We.splice(t,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}e.dbReadyPromise=new T(a=>{e.dbReadyResolve=a}),e.openCanceller=new T((a,r)=>{e.cancelOpen=r})}close(){this._close();const e=this._state;this._options.autoOpen=!1,e.dbOpenError=new R.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)}delete(){const e=arguments.length>0,t=this._state;return new T((a,r)=>{const s=()=>{this.close();var i=this._deps.indexedDB.deleteDatabase(this.name);i.onsuccess=M(()=>{(function({indexedDB:c,IDBKeyRange:o},l){!Fn(c)&&l!==Ft&&Pn(c,o).delete(l).catch(F)})(this._deps,this.name),a()}),i.onerror=Y(r),i.onblocked=this._fireOnBlocked};if(e)throw new R.InvalidArgument("Arguments not allowed in db.delete()");t.isBeingOpened?t.dbReadyPromise.then(s):s()})}backendDB(){return this.idbdb}isOpen(){return this.idbdb!==null}hasBeenClosed(){const e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"}hasFailed(){return this._state.dbOpenError!==null}dynamicallyOpened(){return this._state.autoSchema}get tables(){return L(this._allTables).map(e=>this._allTables[e])}transaction(){const e=ei.apply(this,arguments);return this._transaction.apply(this,e)}_transaction(e,t,a){let r=E.trans;r&&r.db===this&&e.indexOf("!")===-1||(r=null);const s=e.indexOf("?")!==-1;let i,c;e=e.replace("!","").replace("?","");try{if(c=t.map(l=>{var u=l instanceof this.Table?l.name:l;if(typeof u!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return u}),e=="r"||e===It)i=It;else{if(e!="rw"&&e!=Ht)throw new R.InvalidArgument("Invalid transaction mode: "+e);i=Ht}if(r){if(r.mode===It&&i===Ht){if(!s)throw new R.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");r=null}r&&c.forEach(l=>{if(r&&r.storeNames.indexOf(l)===-1){if(!s)throw new R.SubTransaction("Table "+l+" not included in parent transaction.");r=null}}),s&&r&&!r.active&&(r=null)}}catch(l){return r?r._promise(null,(u,b)=>{b(l)}):G(l)}const o=qa.bind(null,this,i,c,r,a);return r?r._promise(i,o,"lock"):E.trans?Ke(E.transless,()=>this._whenReady(o)):this._whenReady(o)}table(e){if(!Q(this._allTables,e))throw new R.InvalidTable(`Table ${e} does not exist`);return this._allTables[e]}}const ii=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable";class oi{constructor(e){this._subscribe=e}subscribe(e,t,a){return this._subscribe(e&&typeof e!="function"?e:{next:e,error:t,complete:a})}[ii](){return this}}function Ua(n,e){return L(e).forEach(t=>{Ot(n[t]||(n[t]=new Z),e[t])}),n}function ci(n){let e,t=!1;const a=new oi(r=>{const s=_n(n);let i=!1,c={},o={};const l={get closed(){return i},unsubscribe:()=>{i=!0,he.storagemutated.unsubscribe(f)}};r.start&&r.start(l);let u=!1,b=!1;function d(){return L(o).some(m=>c[m]&&ri(c[m],o[m]))}const f=m=>{Ua(c,m),d()&&g()},g=()=>{if(u||i)return;c={};const m={},y=function(p){s&&Le();const h=()=>be(n,{subscr:p,trans:null}),w=E.trans?Ke(E.transless,h):h();return s&&w.then(re,re),w}(m);b||(he(tt,f),b=!0),u=!0,Promise.resolve(y).then(p=>{t=!0,e=p,u=!1,i||(d()?g():(c={},o=m,r.next&&r.next(p)))},p=>{u=!1,t=!1,r.error&&r.error(p),l.unsubscribe()})};return g(),l});return a.hasValue=()=>t,a.getValue=()=>e,a}let xn;try{xn={indexedDB:C.indexedDB||C.mozIndexedDB||C.webkitIndexedDB||C.msIndexedDB,IDBKeyRange:C.IDBKeyRange||C.webkitIDBKeyRange}}catch{xn={indexedDB:null,IDBKeyRange:null}}const me=we;function At(n){let e=ee;try{ee=!0,he.storagemutated.fire(n)}finally{ee=e}}De(me,{...pt,delete:n=>new me(n,{addons:[]}).delete(),exists:n=>new me(n,{addons:[]}).open().then(e=>(e.close(),!0)).catch("NoSuchDatabaseError",()=>!1),getDatabaseNames(n){try{return function({indexedDB:e,IDBKeyRange:t}){return Fn(e)?Promise.resolve(e.databases()).then(a=>a.map(r=>r.name).filter(r=>r!==Ft)):Pn(e,t).toCollection().primaryKeys()}(me.dependencies).then(n)}catch{return G(new R.MissingAPI)}},defineClass:()=>function(n){q(this,n)},ignoreTransaction:n=>E.trans?Ke(E.transless,n):n(),vip:vn,async:function(n){return function(){try{var e=wn(n.apply(this,arguments));return e&&typeof e.then=="function"?e:T.resolve(e)}catch(t){return G(t)}}},spawn:function(n,e,t){try{var a=wn(n.apply(t,e||[]));return a&&typeof a.then=="function"?a:T.resolve(a)}catch(r){return G(r)}},currentTransaction:{get:()=>E.trans||null},waitFor:function(n,e){const t=T.resolve(typeof n=="function"?me.ignoreTransaction(n):n).timeout(e||6e4);return E.trans?E.trans.waitFor(t):t},Promise:T,debug:{get:()=>X,set:n=>{xa(n,n==="dexie"?()=>!0:La)}},derive:Fe,extend:q,props:De,override:ma,Events:Ve,on:he,liveQuery:ci,extendObservabilitySet:Ua,getByKeyPath:ne,setByKeyPath:V,delByKeyPath:function(n,e){typeof e=="string"?V(n,e,void 0):"length"in e&&[].map.call(e,function(t){V(n,t,void 0)})},shallowClone:va,deepClone:rt,getObjectDiff:Cn,cmp:H,asap:ga,minKey:bn,addons:[],connections:We,errnames:En,dependencies:xn,semVer:Xn,version:Xn.split(".").map(n=>parseInt(n)).reduce((n,e,t)=>n+e/Math.pow(10,2*t))}),me.maxKey=nt(me.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(he(tt,n=>{if(!ee){let e;Pt?(e=document.createEvent("CustomEvent"),e.initCustomEvent(ue,!0,!0,n)):e=new CustomEvent(ue,{detail:n}),ee=!0,dispatchEvent(e),ee=!1}}),addEventListener(ue,({detail:n})=>{ee||At(n)}));let ee=!1;if(typeof BroadcastChannel<"u"){const n=new BroadcastChannel(ue);typeof n.unref=="function"&&n.unref(),he(tt,e=>{ee||n.postMessage(e)}),n.onmessage=e=>{e.data&&At(e.data)}}else if(typeof self<"u"&&typeof navigator<"u"){he(tt,e=>{try{ee||(typeof localStorage<"u"&&localStorage.setItem(ue,JSON.stringify({trig:Math.random(),changedParts:e})),typeof self.clients=="object"&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(t=>t.postMessage({type:ue,changedParts:e})))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",e=>{if(e.key===ue){const t=JSON.parse(e.newValue);t&&At(t.changedParts)}});const n=self.document&&navigator.serviceWorker;n&&n.addEventListener("message",function({data:e}){e&&e.type===ue&&At(e.changedParts)})}T.rejectionMapper=function(n,e){if(!n||n instanceof Ce||n instanceof TypeError||n instanceof SyntaxError||!n.name||!Qn[n.name])return n;var t=new Qn[n.name](e||n.message,n);return"stack"in n&&te(t,"stack",{get:function(){return this.inner.stack}}),t},xa(X,La);class li extends we{constructor(){super("ponderguy");Dn(this,"models");this.version(3).stores({models:"id, name, model"})}}async function ui(n,e){return new Promise((t,a)=>{const r=new Kr;r.setMeshoptDecoder(gs),r.parse(n,e,s=>{t(s)},s=>{a(s)})})}const pi=Va("ponderGuy",{state:()=>({db:new li,model:void 0,animation:void 0,clock:void 0}),actions:{async getPonderModel(){var e;let n=(e=await this.db.models.get("ponder"))==null?void 0:e.model;return n||(n=(await Xa.get("/ponder-processed.glb",{responseType:"arraybuffer"})).data,await this.db.models.put({id:"ponder",name:"Ponder小子",model:n})),this.model||(this.model=await ui(n,"/"),this.setupAnimation()),this.animation||this.setupAnimation(),this.model},setupAnimation(){if(!this.model)return;const n=Ya(this.model),e=new Dr(n.scene);this.clock=new Lr,this.animation={mixer:e,animations:{Sitting:e.clipAction(ft.findByName(n.animations,"Sitting")),Running:e.clipAction(ft.findByName(n.animations,"Running")),Standing:e.clipAction(ft.findByName(n.animations,"Standing"))}},this.animation.animations.Sitting.play(),this.animation.animations.Running.play(),this.animation.animations.Standing.play(),this.animation.animations.Sitting.weight=0,this.animation.animations.Running.weight=0,this.animation.animations.Standing.weight=1},setAnimation(n){this.animation&&(this.animation.animations.Sitting.weight=0,this.animation.animations.Running.weight=0,this.animation.animations.Standing.weight=0,this.animation.animations[n].weight=1)},updateAnimation(){!this.animation||!this.clock||this.animation.mixer.update(this.clock.getDelta())}}});export{Kr as G,gs as M,pi as u};
